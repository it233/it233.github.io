<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[å­—ç¬¦ä¸²çš„æ‰©å±•]]></title>
    <url>%2Fit233.github.io%2F2018%2F12%2F07%2F%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95%2F</url>
    <content type="text"><![CDATA[ES6 åŠ å¼ºäº†å¯¹Unicodeçš„æ”¯æŒï¼Œå¹¶ä¸”æ‰©å±•äº†å­—ç¬¦ä¸²å¯¹è±¡ å­—ç¬¦ä¸²çš„Unicodeè¡¨ç¤ºæ³•javaScriptå…è®¸é‡‡ç”¨ \uxxxx å½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­xxxxè¡¨ç¤ºå­—ç¬¦çš„Unicodeç ç‚¹ 12"\u0061"// "a" ä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ³•åªé™äºç ç‚¹åœ¨ \u0000 ~ \uFFFFä¹‹é—´çš„å­—ç¬¦ï¼Œè¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ä¸²å¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨ç¤º 12345"\uD842\uDFB7"// "ğ ®·""\u20BB7"// " 7" å¦‚ä¸Šï¼Œå¦‚æœ\uåé¢è·Ÿä¸Šè¶…è¿‡0xFFFFçš„æ•°å€¼ï¼ˆå¦‚ï¼š\20BB7ï¼‰ï¼ŒJavaScriptä¼šç†è§£æˆ\u20BB+7 ç”±äº\u20BBæ˜¯ä¸€ä¸ªä¸å¯æ‰“å°å­—ç¬¦ï¼Œæ‰€ä»¥åªä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼ï¼Œåé¢è·Ÿä¸€ä¸ª7 ES6 å¯¹è¿™ä¸€ç‚¹åšå‡ºäº†æ”¹è¿›ï¼Œåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»è¯¥å­—ç¬¦ã€‚ 1234567891011"\u&#123;20BB7&#125;"// "ğ ®·""\u&#123;41&#125;\u&#123;42&#125;\u&#123;43&#125;"// "ABC"let hello = 123;hell\u&#123;6F&#125; // 123'\u&#123;1F680&#125;' === '\uD83D\uDE80'// true ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªä¾‹å­è¡¨æ˜ï¼Œå¤§æ‹¬å·è¡¨ç¤ºæ³•ä¸å››å­—èŠ‚çš„ UTF-16 ç¼–ç æ˜¯ç­‰ä»·çš„ã€‚ æœ‰äº†è¿™ç§è¡¨ç¤ºæ³•ä¹‹åï¼ŒJavaScript å…±æœ‰ 6 ç§æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚ 1234567891011"\u&#123;20BB7&#125;"// "ğ ®·""\u&#123;41&#125;\u&#123;42&#125;\u&#123;43&#125;"// "ABC"let hello = 123;hell\u&#123;6F&#125; // 123'\u&#123;1F680&#125;' === '\uD83D\uDE80'// true ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªä¾‹å­è¡¨æ˜ï¼Œå¤§æ‹¬å·è¡¨ç¤ºæ³•ä¸å››å­—èŠ‚çš„ UTF-16 ç¼–ç æ˜¯ç­‰ä»·çš„ã€‚ æœ‰äº†è¿™ç§è¡¨ç¤ºæ³•ä¹‹åï¼ŒJavaScript å…±æœ‰ 6 ç§æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚ 12345'\z' === 'z' // true'\172' === 'z' // true'\x7A' === 'z' // true'\u007A' === 'z' // true'\u&#123;7A&#125;' === 'z' // true codePointAt()JavaScript å†…éƒ¨ï¼Œå­—ç¬¦ä»¥ UTF-16 çš„æ ¼å¼å‚¨å­˜ï¼Œæ¯ä¸ªå­—ç¬¦å›ºå®šä¸º2ä¸ªå­—èŠ‚ã€‚å¯¹äºé‚£äº›éœ€è¦4ä¸ªå­—èŠ‚å‚¨å­˜çš„å­—ç¬¦ï¼ˆUnicode ç ç‚¹å¤§äº0xFFFFçš„å­—ç¬¦ï¼‰ï¼ŒJavaScript ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸¤ä¸ªå­—ç¬¦ã€‚ 1234567var s = "ğ ®·";s.length // 2s.charAt(0) // ''s.charAt(1) // ''s.charCodeAt(0) // 55362s.charCodeAt(1) // 57271 ä¸Šé¢ä»£ç ä¸­ï¼Œæ±‰å­—â€œğ ®·â€ï¼ˆæ³¨æ„ï¼Œè¿™ä¸ªå­—ä¸æ˜¯â€œå‰ç¥¥â€çš„â€œå‰â€ï¼‰çš„ç ç‚¹æ˜¯0x20BB7ï¼ŒUTF-16 ç¼–ç ä¸º0xD842 0xDFB7ï¼ˆåè¿›åˆ¶ä¸º55362 57271ï¼‰ï¼Œéœ€è¦4ä¸ªå­—èŠ‚å‚¨å­˜ã€‚å¯¹äºè¿™ç§4ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼ŒJavaScript ä¸èƒ½æ­£ç¡®å¤„ç†ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¼šè¯¯åˆ¤ä¸º2ï¼Œè€Œä¸”charAtæ–¹æ³•æ— æ³•è¯»å–æ•´ä¸ªå­—ç¬¦ï¼ŒcharCodeAtæ–¹æ³•åªèƒ½åˆ†åˆ«è¿”å›å‰ä¸¤ä¸ªå­—èŠ‚å’Œåä¸¤ä¸ªå­—èŠ‚çš„å€¼ã€‚ ES6 æä¾›äº†codePointAtæ–¹æ³•ï¼Œèƒ½å¤Ÿæ­£ç¡®å¤„ç† 4 ä¸ªå­—èŠ‚å‚¨å­˜çš„å­—ç¬¦ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦çš„ç ç‚¹ã€‚ 123456let s = 'ğ ®·a';s.codePointAt(0) // 134071s.codePointAt(1) // 57271s.codePointAt(2) // 97 codePointAtæ–¹æ³•çš„å‚æ•°ï¼Œæ˜¯å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼ˆä» 0 å¼€å§‹ï¼‰ã€‚ä¸Šé¢ä»£ç ä¸­ï¼ŒJavaScript å°†â€œğ ®·aâ€è§†ä¸ºä¸‰ä¸ªå­—ç¬¦ï¼ŒcodePointAt æ–¹æ³•åœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸Šï¼Œæ­£ç¡®åœ°è¯†åˆ«äº†â€œğ ®·â€ï¼Œè¿”å›äº†å®ƒçš„åè¿›åˆ¶ç ç‚¹ 134071ï¼ˆå³åå…­è¿›åˆ¶çš„20BB7ï¼‰ã€‚åœ¨ç¬¬äºŒä¸ªå­—ç¬¦ï¼ˆå³â€œğ ®·â€çš„åä¸¤ä¸ªå­—èŠ‚ï¼‰å’Œç¬¬ä¸‰ä¸ªå­—ç¬¦â€œaâ€ä¸Šï¼ŒcodePointAtæ–¹æ³•çš„ç»“æœä¸charCodeAtæ–¹æ³•ç›¸åŒã€‚ æ€»ä¹‹ï¼ŒcodePointAtæ–¹æ³•ä¼šæ­£ç¡®è¿”å› 32 ä½çš„ UTF-16 å­—ç¬¦çš„ç ç‚¹ã€‚å¯¹äºé‚£äº›ä¸¤ä¸ªå­—èŠ‚å‚¨å­˜çš„å¸¸è§„å­—ç¬¦ï¼Œå®ƒçš„è¿”å›ç»“æœä¸charCodeAtæ–¹æ³•ç›¸åŒã€‚ codePointAtæ–¹æ³•è¿”å›çš„æ˜¯ç ç‚¹çš„åè¿›åˆ¶å€¼ï¼Œå¦‚æœæƒ³è¦åå…­è¿›åˆ¶çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨toStringæ–¹æ³•è½¬æ¢ä¸€ä¸‹ã€‚ ç–‘é—®ï¼šæ—¢ç„¶ç”¨ç´¢å¼•0è¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ¸ é“å®Œæ•´çš„â€ğ ®·â€çš„ç ç‚¹ï¼Œä¸ºä»€ä¹ˆç´¢å¼•ä¸º1è¿˜æ˜¯å–åˆ°â€ğ ®·â€çš„åä¸¤ä¸ªç ç‚¹ï¼Ÿè€Œç´¢å¼•ä¸º2æ‰æ˜¯å–åˆ°ç¬¬äºŒä¸ªå­—ç¬¦ï¼Ÿæ²¡ææ‡‚ï¼Œå®éªŒå‡ºæ¥ç¡®å®æ˜¯å¦‚ä¸Šçš„ç»“æœï¼é‚£ä¹ˆè¿™æ ·å°±ä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‡Œé¢çš„å­—ç¬¦ä¸ç¡®å®šåˆ°åº•æ˜¯ä¸¤ä¸ªå­—èŠ‚è¿˜æ˜¯å››ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç¡®å®šä¸€ä¸ªå­—ç¬¦åŒ…å«çš„ç ç‚¹åˆ°åº•æ˜¯ä¸€ä¸ªè¿˜æ˜¯ä¸¤ä¸ªï¼Œè¿™æ ·å–å€¼çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿå°±ä¼šå‡ºç°ä½ç½®æ— æ³•ç¡®å®šï¼ å…ˆæ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š 123456let s = 'ğ ®·a';for (let ch of s) &#123; console.log(ch.codePointAt(0).toString(16));&#125;// 20bb7// 61 è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼šåœ¨ES6ç¯å¢ƒä¸‹ï¼ˆES5ä¸çŸ¥é“ï¼Œå› ä¸ºæ²¡æœ‰åœ¨ES5ç¯å¢ƒä¸‹æµ‹è¯•è¿‡â€ğ ®·aâ€è¿™ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼Œä½¿ç”¨split()å°†sæ‹†æˆæ•°ç»„ï¼Œæ•°ç»„é•¿åº¦ä¸º3ï¼Œå°±æ˜¯è·Ÿä¸Šé¢çš„ç»“æœä¸€æ ·ï¼Œä½¿ç”¨charAt()ï¼Œæ ¹æ®ç´¢å¼•å–å€¼ï¼Œ0å’Œ1éƒ½æ˜¯åªèƒ½å–â€œğ ®·â€å­—çš„å‰ä¸¤ä¸ªå­—èŠ‚å’Œåä¸¤ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œå°±ç”¨forå¾ªç¯ï¼Œæ³¨æ„æ˜¯ofï¼Œä¸èƒ½ç”¨inï¼Œä½¿ç”¨inå–å¾—çš„æ˜¯split()ä¹‹åçš„ç´¢å¼•ï¼ˆ0ï¼Œ1ï¼Œ2ï¼‰ï¼Œé™¤äº†ä½¿ç”¨å¾ªç¯ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å˜é‡çš„è§£æ„èµ‹å€¼ï¼š 12345let s = 'ğ ®·a';let [one,two] = sconsole.log(one,two)//20bb7 //61 ä»¥ä¸Šä¸¤ç§æ–¹å¼,ç›®å‰åªæƒ³åˆ°äº†è¿™ä¸¤ç§èƒ½å¤Ÿå®Œå…¨è·å–å­—ç¬¦ä¸²ä¸­å®Œæ•´çš„å•ä¸ªå­—ç¬¦çš„ç ç‚¹æ–¹æ³• æ³¨æ„ï¼šå¯¹è±¡çš„è§£æ„èµ‹å€¼ä¹Ÿæ˜¯é•¿åº¦ä¸º3ï¼Œä¸å¯è¡Œï¼Œsubstr()ã€sbustring()ã€split()ç­‰ç­‰è¿™äº›æ–¹æ³•ï¼Œéƒ½ä¸è¡Œã€‚å°±è¿indexOf(â€œaâ€)è·å¾—çš„ç´¢å¼•éƒ½æ˜¯2ï¼Œå¾ˆå°´å°¬çš„ç»“æœ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦åˆ°åº•æ˜¯ä¸¤ä¸ªå­—èŠ‚è¿˜æ˜¯å››ä¸ªå­—èŠ‚ç»„æˆçš„ï¼š 123456function is32Bit(c) &#123; return c.codePointAt(0) &gt; 0xFFFF;&#125;is32Bit("ğ ®·") // trueis32Bit("a") // false String.fromCodePoint()ES5 æä¾›String.fromCharCodeæ–¹æ³•ï¼Œç”¨äºä»ç ç‚¹è¿”å›å¯¹åº”å­—ç¬¦ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸èƒ½è¯†åˆ« 32 ä½çš„ UTF-16 å­—ç¬¦ï¼ˆUnicode ç¼–å·å¤§äº0xFFFFï¼‰ã€‚ 12String.fromCharCode(0x20BB7)// "à®·" ä¸Šé¢ä»£ç ä¸­ï¼ŒString.fromCharCodeä¸èƒ½è¯†åˆ«å¤§äº0xFFFFçš„ç ç‚¹ï¼Œæ‰€ä»¥0x20BB7å°±å‘ç”Ÿäº†æº¢å‡ºï¼Œæœ€é«˜ä½2è¢«èˆå¼ƒäº†ï¼Œæœ€åè¿”å›ç ç‚¹U+0BB7å¯¹åº”çš„å­—ç¬¦ï¼Œè€Œä¸æ˜¯ç ç‚¹U+20BB7å¯¹åº”çš„å­—ç¬¦ã€‚ ES6 æä¾›äº†String.fromCodePointæ–¹æ³•ï¼Œå¯ä»¥è¯†åˆ«å¤§äº0xFFFFçš„å­—ç¬¦ï¼Œå¼¥è¡¥äº†String.fromCharCodeæ–¹æ³•çš„ä¸è¶³ã€‚åœ¨ä½œç”¨ä¸Šï¼Œæ­£å¥½ä¸codePointAtæ–¹æ³•ç›¸å 1234String.fromCodePoint(0x20BB7)// "ğ ®·"String.fromCodePoint(0x78, 0x1f680, 0x79) === 'x\uD83D\uDE80y'// true ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœString.fromCodePointæ–¹æ³•æœ‰å¤šä¸ªå‚æ•°ï¼Œåˆ™å®ƒä»¬ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›ã€‚ å¦‚ä¸Šç¬¬ä¸‰è¡ŒString.fromCodePoint(0x78, 0x1f680, 0x79)è¿”å›çš„å­—ç¬¦ä¸²æ˜¯ï¼šxğŸš€y æ³¨æ„ï¼ŒfromCodePointæ–¹æ³•å®šä¹‰åœ¨Stringå¯¹è±¡ä¸Šï¼Œè€ŒcodePointAtæ–¹æ³•å®šä¹‰åœ¨å­—ç¬¦ä¸²çš„å®ä¾‹å¯¹è±¡ä¸Šã€‚ å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£ä¹‹å‰æœ‰è¯´è¿‡ï¼ˆå˜é‡çš„è§£æ„èµ‹å€¼ï¼‰ï¼Œå®éªŒè¡¨æ˜ï¼Œå­—ç¬¦ä¸²æ˜¯å…·å¤‡Iteratoræ¥å£çš„ï¼Œä¹Ÿå°±æ˜¯èƒ½å¤Ÿå¾ªç¯ï¼Œå³éå†æ¥å£ï¼Œè¿™æ˜¯ES6ä½å­—ç¬¦ä¸²æ·»åŠ çš„ï¼Œè¿™æ ·å­—ç¬¦ä¸²å°±å¯ä»¥ä½¿ç”¨forâ€¦ofå¾ªç¯ä¾¿åˆ©ï¼Œä¸Šé¢ä»£ç æœ‰ä¾‹å­ï¼Œå°±ä¸åˆ—ä¸¾äº† å½“ç„¶ï¼Œé™¤äº†ä¾¿äºéå†å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªéå†å™¨æœ€å¤§çš„æœ‰ç‚¹æ˜¯å¯ä»¥è¯†åˆ«å¤§äº0xFFFFçš„ç ç‚¹ï¼Œä¼ ç»Ÿçš„forå¾ªç¯æ— æ³•è¯†åˆ«è¿™æ ·çš„ç ç‚¹ 12345678910for (let i = 0; i &lt; text.length; i++) &#123; console.log(text[i]);&#125;// " "// " "for (let i of text) &#123; console.log(i);&#125;// "ğ ®·" ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²textåªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯forå¾ªç¯ä¼šè®¤ä¸ºå®ƒåŒ…å«ä¸¤ä¸ªå­—ç¬¦ï¼ˆéƒ½ä¸å¯æ‰“å°ï¼‰ï¼Œè€Œfor...ofå¾ªç¯ä¼šæ­£ç¡®è¯†åˆ«å‡ºè¿™ä¸€ä¸ªå­—ç¬¦ã€‚ normalize()è®¸å¤šæ¬§æ´²è¯­è¨€æœ‰è¯­è°ƒç¬¦å·å’Œé‡éŸ³ç¬¦å·ã€‚ä¸ºäº†è¡¨ç¤ºå®ƒä»¬ï¼ŒUnicode æä¾›äº†ä¸¤ç§æ–¹æ³•ã€‚ä¸€ç§æ˜¯ç›´æ¥æä¾›å¸¦é‡éŸ³ç¬¦å·çš„å­—ç¬¦ï¼Œæ¯”å¦‚Ç‘ï¼ˆ\u01D1ï¼‰ã€‚å¦ä¸€ç§æ˜¯æä¾›åˆæˆç¬¦å·ï¼ˆcombining characterï¼‰ï¼Œå³åŸå­—ç¬¦ä¸é‡éŸ³ç¬¦å·çš„åˆæˆï¼Œä¸¤ä¸ªå­—ç¬¦åˆæˆä¸€ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚Oï¼ˆ\u004Fï¼‰å’ŒË‡ï¼ˆ\u030Cï¼‰åˆæˆÇ‘ï¼ˆ\u004F\u030Cï¼‰ã€‚ è¿™ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼Œåœ¨è§†è§‰å’Œè¯­ä¹‰ä¸Šéƒ½ç­‰ä»·ï¼Œä½†æ˜¯ JavaScript ä¸èƒ½è¯†åˆ« 1234'\u01D1'==='\u004F\u030C' //false'\u01D1'.length // 1'\u004F\u030C'.length // 2 ä¸Šé¢ä»£ç è¡¨ç¤ºï¼ŒJavaScript å°†åˆæˆå­—ç¬¦è§†ä¸ºä¸¤ä¸ªå­—ç¬¦ï¼Œå¯¼è‡´ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ä¸ç›¸ç­‰ã€‚ ES6 æä¾›å­—ç¬¦ä¸²å®ä¾‹çš„normalize()æ–¹æ³•ï¼Œç”¨æ¥å°†å­—ç¬¦çš„ä¸åŒè¡¨ç¤ºæ–¹æ³•ç»Ÿä¸€ä¸ºåŒæ ·çš„å½¢å¼ï¼Œè¿™ç§°ä¸º Unicode æ­£è§„åŒ–ã€‚ 12'\u01D1'.normalize() === '\u004F\u030C'.normalize()// true normalizeæ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°æ¥æŒ‡å®šnormalizeçš„æ–¹å¼ï¼Œå‚æ•°çš„å››ä¸ªå¯é€‰å€¼å¦‚ä¸‹ã€‚ NFCï¼Œé»˜è®¤å‚æ•°ï¼Œè¡¨ç¤ºâ€œæ ‡å‡†ç­‰ä»·åˆæˆâ€ï¼ˆNormalization Form Canonical Compositionï¼‰ï¼Œè¿”å›å¤šä¸ªç®€å•å­—ç¬¦çš„åˆæˆå­—ç¬¦ã€‚æ‰€è°“â€œæ ‡å‡†ç­‰ä»·â€æŒ‡çš„æ˜¯è§†è§‰å’Œè¯­ä¹‰ä¸Šçš„ç­‰ä»·ã€‚ NFDï¼Œè¡¨ç¤ºâ€œæ ‡å‡†ç­‰ä»·åˆ†è§£â€ï¼ˆNormalization Form Canonical Decompositionï¼‰ï¼Œå³åœ¨æ ‡å‡†ç­‰ä»·çš„å‰æä¸‹ï¼Œè¿”å›åˆæˆå­—ç¬¦åˆ†è§£çš„å¤šä¸ªç®€å•å­—ç¬¦ã€‚ NFKCï¼Œè¡¨ç¤ºâ€œå…¼å®¹ç­‰ä»·åˆæˆâ€ï¼ˆNormalization Form Compatibility Compositionï¼‰ï¼Œè¿”å›åˆæˆå­—ç¬¦ã€‚æ‰€è°“â€œå…¼å®¹ç­‰ä»·â€æŒ‡çš„æ˜¯è¯­ä¹‰ä¸Šå­˜åœ¨ç­‰ä»·ï¼Œä½†è§†è§‰ä¸Šä¸ç­‰ä»·ï¼Œæ¯”å¦‚â€œå›â€å’Œâ€œå–œå–œâ€ã€‚ï¼ˆè¿™åªæ˜¯ç”¨æ¥ä¸¾ä¾‹ï¼Œnormalizeæ–¹æ³•ä¸èƒ½è¯†åˆ«ä¸­æ–‡ã€‚ï¼‰ NFKDï¼Œè¡¨ç¤ºâ€œå…¼å®¹ç­‰ä»·åˆ†è§£â€ï¼ˆNormalization Form Compatibility Decompositionï¼‰ï¼Œå³åœ¨å…¼å®¹ç­‰ä»·çš„å‰æä¸‹ï¼Œè¿”å›åˆæˆå­—ç¬¦åˆ†è§£çš„å¤šä¸ªç®€å•å­—ç¬¦ã€‚ 12'\u004F\u030C'.normalize('NFC').length // 1'\u004F\u030C'.normalize('NFD').length // 2 ä¸Šé¢ä»£ç è¡¨ç¤ºï¼ŒNFCå‚æ•°è¿”å›å­—ç¬¦çš„åˆæˆå½¢å¼ï¼ŒNFDå‚æ•°è¿”å›å­—ç¬¦çš„åˆ†è§£å½¢å¼ã€‚ ä¸è¿‡ï¼Œnormalizeæ–¹æ³•ç›®å‰ä¸èƒ½è¯†åˆ«ä¸‰ä¸ªæˆ–ä¸‰ä¸ªä»¥ä¸Šå­—ç¬¦çš„åˆæˆã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯åªèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šè¿‡ Unicode ç¼–å·åŒºé—´åˆ¤æ–­ã€‚ includes(), startsWith(), endsWith()ä¼ ç»Ÿä¸Šï¼ŒJavaScript åªæœ‰indexOfæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚ES6 åˆæä¾›äº†ä¸‰ç§æ–°æ–¹æ³•ã€‚ includes()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ã€‚ startsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚ endsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚ 12345let s = 'Hello world!';s.startsWith('Hello') // trues.endsWith('!') // trues.includes('o') // true è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢çš„ä½ç½®ã€‚ 12345let s = 'Hello world!';s.startsWith('world', 6) // trues.endsWith('Hello', 5) // trues.includes('Hello', 6) // false ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°næ—¶ï¼ŒendsWithçš„è¡Œä¸ºä¸å…¶ä»–ä¸¤ä¸ªæ–¹æ³•æœ‰æ‰€ä¸åŒã€‚å®ƒé’ˆå¯¹å‰nä¸ªå­—ç¬¦ï¼Œè€Œå…¶ä»–ä¸¤ä¸ªæ–¹æ³•é’ˆå¯¹ä»ç¬¬nä¸ªä½ç½®ç›´åˆ°å­—ç¬¦ä¸²ç»“æŸã€‚ repeat()repeatæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå°†åŸå­—ç¬¦ä¸²é‡å¤næ¬¡ã€‚ 123'x'.repeat(3) // "xxx"'hello'.repeat(2) // "hellohello"'na'.repeat(0) // "" å‚æ•°å¦‚æœæ˜¯å°æ•°ï¼Œä¼šè¢«èˆå¼ƒå°æ•°éƒ¨åˆ†å–æ•´ã€‚ 1'na'.repeat(2.9) // "nana" å¦‚æœrepeatçš„å‚æ•°æ˜¯è´Ÿæ•°æˆ–è€…Infinityï¼Œä¼šæŠ¥é”™ã€‚ 1234'na'.repeat(Infinity)// RangeError'na'.repeat(-1)// RangeError ä½†æ˜¯ï¼Œå¦‚æœå‚æ•°æ˜¯ 0 åˆ°-1 ä¹‹é—´çš„å°æ•°ï¼Œåˆ™ç­‰åŒäº 0ï¼Œè¿™æ˜¯å› ä¸ºä¼šå…ˆè¿›è¡Œå–æ•´è¿ç®—ã€‚0 åˆ°-1 ä¹‹é—´çš„å°æ•°ï¼Œå–æ•´ä»¥åç­‰äº-0ï¼Œrepeatè§†åŒä¸º 0ã€‚ 1'na'.repeat(-0.9) // "" å‚æ•°NaNç­‰åŒäº 0ã€‚ 1'na'.repeat(NaN) // "" å¦‚æœrepeatçš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šå…ˆè½¬æ¢æˆæ•°å­—ã€‚ 12'na'.repeat('na') // ""'na'.repeat('3') // "nanana" padStart()ï¼ŒpadEnd()ES2017 å¼•å…¥äº†å­—ç¬¦ä¸²è¡¥å…¨é•¿åº¦çš„åŠŸèƒ½ã€‚å¦‚æœæŸä¸ªå­—ç¬¦ä¸²ä¸å¤ŸæŒ‡å®šé•¿åº¦ï¼Œä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨ã€‚padStart()ç”¨äºå¤´éƒ¨è¡¥å…¨ï¼ŒpadEnd()ç”¨äºå°¾éƒ¨è¡¥å…¨ã€‚ 12345'x'.padStart(5, 'ab') // 'ababx''x'.padStart(4, 'ab') // 'abax''x'.padEnd(5, 'ab') // 'xabab''x'.padEnd(4, 'ab') // 'xaba' ä¸Šé¢ä»£ç ä¸­ï¼ŒpadStart()å’ŒpadEnd()ä¸€å…±æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²è¡¥å…¨ç”Ÿæ•ˆçš„æœ€å¤§é•¿åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²ã€‚ å¦‚æœåŸå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç­‰äºæˆ–å¤§äºæœ€å¤§é•¿åº¦ï¼Œåˆ™å­—ç¬¦ä¸²è¡¥å…¨ä¸ç”Ÿæ•ˆï¼Œè¿”å›åŸå­—ç¬¦ä¸²ã€‚ 12'xxx'.padStart(2, 'ab') // 'xxx''xxx'.padEnd(2, 'ab') // 'xxx' å¦‚æœç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²ä¸åŸå­—ç¬¦ä¸²ï¼Œä¸¤è€…çš„é•¿åº¦ä¹‹å’Œè¶…è¿‡äº†æœ€å¤§é•¿åº¦ï¼Œåˆ™ä¼šæˆªå»è¶…å‡ºä½æ•°çš„è¡¥å…¨å­—ç¬¦ä¸²ã€‚ 12'abc'.padStart(10, '0123456789')// '0123456abc' å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œé»˜è®¤ä½¿ç”¨ç©ºæ ¼è¡¥å…¨é•¿åº¦ã€‚ 12'x'.padStart(4) // ' x''x'.padEnd(4) // 'x ' padStart()çš„å¸¸è§ç”¨é€”æ˜¯ä¸ºæ•°å€¼è¡¥å…¨æŒ‡å®šä½æ•°ã€‚ä¸‹é¢ä»£ç ç”Ÿæˆ 10 ä½çš„æ•°å€¼å­—ç¬¦ä¸²ã€‚ 123'1'.padStart(10, '0') // "0000000001"'12'.padStart(10, '0') // "0000000012"'123456'.padStart(10, '0') // "0000123456" å¦ä¸€ä¸ªç”¨é€”æ˜¯æç¤ºå­—ç¬¦ä¸²æ ¼å¼ã€‚ 12'12'.padStart(10, 'YYYY-MM-DD') // "YYYY-MM-12"'09-12'.padStart(10, 'YYYY-MM-DD') // "YYYY-09-12" matchAll()matchAllæ–¹æ³•è¿”å›ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åœ¨å½“å‰å­—ç¬¦ä¸²çš„æ‰€æœ‰åŒ¹é…ï¼Œè¯¦è§ã€Šæ­£åˆ™çš„æ‰©å±•ã€‹çš„ä¸€ç« ã€‚ æ¨¡æ¿å­—ç¬¦ä¸²ä¼ ç»Ÿçš„ JavaScript è¯­è¨€ï¼Œè¾“å‡ºæ¨¡æ¿é€šå¸¸æ˜¯è¿™æ ·å†™çš„ï¼ˆä¸‹é¢ä½¿ç”¨äº† jQuery çš„æ–¹æ³•ï¼‰ã€‚ 123456$('#result').append( 'There are &lt;b&gt;' + basket.count + '&lt;/b&gt; ' + 'items in your basket, ' + '&lt;em&gt;' + basket.onSale + '&lt;/em&gt; are on sale!'); ä¸Šé¢è¿™ç§å†™æ³•ç›¸å½“ç¹çä¸æ–¹ä¾¿ï¼ŒES6 å¼•å…¥äº†æ¨¡æ¿å­—ç¬¦ä¸²è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 12345$('#result').append(` There are &lt;b&gt;$&#123;basket.count&#125;&lt;/b&gt; items in your basket, &lt;em&gt;$&#123;basket.onSale&#125;&lt;/em&gt; are on sale!`); æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆtemplate stringï¼‰æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·ï¼ˆ`ï¼‰æ ‡è¯†ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ã€‚ 12345678910111213// æ™®é€šå­—ç¬¦ä¸²`In JavaScript '\n' is a line-feed.`// å¤šè¡Œå­—ç¬¦ä¸²`In JavaScript this is not legal.`console.log(`string text line 1string text line 2`);// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡let name = "Bob", time = "today";`Hello $&#123;name&#125;, how are you $&#123;time&#125;?` ä¸Šé¢ä»£ç ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œéƒ½æ˜¯ç”¨åå¼•å·è¡¨ç¤ºã€‚å¦‚æœåœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­éœ€è¦ä½¿ç”¨åå¼•å·ï¼Œåˆ™å‰é¢è¦ç”¨åæ–œæ è½¬ä¹‰ã€‚ 1let greeting = `\`Yo\` World!`; å¦‚æœä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­ã€‚ 123456$('#list').html(`&lt;ul&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt;&lt;/ul&gt;`); ä¸Šé¢ä»£ç ä¸­ï¼Œæ‰€æœ‰æ¨¡æ¿å­—ç¬¦ä¸²çš„ç©ºæ ¼å’Œæ¢è¡Œï¼Œéƒ½æ˜¯è¢«ä¿ç•™çš„ï¼Œæ¯”å¦‚&lt;ul&gt;æ ‡ç­¾å‰é¢ä¼šæœ‰ä¸€ä¸ªæ¢è¡Œã€‚å¦‚æœä½ ä¸æƒ³è¦è¿™ä¸ªæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨trimæ–¹æ³•æ¶ˆé™¤å®ƒã€‚ 123456$('#list').html(`&lt;ul&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt;&lt;/ul&gt;`.trim()); æ¨¡æ¿å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨${}ä¹‹ä¸­ã€‚ 123456789101112function authorize(user, action) &#123; if (!user.hasPrivilege(action)) &#123; throw new Error( // ä¼ ç»Ÿå†™æ³•ä¸º // 'User ' // + user.name // + ' is not authorized to do ' // + action // + '.' `User $&#123;user.name&#125; is not authorized to do $&#123;action&#125;.`); &#125;&#125; å¤§æ‹¬å·å†…éƒ¨å¯ä»¥æ”¾å…¥ä»»æ„çš„ JavaScript è¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡å±æ€§ã€‚ 123456789101112let x = 1;let y = 2;`$&#123;x&#125; + $&#123;y&#125; = $&#123;x + y&#125;`// "1 + 2 = 3"`$&#123;x&#125; + $&#123;y * 2&#125; = $&#123;x + y * 2&#125;`// "1 + 4 = 5"let obj = &#123;x: 1, y: 2&#125;;`$&#123;obj.x + obj.y&#125;`// "3" æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­è¿˜èƒ½è°ƒç”¨å‡½æ•°ã€‚ 123456function fn() &#123; return "Hello World";&#125;`foo $&#123;fn()&#125; bar`// foo Hello World bar å¦‚æœå¤§æ‹¬å·ä¸­çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå°†æŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²ã€‚æ¯”å¦‚ï¼Œå¤§æ‹¬å·ä¸­æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†é»˜è®¤è°ƒç”¨å¯¹è±¡çš„toStringæ–¹æ³•ã€‚ å¦‚æœæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ²¡æœ‰å£°æ˜ï¼Œå°†æŠ¥é”™ã€‚ 123// å˜é‡placeæ²¡æœ‰å£°æ˜let msg = `Hello, $&#123;place&#125;`;// æŠ¥é”™ ç”±äºæ¨¡æ¿å­—ç¬¦ä¸²çš„å¤§æ‹¬å·å†…éƒ¨ï¼Œå°±æ˜¯æ‰§è¡Œ JavaScript ä»£ç ï¼Œå› æ­¤å¦‚æœå¤§æ‹¬å·å†…éƒ¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†ä¼šåŸæ ·è¾“å‡ºã€‚ 12`Hello $&#123;'World'&#125;`// "Hello World" æ¨¡æ¿å­—ç¬¦ä¸²ç”šè‡³è¿˜èƒ½åµŒå¥—ã€‚ 12345678const tmpl = addrs =&gt; ` &lt;table&gt; $&#123;addrs.map(addr =&gt; ` &lt;tr&gt;&lt;td&gt;$&#123;addr.first&#125;&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;$&#123;addr.last&#125;&lt;/td&gt;&lt;/tr&gt; `).join('')&#125; &lt;/table&gt;`; ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²çš„å˜é‡ä¹‹ä¸­ï¼ŒåˆåµŒå…¥äº†å¦ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚ 123456789101112131415const data = [ &#123; first: '&lt;Jane&gt;', last: 'Bond' &#125;, &#123; first: 'Lars', last: '&lt;Croft&gt;' &#125;,];console.log(tmpl(data));// &lt;table&gt;//// &lt;tr&gt;&lt;td&gt;&lt;Jane&gt;&lt;/td&gt;&lt;/tr&gt;// &lt;tr&gt;&lt;td&gt;Bond&lt;/td&gt;&lt;/tr&gt;//// &lt;tr&gt;&lt;td&gt;Lars&lt;/td&gt;&lt;/tr&gt;// &lt;tr&gt;&lt;td&gt;&lt;Croft&gt;&lt;/td&gt;&lt;/tr&gt;//// &lt;/table&gt; å¦‚æœéœ€è¦å¼•ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«ï¼Œåœ¨éœ€è¦æ—¶æ‰§è¡Œï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ã€‚ 123456789// å†™æ³•ä¸€let str = 'return ' + '`Hello $&#123;name&#125;!`';let func = new Function('name', str);func('Jack') // "Hello Jack!"// å†™æ³•äºŒlet str = '(name) =&gt; `Hello $&#123;name&#125;!`';let func = eval.call(null, str);func('Jack') // "Hello Jack!" å®ä¾‹ï¼šæ¨¡æ¿ç¼–è¯‘ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªé€šè¿‡æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç”Ÿæˆæ­£å¼æ¨¡æ¿çš„å®ä¾‹ã€‚ 1234567let template = `&lt;ul&gt; &lt;% for(let i=0; i &lt; data.supplies.length; i++) &#123; %&gt; &lt;li&gt;&lt;%= data.supplies[i] %&gt;&lt;/li&gt; &lt;% &#125; %&gt;&lt;/ul&gt;`; ä¸Šé¢ä»£ç åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œæ”¾ç½®äº†ä¸€ä¸ªå¸¸è§„æ¨¡æ¿ã€‚è¯¥æ¨¡æ¿ä½¿ç”¨&lt;%...%&gt;æ”¾ç½® JavaScript ä»£ç ï¼Œä½¿ç”¨&lt;%= ... %&gt;è¾“å‡º JavaScript è¡¨è¾¾å¼ã€‚ æ€ä¹ˆç¼–è¯‘è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²å‘¢ï¼Ÿ ä¸€ç§æ€è·¯æ˜¯å°†å…¶è½¬æ¢ä¸º JavaScript è¡¨è¾¾å¼å­—ç¬¦ä¸²ã€‚ 1234567echo('&lt;ul&gt;');for(let i=0; i &lt; data.supplies.length; i++) &#123; echo('&lt;li&gt;'); echo(data.supplies[i]); echo('&lt;/li&gt;');&#125;;echo('&lt;/ul&gt;'); è¿™ä¸ªè½¬æ¢ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°±è¡Œäº†ã€‚ 12345678let evalExpr = /&lt;%=(.+?)%&gt;/g;let expr = /&lt;%([\s\S]+?)%&gt;/g;template = template .replace(evalExpr, '`); \n echo( $1 ); \n echo(`') .replace(expr, '`); \n $1 \n echo(`');template = 'echo(`' + template + '`);'; ç„¶åï¼Œå°†templateå°è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢è¿”å›ï¼Œå°±å¯ä»¥äº†ã€‚ 1234567891011121314let script =`(function parse(data)&#123; let output = ""; function echo(html)&#123; output += html; &#125; $&#123; template &#125; return output;&#125;)`;return script; å°†ä¸Šé¢çš„å†…å®¹æ‹¼è£…æˆä¸€ä¸ªæ¨¡æ¿ç¼–è¯‘å‡½æ•°compileã€‚ 12345678910111213141516171819202122232425function compile(template)&#123; const evalExpr = /&lt;%=(.+?)%&gt;/g; const expr = /&lt;%([\s\S]+?)%&gt;/g; template = template .replace(evalExpr, '`); \n echo( $1 ); \n echo(`') .replace(expr, '`); \n $1 \n echo(`'); template = 'echo(`' + template + '`);'; let script = `(function parse(data)&#123; let output = ""; function echo(html)&#123; output += html; &#125; $&#123; template &#125; return output; &#125;)`; return script;&#125; compileå‡½æ•°çš„ç”¨æ³•å¦‚ä¸‹ã€‚ 1234567let parse = eval(compile(template));div.innerHTML = parse(&#123; supplies: [ "broom", "mop", "cleaner" ] &#125;);// &lt;ul&gt;// &lt;li&gt;broom&lt;/li&gt;// &lt;li&gt;mop&lt;/li&gt;// &lt;li&gt;cleaner&lt;/li&gt;// &lt;/ul&gt; æ ‡ç­¾æ¨¡æ¿æ¨¡æ¿å­—ç¬¦ä¸²çš„åŠŸèƒ½ï¼Œä¸ä»…ä»…æ˜¯ä¸Šé¢è¿™äº›ã€‚å®ƒå¯ä»¥ç´§è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ã€‚è¿™è¢«ç§°ä¸ºâ€œæ ‡ç­¾æ¨¡æ¿â€åŠŸèƒ½ï¼ˆtagged templateï¼‰ã€‚ 123alert`123`// ç­‰åŒäºalert(123) æ ‡ç­¾æ¨¡æ¿å…¶å®ä¸æ˜¯æ¨¡æ¿ï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚â€œæ ‡ç­¾â€æŒ‡çš„å°±æ˜¯å‡½æ•°ï¼Œç´§è·Ÿåœ¨åé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²å°±æ˜¯å®ƒçš„å‚æ•°ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ¨¡æ¿å­—ç¬¦é‡Œé¢æœ‰å˜é‡ï¼Œå°±ä¸æ˜¯ç®€å•çš„è°ƒç”¨äº†ï¼Œè€Œæ˜¯ä¼šå°†æ¨¡æ¿å­—ç¬¦ä¸²å…ˆå¤„ç†æˆå¤šä¸ªå‚æ•°ï¼Œå†è°ƒç”¨å‡½æ•°ã€‚ 123456let a = 5;let b = 10;tag`Hello $&#123; a + b &#125; world $&#123; a * b &#125;`;// ç­‰åŒäºtag(['Hello ', ' world ', ''], 15, 50); ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å‰é¢æœ‰ä¸€ä¸ªæ ‡è¯†åtagï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æ•´ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå°±æ˜¯tagå‡½æ•°å¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²åçš„è¿”å›å€¼ã€‚ å‡½æ•°tagä¾æ¬¡ä¼šæ¥æ”¶åˆ°å¤šä¸ªå‚æ•°ã€‚ 123456789function tag(stringArr, value1, value2)&#123; // ...&#125;// ç­‰åŒäºfunction tag(stringArr, ...values)&#123; // ...&#125; tagå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„æˆå‘˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ä¸­é‚£äº›æ²¡æœ‰å˜é‡æ›¿æ¢çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡æ›¿æ¢åªå‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸ç¬¬äºŒä¸ªæˆå‘˜ä¹‹é—´ã€ç¬¬äºŒä¸ªæˆå‘˜ä¸ç¬¬ä¸‰ä¸ªæˆå‘˜ä¹‹é—´ï¼Œä»¥æ­¤ç±»æ¨ã€‚ tagå‡½æ•°çš„å…¶ä»–å‚æ•°ï¼Œéƒ½æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²å„ä¸ªå˜é‡è¢«æ›¿æ¢åçš„å€¼ã€‚ç”±äºæœ¬ä¾‹ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å«æœ‰ä¸¤ä¸ªå˜é‡ï¼Œå› æ­¤tagä¼šæ¥å—åˆ°value1å’Œvalue2ä¸¤ä¸ªå‚æ•°ã€‚ tagå‡½æ•°æ‰€æœ‰å‚æ•°çš„å®é™…å€¼å¦‚ä¸‹ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°ï¼š[&#39;Hello &#39;, &#39; world &#39;, &#39;&#39;] ç¬¬äºŒä¸ªå‚æ•°: 15 ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š50 ä¹Ÿå°±æ˜¯è¯´ï¼Œtagå‡½æ•°å®é™…ä¸Šä»¥ä¸‹é¢çš„å½¢å¼è°ƒç”¨ã€‚ 1tag(['Hello ', ' world ', ''], 15, 50) æˆ‘ä»¬å¯ä»¥æŒ‰ç…§éœ€è¦ç¼–å†™tagå‡½æ•°çš„ä»£ç ã€‚ä¸‹é¢æ˜¯tagå‡½æ•°çš„ä¸€ç§å†™æ³•ï¼Œä»¥åŠè¿è¡Œç»“æœã€‚ 1234567891011121314151617181920let a = 5;let b = 10;function tag(s, v1, v2) &#123; console.log(s[0]); console.log(s[1]); console.log(s[2]); console.log(v1); console.log(v2); return "OK";&#125;tag`Hello $&#123; a + b &#125; world $&#123; a * b&#125;`;// "Hello "// " world "// ""// 15// 50// "OK" ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ã€‚ 123456789101112131415161718let total = 30;let msg = passthru`The total is $&#123;total&#125; ($&#123;total*1.05&#125; with tax)`;function passthru(literals) &#123; let result = ''; let i = 0; while (i &lt; literals.length) &#123; result += literals[i++]; if (i &lt; arguments.length) &#123; result += arguments[i]; &#125; &#125; return result;&#125;msg // "The total is 30 (31.5 with tax)" ä¸Šé¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†ï¼Œå¦‚ä½•å°†å„ä¸ªå‚æ•°æŒ‰ç…§åŸæ¥çš„ä½ç½®æ‹¼åˆå›å»ã€‚ passthruå‡½æ•°é‡‡ç”¨ rest å‚æ•°çš„å†™æ³•å¦‚ä¸‹ã€‚ 12345678910function passthru(literals, ...values) &#123; let output = ""; let index; for (index = 0; index &lt; values.length; index++) &#123; output += literals[index] + values[index]; &#125; output += literals[index] return output;&#125; â€œæ ‡ç­¾æ¨¡æ¿â€çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œå°±æ˜¯è¿‡æ»¤ HTML å­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹ã€‚ 123456789101112131415161718let message = SaferHTML`&lt;p&gt;$&#123;sender&#125; has sent you a message.&lt;/p&gt;`;function SaferHTML(templateData) &#123; let s = templateData[0]; for (let i = 1; i &lt; arguments.length; i++) &#123; let arg = String(arguments[i]); // Escape special characters in the substitution. s += arg.replace(/&amp;/g, "&amp;amp;") .replace(/&lt;/g, "&amp;lt;") .replace(/&gt;/g, "&amp;gt;"); // Don't escape special characters in the template. s += templateData[i]; &#125; return s;&#125; ä¸Šé¢ä»£ç ä¸­ï¼Œsenderå˜é‡å¾€å¾€æ˜¯ç”¨æˆ·æä¾›çš„ï¼Œç»è¿‡SaferHTMLå‡½æ•°å¤„ç†ï¼Œé‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦éƒ½ä¼šè¢«è½¬ä¹‰ã€‚ 12345let sender = '&lt;script&gt;alert("abc")&lt;/script&gt;'; // æ¶æ„ä»£ç let message = SaferHTML`&lt;p&gt;$&#123;sender&#125; has sent you a message.&lt;/p&gt;`;message// &lt;p&gt;&amp;lt;script&amp;gt;alert("abc")&amp;lt;/script&amp;gt; has sent you a message.&lt;/p&gt; æ ‡ç­¾æ¨¡æ¿çš„å¦ä¸€ä¸ªåº”ç”¨ï¼Œå°±æ˜¯å¤šè¯­è¨€è½¬æ¢ï¼ˆå›½é™…åŒ–å¤„ç†ï¼‰ã€‚ 12i18n`Welcome to $&#123;siteName&#125;, you are visitor number $&#123;visitorNumber&#125;!`// "æ¬¢è¿è®¿é—®xxxï¼Œæ‚¨æ˜¯ç¬¬xxxxä½è®¿é—®è€…ï¼" æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«å¹¶ä¸èƒ½å–ä»£ Mustache ä¹‹ç±»çš„æ¨¡æ¿åº“ï¼Œå› ä¸ºæ²¡æœ‰æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯å¤„ç†åŠŸèƒ½ï¼Œä½†æ˜¯é€šè¿‡æ ‡ç­¾å‡½æ•°ï¼Œä½ å¯ä»¥è‡ªå·±æ·»åŠ è¿™äº›åŠŸèƒ½ã€‚ 123456789// ä¸‹é¢çš„hashTemplateå‡½æ•°// æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ¨¡æ¿å¤„ç†å‡½æ•°let libraryHtml = hashTemplate` &lt;ul&gt; #for book in $&#123;myBooks&#125; &lt;li&gt;&lt;i&gt;#&#123;book.title&#125;&lt;/i&gt; by #&#123;book.author&#125;&lt;/li&gt; #end &lt;/ul&gt;`; é™¤æ­¤ä¹‹å¤–ï¼Œä½ ç”šè‡³å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¨¡æ¿ï¼Œåœ¨ JavaScript è¯­è¨€ä¹‹ä¸­åµŒå…¥å…¶ä»–è¯­è¨€ã€‚ 123456789jsx` &lt;div&gt; &lt;input ref='input' onChange='$&#123;this.handleChange&#125;' defaultValue='$&#123;this.state.value&#125;' /&gt; $&#123;this.state.value&#125; &lt;/div&gt;` ä¸Šé¢çš„ä»£ç é€šè¿‡jsxå‡½æ•°ï¼Œå°†ä¸€ä¸ª DOM å­—ç¬¦ä¸²è½¬ä¸º React å¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨ Github æ‰¾åˆ°jsxå‡½æ•°çš„å…·ä½“å®ç°ã€‚ ä¸‹é¢åˆ™æ˜¯ä¸€ä¸ªå‡æƒ³çš„ä¾‹å­ï¼Œé€šè¿‡javaå‡½æ•°ï¼Œåœ¨ JavaScript ä»£ç ä¹‹ä¸­è¿è¡Œ Java ä»£ç ã€‚ 12345678java`class HelloWorldApp &#123; public static void main(String[] args) &#123; System.out.println(â€œHello World!â€); // Display the string. &#125;&#125;`HelloWorldApp.main(); æ¨¡æ¿å¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæ¨¡æ¿å­—ç¬¦ä¸²æ•°ç»„ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªrawå±æ€§ã€‚ 12console.log`123`// ["123", raw: Array[1]] ä¸Šé¢ä»£ç ä¸­ï¼Œconsole.logæ¥å—çš„å‚æ•°ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ•°ç»„æœ‰ä¸€ä¸ªrawå±æ€§ï¼Œä¿å­˜çš„æ˜¯è½¬ä¹‰åçš„åŸå­—ç¬¦ä¸²ã€‚ è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚ 1234567tag`First line\nSecond line`function tag(strings) &#123; console.log(strings.raw[0]); // strings.raw[0] ä¸º "First line\\nSecond line" // æ‰“å°è¾“å‡º "First line\nSecond line"&#125; ä¸Šé¢ä»£ç ä¸­ï¼Œtagå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°stringsï¼Œæœ‰ä¸€ä¸ªrawå±æ€§ï¼Œä¹ŸæŒ‡å‘ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ•°ç»„çš„æˆå‘˜ä¸stringsæ•°ç»„å®Œå…¨ä¸€è‡´ã€‚æ¯”å¦‚ï¼Œstringsæ•°ç»„æ˜¯[&quot;First line\nSecond line&quot;]ï¼Œé‚£ä¹ˆstrings.rawæ•°ç»„å°±æ˜¯[&quot;First line\\nSecond line&quot;]ã€‚ä¸¤è€…å”¯ä¸€çš„åŒºåˆ«ï¼Œå°±æ˜¯å­—ç¬¦ä¸²é‡Œé¢çš„æ–œæ éƒ½è¢«è½¬ä¹‰äº†ã€‚æ¯”å¦‚ï¼Œstrings.raw æ•°ç»„ä¼šå°†\nè§†ä¸º\\å’Œnä¸¤ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯æ¢è¡Œç¬¦ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿å–å¾—è½¬ä¹‰ä¹‹å‰çš„åŸå§‹æ¨¡æ¿è€Œè®¾è®¡çš„ã€‚ String.raw()ES6 è¿˜ä¸ºåŸç”Ÿçš„ String å¯¹è±¡ï¼Œæä¾›äº†ä¸€ä¸ªrawæ–¹æ³•ã€‚ String.rawæ–¹æ³•ï¼Œå¾€å¾€ç”¨æ¥å……å½“æ¨¡æ¿å­—ç¬¦ä¸²çš„å¤„ç†å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–œæ éƒ½è¢«è½¬ä¹‰ï¼ˆå³æ–œæ å‰é¢å†åŠ ä¸€ä¸ªæ–œæ ï¼‰çš„å­—ç¬¦ä¸²ï¼Œå¯¹åº”äºæ›¿æ¢å˜é‡åçš„æ¨¡æ¿å­—ç¬¦ä¸²ã€‚ 12345String.raw`Hi\n$&#123;2+3&#125;!`;// è¿”å› "Hi\\n5!"String.raw`Hi\u000A!`;// è¿”å› "Hi\\u000A!" å¦‚æœåŸå­—ç¬¦ä¸²çš„æ–œæ å·²ç»è½¬ä¹‰ï¼Œé‚£ä¹ˆString.rawä¼šè¿›è¡Œå†æ¬¡è½¬ä¹‰ã€‚ 12String.raw`Hi\\n`// è¿”å› "Hi\\\\n" String.rawæ–¹æ³•å¯ä»¥ä½œä¸ºå¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²çš„åŸºæœ¬æ–¹æ³•ï¼Œå®ƒä¼šå°†æ‰€æœ‰å˜é‡æ›¿æ¢ï¼Œè€Œä¸”å¯¹æ–œæ è¿›è¡Œè½¬ä¹‰ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ­¥ä½œä¸ºå­—ç¬¦ä¸²æ¥ä½¿ç”¨ã€‚ String.rawæ–¹æ³•ä¹Ÿå¯ä»¥ä½œä¸ºæ­£å¸¸çš„å‡½æ•°ä½¿ç”¨ã€‚è¿™æ—¶ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå…·æœ‰rawå±æ€§çš„å¯¹è±¡ï¼Œä¸”rawå±æ€§çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ 12345String.raw(&#123; raw: 'test' &#125;, 0, 1, 2);// 't0e1s2t'// ç­‰åŒäºString.raw(&#123; raw: ['t','e','s','t'] &#125;, 0, 1, 2); ä½œä¸ºå‡½æ•°ï¼ŒString.rawçš„ä»£ç å®ç°åŸºæœ¬å¦‚ä¸‹ã€‚ 12345678910String.raw = function (strings, ...values) &#123; let output = ''; let index; for (index = 0; index &lt; values.length; index++) &#123; output += strings.raw[index] + values[index]; &#125; output += strings.raw[index] return output;&#125; æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶å‰é¢æåˆ°æ ‡ç­¾æ¨¡æ¿é‡Œé¢ï¼Œå¯ä»¥å†…åµŒå…¶ä»–è¯­è¨€ã€‚ä½†æ˜¯ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²é»˜è®¤ä¼šå°†å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå¯¼è‡´æ— æ³•åµŒå…¥å…¶ä»–è¯­è¨€ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œæ ‡ç­¾æ¨¡æ¿é‡Œé¢å¯ä»¥åµŒå…¥ LaTEX è¯­è¨€ã€‚ 1234567891011function latex(strings) &#123; // ...&#125;let document = latex`\newcommand&#123;\fun&#125;&#123;\textbf&#123;Fun!&#125;&#125; // æ­£å¸¸å·¥ä½œ\newcommand&#123;\unicode&#125;&#123;\textbf&#123;Unicode!&#125;&#125; // æŠ¥é”™\newcommand&#123;\xerxes&#125;&#123;\textbf&#123;King!&#125;&#125; // æŠ¥é”™Breve over the h goes \u&#123;h&#125;ere // æŠ¥é”™` ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡documentå†…åµŒçš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå¯¹äº LaTEX è¯­è¨€æ¥è¯´å®Œå…¨æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯ JavaScript å¼•æ“ä¼šæŠ¥é”™ã€‚åŸå› å°±åœ¨äºå­—ç¬¦ä¸²çš„è½¬ä¹‰ã€‚ æ¨¡æ¿å­—ç¬¦ä¸²ä¼šå°†\u00FFå’Œ\u{42}å½“ä½œ Unicode å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œæ‰€ä»¥\unicodeè§£ææ—¶æŠ¥é”™ï¼›è€Œ\x56ä¼šè¢«å½“ä½œåå…­è¿›åˆ¶å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œæ‰€ä»¥\xerxesä¼šæŠ¥é”™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ\uå’Œ\xåœ¨ LaTEX é‡Œé¢æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä½†æ˜¯ JavaScript å°†å®ƒä»¬è½¬ä¹‰äº†ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒES2018 æ”¾æ¾äº†å¯¹æ ‡ç­¾æ¨¡æ¿é‡Œé¢çš„å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ã€‚å¦‚æœé‡åˆ°ä¸åˆæ³•çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå°±è¿”å›undefinedï¼Œè€Œä¸æ˜¯æŠ¥é”™ï¼Œå¹¶ä¸”ä»rawå±æ€§ä¸Šé¢å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ã€‚ 12345function tag(strs) &#123; strs[0] === undefined strs.raw[0] === "\\unicode and \\u&#123;55&#125;";&#125;tag`\unicode and \u&#123;55&#125;` ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²åŸæœ¬æ˜¯åº”è¯¥æŠ¥é”™çš„ï¼Œä½†æ˜¯ç”±äºæ”¾æ¾äº†å¯¹å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ï¼Œæ‰€ä»¥ä¸æŠ¥é”™äº†ï¼ŒJavaScript å¼•æ“å°†ç¬¬ä¸€ä¸ªå­—ç¬¦è®¾ç½®ä¸ºundefinedï¼Œä½†æ˜¯rawå±æ€§ä¾ç„¶å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ï¼Œå› æ­¤tagå‡½æ•°è¿˜æ˜¯å¯ä»¥å¯¹åŸå­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ã€‚ æ³¨æ„ï¼Œè¿™ç§å¯¹å­—ç¬¦ä¸²è½¬ä¹‰çš„æ”¾æ¾ï¼Œåªåœ¨æ ‡ç­¾æ¨¡æ¿è§£æå­—ç¬¦ä¸²æ—¶ç”Ÿæ•ˆï¼Œä¸æ˜¯æ ‡ç­¾æ¨¡æ¿çš„åœºåˆï¼Œä¾ç„¶ä¼šæŠ¥é”™ã€‚ 1let bad = `bad escape sequence: \unicode`; // æŠ¥é”™]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>å®å½•</tag>
        <tag>å­—ç¬¦ä¸²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å˜é‡çš„è§£æ„èµ‹å€¼]]></title>
    <url>%2Fit233.github.io%2F2018%2F12%2F05%2F%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC%2F</url>
    <content type="text"><![CDATA[æ•°ç»„çš„è§£æ„èµ‹å€¼åŸºæœ¬ç”¨æ³•ES6 å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°æ®å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ï¼ˆDestructuringï¼‰ ä¹‹å‰ï¼Œä¸ºå˜é‡èµ‹å€¼ï¼Œåªèƒ½ä¸ºå˜é‡ä¸€ä¸ªä¸ªåœ°ç›´æ¥æŒ‡å®šå€¼ï¼Œå¦‚ï¼š 123let a = 1;let b = 2;let c = 3; ES6 ä¹‹åå…è®¸å†™æˆï¼š 1let [a, b, c] = [1, 2, 3]; ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œä»æ•°ç»„[1,2,3]ä¸­å–å€¼ï¼ŒæŒ‰ç…§å¯¹åº”ä½ç½®,åˆ†åˆ«ç»™å˜é‡aï¼Œbï¼Œcè¿›è¡Œèµ‹å€¼ æœ¬è´¨ä¸Šï¼Œè¿™ç§å†™æ³•å±äºâ€œåŒ¹é…æ¨¡å¼â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚ åµŒå¥—èµ‹å€¼å¦‚ä¸‹ä»£ç  1234let [a,[b,c]] = [1,[2,3]]a//1b//2c//3 è¿™é‡Œä»£ç ç»“æ„äº’ç›¸åµŒå¥—ï¼Œæ•°ç»„é‡Œé¢åµŒå¥—æ•°ç»„ï¼Œä¸è¿‡åªè¦èƒ½å¤Ÿåœ¨å³è¾¹ç»“æ„ä¸­æ‰¾åˆ°ç›¸å¯¹åº”çš„ä½ç½®ï¼Œä¾ç„¶èƒ½å¤Ÿèµ‹å€¼æˆåŠŸ ä¸å®Œå…¨è§£æ„12345678910let [,,d] = [1,2,3,4]d//3let [e] = [1,2,3,4]e//1let [a] = [[1,2]]a//[1,2] å¦‚ä¸Šä»£ç æ‰€å±•ç¤ºï¼Œç­‰å·ä¸¤è¾¹ç»“æ„æ¨¡å¼ç›¸åŒï¼ˆéƒ½ä¸ºæ•°ç»„ï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šæ ¹æ®å·¦è¾¹çš„ç»“æ„ï¼Œåœ¨å³è¾¹çš„ç»“æ„ä¸­å¯»æ‰¾å¯¹åº”ä½ç½®çš„å€¼è¿›è¡Œèµ‹å€¼ ä½†æ˜¯ï¼Œå¦‚æœåˆ†æå³è¾¹ç»“æ„ä¹‹åï¼Œæ‰¾ä¸åˆ°ä¸ä¹‹å¯¹åº”çš„å€¼ï¼Œé‚£ä¹ˆè¯¥ä½ç½®çš„å˜é‡åˆ™ä¸ºundefined: 123let [a,b] = [[1,2]]a//[1]b//undefined ä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½å±äºä¸å®Œå…¨è§£æ„ï¼ŒæŒ‡çš„æ˜¯è™½ç„¶ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼éƒ½ä¸€æ ·ï¼Œä½†æ˜¯æ•°æ®ç»“æ„å´æœ‰ä¸åŒï¼Œå¯¼è‡´ç­‰å·ä¸¤è¾¹çš„ç»“æ„å¹¶ä¸èƒ½å®Œå…¨å¯¹åº”èµ·æ¥ï¼Œä½†æ˜¯è¿™æ ·å¹¶ä¸å½±å“è§£æ„èµ‹å€¼çš„ä½¿ç”¨ã€‚ è¿™æ ·ä¸€æ¥çš„ç»“æœï¼Œå°±æ˜¯å¦‚æœèƒ½å¤Ÿåœ¨ç­‰å·å³è¾¹å¯¹åº”ä½ç½®æ‰¾åˆ°å¯¹åº”çš„å€¼ï¼Œé‚£ä¹ˆå·¦è¾¹çš„å˜é‡å°±ä¼šèµ‹äºˆè¯¥å€¼ï¼Œå¦åˆ™ä¸ºundefined restå‚æ•°åœ¨ç»“æ„èµ‹å€¼çš„æ—¶å€™ï¼Œè¿˜æ”¯æŒrestå‚æ•°ï¼Œè¿™æ ·çš„å‚æ•°èƒ½å¤Ÿåœ¨ä¸å®Œå…¨ç»“æ„çš„æƒ…å†µä¸‹ï¼Œå°†æ‰€æœ‰å€¼ä¿å­˜èµ·æ¥ã€‚ éœ€è¦è¯´æ˜æ³¨æ„çš„æ˜¯ï¼š restå‚æ•°å¿…é¡»æ”¾åœ¨æ‰€æœ‰å‚æ•°çš„æœ€åé¢ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªç”¨æ¥æ‰«å°¾çš„å‚æ•°ï¼Œç®€å•æ¥è¯´å°±æ˜¯å½“å·¦è¾¹å‚æ•°ä¸å¤Ÿæ¥æ”¶å³è¾¹å…ƒç´ çš„æ—¶å€™ï¼Œå³è¾¹è¿˜æœ‰å‰©ä½™çš„å…ƒç´ ï¼Œé‚£ä¹ˆè§£æ„å°†ä¼šç›´æ¥å°†å‰©ä½™çš„å…ƒç´ åŸå°ä¸åŠ¨å…¨éƒ¨ä¸¢ç»™restå‚æ•° æ ¹æ®ç¬¬ä¸€æ¡ï¼Œrestå‚æ•°å¿…é¡»æ˜¯æœ€åä¸€ä¸ªï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯è¯´ï¼Œrestå‚æ•°ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ª restå‚æ•°å†™æ³•å¦‚ä¸‹ï¼š 123let [a,...b] = [1,2,3]a//1b//[2,3] ä¸Šé¢ä»£ç ï¼Œç­‰å·å·¦è¾¹é‡‡ç”¨äº†restå‚æ•°â€¦bï¼Œè¡¨ç¤ºåŒ¹é…å®Œä¹‹å‰çš„å‚æ•°ä¹‹åï¼Œç­‰å·å³è¾¹å‰©ä½™çš„æ‰€æœ‰å…ƒç´ ç›´æ¥ç»™bï¼ˆä¸è®ºç»“æ„ï¼‰ 123456789let [,a,...b] = [1,2,[3,4]]a//2b//[3,4]let [a,...b] = [1,2,3,&#123;name:"å°æ˜"&#125;]a//1b//[2,3,Object],è¿™ä¸ªObjectå°±æ˜¯&#123;name:"1"&#125;//å¦‚ä¸‹æ‰“å°nameå€¼æ˜¯"å°æ˜"console.log(b[2].name) ä»¥ä¸Šæƒ…å†µæ˜¯åœ¨å³è¾¹æœ‰å¤šä½™å…ƒç´ çš„æƒ…å†µï¼Œé‚£ä¹ˆå‡å¦‚å³è¾¹å…ƒç´ å°‘äºå·¦è¾¹å‚æ•°ï¼š 123let [,a,...b] = [1,2]a//2b//[] å›æƒ³ä¸€ä¸‹ä¹‹å‰è¯´çš„è§£æ„èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…çš„å…ƒç´ ï¼Œå…¶å€¼å°±æ˜¯undefinedï¼Œä½†æ˜¯è¿™é‡Œçš„båœ¨æ²¡æœ‰åŒ¹é…åˆ°å…ƒç´ èµ‹å€¼çš„æ—¶å€™ï¼Œç¡®å®ä¸€ä¸ªç©ºæ•°ç»„[] ç®€å•è§£é‡Šä¸€ä¸‹ï¼š æ—¢ç„¶æˆ‘ä»¬çš„bæ˜¯restå‚æ•°ï¼Œä¹Ÿå°±æ˜¯æ¥æ”¶è§£æ„èµ‹å€¼çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘åˆ°ï¼Œæˆ‘ä»¬å‰©ä½™çš„å…ƒç´ è¿˜æœ‰å¯èƒ½æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥å—å¤šä¸ªæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè‡ªç„¶æ˜¯ç”¨æ•°ç»„æ¥æ¥æ”¶ã€‚ æ‰€ä»¥è¿™ä¸ªrestå‚æ•°å°±æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå½“è§£æ„å®Œä¹‹åï¼Œå³è¾¹å…ƒç´ è¿˜æœ‰å‰©ä½™ï¼Œå°±å°†å…ƒç´ æŒ‰é¡ºåºä¸€ä¸ªä¸€ä¸ªåœ°åŸå°å¡åˆ°restå‚æ•°ä¸­ï¼Œè€Œå¦‚æœæ²¡æœ‰å‰©ä½™å…ƒç´ äº†ï¼Œé‚£ä¹ˆå°±ä¸ç”¨å¡äº†ï¼Œrestå‚æ•°å°±ä¿æŒä¸€ä¸ªç©ºæ•°ç»„äº† è§£æ„åŸç†å¦‚æœç­‰å·å³è¾¹çš„è§£æ„ä¸æ˜¯ä¸€ä¸ªå¯ä»¥éå†çš„è§£æ„(è¯¦æƒ…å‚è€ƒIterator)ï¼Œé‚£ä¹ˆè§£æ„æ“ä½œä¼šæŠ¥é”™ 12345678let [a] = 1;let [b] = false;let [c] = NaN;let [d] = undefined;let [e] = null;let [f] = &#123;&#125;;//ä»¥ä¸Šè¿™äº›å‡ä¼šæŠ¥é”™ï¼š is not iterable ä»¥ä¸Šçš„ä»£ç è¯­å¥ï¼Œç­‰å·å³è¾¹çš„å€¼ï¼Œè¦ä¹ˆæ˜¯è½¬ä¸ºå¯¹è±¡ä»¥åä¸å…·å¤‡Iteratoræ¥å£ï¼ˆå‰5ä¸ªè¡¨å•æ—¶ï¼‰ï¼Œè¦ä¹ˆæœ¬èº«å°±ä¸å…·å¤‡Iteratoræ¥å£ï¼ˆç¬¬å…­ä¸ªè¡¨è¾¾å¼ï¼‰ ä¹Ÿå°±æ˜¯è¯´å³è¾¹çš„æ•°æ®è¦èƒ½å¤Ÿè¿›è¡Œå¾ªç¯ è¯´é“è¿™é‡Œï¼Œå°±è¦è¯´ä¸€ä¸‹å­—ç¬¦ä¸²ç±»å‹äº†ï¼Œå…ˆçœ‹ä¸‹é¢ä»£ç ï¼š 123456let [a,b,c,d,...e] = "è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"a//è¿™b//æ˜¯c//ä¸€d//ä¸ªe//['å­—','ç¬¦','ä¸²'] å…¶å®è¯´ç™½äº†ï¼Œå­—ç¬¦ä¸²ä¹Ÿå°±æ˜¯ä¸€ä¸²å­—ç¬¦ï¼Œå³å¤šä¸ªå­—ç¬¦çš„æ•°ç»„(é›†åˆ)ï¼ŒæŒ‰ç…§ä¸€å®šé¡ºåºç»„æˆçš„ä¸€ä¸²æ–‡å­—ã€‚å› æ­¤ï¼Œåœ¨å­—ç¬¦ä¸²è§£æ„èµ‹å€¼çš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²è¢«è½¬æ¢æˆäº†ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ åŒæ—¶ï¼Œå¯¹äºsetç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„çš„ç»“æ„èµ‹å€¼ 12let [x, y, z] = new Set(['a', 'b', 'c']);x // "a" äº‹å®ä¸Šï¼Œåªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰Iteratoræ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ 12345678910function* hhh() &#123; let a = 0; let b = 1; while (true) &#123; yield a; [a, b] = [b, a + b]; &#125;&#125;let [a,b,c,d,e,f] = hhh();console.log(a,b,c,d,e,f)//0 1 1 2 3 5 ä»¥ä¸Šä»£ç ï¼Œhhh()æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼ŒåŸç”Ÿå…·æœ‰Iteratoræ¥å£ï¼Œè§£æ„èµ‹å€¼ä¼šä¾æ¬¡ä»è¿™ä¸ªæ¥å£è·å–å€¼ é»˜è®¤å€¼è§£æ„èµ‹å€¼èƒ½å¤Ÿåˆ¶å®šé»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯å½“æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„å…ƒç´ ç»™å…¶èµ‹å€¼çš„æ—¶å€™ï¼Œä¼šé‡‡å–åˆ¶å®šçš„å€¼ä¸ºå…¶èµ‹å€¼ å¦‚ï¼š 123456789let [a = '1'] = []a//1let [b,c='3'] = [5]b//5c//let [d = '1'] = ['aaa']d//aaa éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒES6 å†…éƒ¨ä½¿ç”¨é›…é˜æƒ³ç­‰è¿ç®—ç¬¦ (===)æ¥åˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ã€‚æ‰€ä»¥åªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äºundefinedï¼Œé»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆ 12345let [x = 1] = [undefined];x // 1let [x = 1] = [null];x // null å¦‚ä¸Šé¢ä»£ç ï¼Œä¸€ä¸ªå€¼ä¸ºnullï¼Œé»˜è®¤å€¼å´æ²¡æœ‰ç”Ÿæ•ˆï¼Œæ˜¯å› ä¸ºnull === undefinedä¸ºfalse å¦å¤–ï¼Œå¦‚æœä¸€ä¸ªé»˜è®¤å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆå‡½æ•°ä¹Ÿå±äºä¸€ä¸ªè¡¨è¾¾å¼ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œä¹Ÿå°±æ˜¯åªæœ‰åœ¨ä½¿ç”¨åˆ°è¿™ä¸ªè¡¨è¾¾å¼çš„æ—¶å€™ï¼Œæ‰ä¼šå»è¿è¡Œæ±‚å€¼ 12345function f() &#123; console.log('aaa');&#125;let [x = f()] = [1]; ä¸Šé¢ä»£ç ä¸ä¼šæ‰§è¡Œf()å‡½æ•°ï¼Œå› ä¸ºxèƒ½å¤Ÿåœ¨å³è¾¹å–åˆ°å€¼ï¼Œä¸ä¼šè§¦å‘é»˜è®¤å€¼ é»˜è®¤å€¼ä¹Ÿå¯ä»¥å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œä½†æ˜¯è¯¥å˜é‡å¿…é¡»æ˜¯åœ¨å¼•ç”¨ä¹‹å‰å·²ç»å£°æ˜çš„ 1234let [x = 1, y = x] = []; // x=1; y=1let [x = 1, y = x] = [2]; // x=2; y=2let [x = 1, y = x] = [1, 2]; // x=1; y=2let [x = y, y = 1] = []; // ReferenceError: y is not defined è¿™ä¸ªåœ¨ä¹‹å‰çš„let &amp; constè¯´è¿‡ï¼Œå°±ä¸èµ˜è¿°äº† å¯¹è±¡çš„è§£æ„èµ‹å€¼è§£æ„èµ‹å€¼ä¸ä»…å¯ä»¥ç”¨äºæ•°ç»„ï¼Œè¿˜å¯ä»¥ç”¨äºå¯¹è±¡ åŸºæœ¬ç”¨æ³•1let &#123;a&#125; = &#123;a:"è¿™æ˜¯a"&#125; å¯¹è±¡çš„è§£æ„èµ‹å€¼å…¶æ•°ç»„çš„è§£æ„èµ‹å€¼æ¨¡å¼ä¸€æ ·ï¼Œä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œæ˜¯åŒ¹é…ç­‰å·å³è¾¹å¯¹è±¡ä¸­çš„å±æ€§åæ¥èµ‹å€¼ å¦‚ä¸Šé¢ä»£ç ï¼Œlet{a} ï¼Œä¼šåœ¨å³è¾¹çš„å¯¹è±¡ä¸­{}æ‰¾aè¿™ä¸ªåå­—çš„å±æ€§ï¼Œç„¶åå–å€¼èµ‹å€¼ç»™å·¦è¾¹çš„aï¼Œå¦‚æœå³è¾¹å¯¹è±¡ä¸­æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå°±ä¸ºundefined, å¦‚ä¸‹ä»£ç  1let &#123;a&#125; = &#123;b:"è¿™æ˜¯b,ä¸æ˜¯a"&#125; åŒæ—¶ï¼Œå› ä¸ºæ˜¯æŒ‰ç…§å¯¹è±¡çš„å±æ€§åè¿›è¡ŒåŒ¹é…ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯æƒ³æ•°ç»„ä¸€æ ·è¦æŒ‰ç…§ä¸¥æ ¼çš„é¡ºåº 1let &#123;a,b&#125; = &#123;b:"è¿™æ˜¯b,ä¸æ˜¯a",a:"è¿™æ‰æ˜¯a"&#125; è€Œå¦‚æœæˆ‘ä»¬å˜é‡åä¸å±æ€§åä¸ä¸€è‡´ï¼Œä½†æ˜¯è¿˜æƒ³è¦å–åˆ°æŸä¸ªå±æ€§çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š 1let &#123;a:b&#125; = &#123;c:"è¿™æ˜¯c",a:"è¿™æ‰æ˜¯a"&#125; åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œbæ‰æ˜¯å˜é‡ï¼Œå·¦è¾¹çš„aåªæ˜¯ä¸ºäº†å¯¹åº”å³è¾¹å±æ€§aï¼Œæ˜¯è¯´bè¦å–å±æ€§açš„å€¼ï¼Œè¿™æ ·å˜é‡bå°±ä¼šèµ‹äºˆå±æ€§açš„å€¼ï¼šâ€è¿™æ‰æ˜¯aâ€ è¿™æ ·æ¥è¯´ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼å¯ä»¥çœ‹æˆä»¥ä¸‹ä»£ç çš„ç®€å†™ï¼š 123let&#123;a:a,b:b&#125; = &#123;a:"è¿™æ˜¯a",b:"è¿™æ˜¯b"&#125;//ç®€å†™ä¸ºï¼šlet&#123;a,b&#125; = &#123;a:"è¿™æ˜¯a",b:"è¿™æ˜¯b"&#125; åµŒå¥—èµ‹å€¼ä¸æ•°ç»„ä¸€æ ·ï¼Œå¯¹è±¡è§£æ„ä¹Ÿèƒ½ç”¨äºåµŒå¥—ç»“æ„ 12345678910let obj = &#123; p: [ 'Hello', &#123; y: 'World' &#125; ]&#125;;let &#123; p: [x, &#123; y &#125;] &#125; = obj;x // "Hello"y // "World" ä¸è¿‡è¦æ³¨æ„å¹¶ä¸”è¦æ˜ç™½çš„æ˜¯ï¼šè¿™é‡Œçš„pæ˜¯æ¨¡å¼ï¼Œä¸æ˜¯å˜é‡ï¼Œå› æ­¤ä¸ä¼šè¢«èµ‹å€¼ï¼Œ å¦‚æœpä¹Ÿè¦ä½œä¸ºå˜é‡èµ‹å€¼ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š 1234567891011let obj = &#123; p: [ 'Hello', &#123; y: 'World' &#125; ]&#125;;let &#123; p, p: [x, &#123; y &#125;] &#125; = obj;x // "Hello"y // "World"p // ["Hello", &#123;y: "World"&#125;] æ›´å¤æ‚ä¸€ç‚¹çš„åµŒå¥—å¦‚ä¸‹ï¼š 12345678910111213const node = &#123; loc: &#123; start: &#123; line: 1, column: 5 &#125; &#125;&#125;;let &#123; loc, loc: &#123; start &#125;, loc: &#123; start: &#123; line &#125;&#125; &#125; = node;line // 1loc // Object &#123;start: Object&#125;start // Object &#123;line: 1, column: 5&#125; ä¸Šé¢ä»£ç æœ‰ä¸‰æ¬¡è§£æ„èµ‹å€¼ï¼Œåˆ†åˆ«æ˜¯å¯¹locã€startã€lineä¸‰ä¸ªå±æ€§çš„è§£æ„èµ‹å€¼ã€‚æ³¨æ„ï¼Œæœ€åä¸€æ¬¡å¯¹lineå±æ€§çš„è§£æ„èµ‹å€¼ä¹‹ä¸­ï¼Œåªæœ‰lineæ˜¯å˜é‡ï¼Œlocå’Œstartéƒ½æ˜¯æ¨¡å¼ï¼Œä¸æ˜¯å˜é‡ è¿™ç§åµŒå¥—èµ‹å€¼å‡ ä¹å¾ˆå°‘ç”¨ï¼Œä¸€èˆ¬åŸºæœ¬çš„èµ‹å€¼å°±èƒ½æ»¡è¶³å¤§éƒ¨åˆ†åº”ç”¨éœ€æ±‚ é»˜è®¤å€¼å¯¹è±¡çš„è§£æ„èµ‹å€¼ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤å€¼ 123456789101112131415var &#123;x = 3&#125; = &#123;&#125;;x // 3var &#123;x, y = 5&#125; = &#123;x: 1&#125;;x // 1y // 5var &#123;x: y = 3&#125; = &#123;&#125;;y // 3var &#123;x: y = 3&#125; = &#123;x: 5&#125;;y // 5var &#123; message: msg = 'Something went wrong' &#125; = &#123;&#125;;msg // "Something went wrong" ä¸æ•°ç»„é»˜è®¤å€¼ä¸€æ ·çš„æ˜¯ï¼Œæƒ³è¦é»˜è®¤å€¼ç”Ÿæ•ˆçš„æ¡ä»¶ä¹Ÿæ˜¯å¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äºundefinedï¼Œå±æ€§å€¼ä¸ºnullçš„æ—¶å€™å¹¶ä¸ä¼šå¯¼è‡´é»˜è®¤å€¼ç”Ÿæ•ˆ åŒæ—¶ï¼Œå¦‚æœè§£æ„å¤±è´¥ï¼Œå˜é‡çš„å€¼ä¹Ÿä¼šç­‰äºundefinedï¼Œä¹Ÿèƒ½è‡´ä½¿é»˜è®¤å€¼ç”Ÿæ•ˆ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ•°ç»„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„ï¼š 1234let arr = [1, 2, 3];let &#123;0 : first, [arr.length - 1] : last&#125; = arr;first // 1last // 3 ä¸Šé¢ä»£ç å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡è§£æ„ã€‚æ•°ç»„arrçš„0é”®å¯¹åº”çš„å€¼æ˜¯1ï¼Œ[arr.length - 1]å°±æ˜¯2é”®ï¼Œå¯¹åº”çš„å€¼æ˜¯3 æ³¨æ„ å¦‚æœè§£æ„æ¨¡å¼æ˜¯ç­¾åˆ°çš„å¯¹è±¡ï¼Œè€Œä¸”å­å¯¹è±¡æ‰€åœ¨çš„çˆ¶å±æ€§ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ 12// æŠ¥é”™let &#123;foo: &#123;bar&#125;&#125; = &#123;baz: 'baz'&#125;; è¿™é‡Œç®€ç­”è¯´æ˜ä¸€ä¸‹ï¼š æŒ‰ç…§è§£æ„æµç¨‹ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®è§£æ„æ¨¡å¼å»å¯¹è±¡ä¸­åŒ¹é…fooå±æ€§ï¼ˆæ­¤å±æ€§æ ¹æ®è§£æ„æ¨¡å¼æ¥çœ‹ä¹Ÿæ˜¯ä¸€ä¸ªæ¨¡å¼ï¼ˆå³å¯¹è±¡ï¼‰ï¼‰ï¼Œè€Œæ­¤æ—¶å¯¹è±¡ä¸­æ²¡æœ‰fooå±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯undefinedï¼Œè€Œæˆ‘ä»¬å†çœ‹è§£æ„æ¨¡å¼ä¸­ï¼Œè¦å–çš„æ˜¯è¯¥æ¨¡å¼ï¼ˆfooï¼‰çš„å±æ€§barï¼Œæ‰€ä»¥å°±åº”è¯¥æ˜¯foo.barï¼Œä½†æ˜¯æ­¤æ—¶fooå¯¹è±¡ä¸ºundefinedï¼Œæ•…æŠ¥é”™ è¿˜è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœæƒ³è¦å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„letå˜é‡ç”¨äºå¯¹è±¡è§£æ„èµ‹å€¼ï¼Œå¿…é¡»è¦éå¸¸å°å¿ƒï¼Œå…ˆçœ‹å¦‚ä¸‹ä»£ç ï¼š 1234// é”™è¯¯çš„å†™æ³•let x;&#123;x&#125; = &#123;x: 1&#125;;// SyntaxError: syntax error è¿™ä¸ªå†™æ³•é”™è¯¯çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬ç”¨letå£°æ˜äº†ä¸€ä¸ªå˜é‡xï¼Œç„¶ååœ¨{x}ä¸­ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œä½†æ˜¯å®é™…ä¸ŠJavaScriptå¼•æ“ä¼šå°†{x}ç†è§£æˆä¸€ä¸ªä»£ç å—ï¼Œè¿™æ ·å°±ä¼šå‘ç”Ÿè¯­æ³•ä¸Šçš„é”™è¯¯ã€‚ å¦‚ä½•è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å°†å¤§æ‹¬å·å†™åœ¨é¦–è¡Œï¼Œè¿™æ ·å¯ä»¥é¿å…å°†å…¶è§£é‡Šä¸ºä»£ç å— 12let x;(&#123;x&#125; = &#123;x: 1&#125;); å¯¹äºè¿™ä¸€ç‚¹ï¼Œæ¥ä¸‹æ¥è¿›è¡Œè§£é‡Šï¼š åœ†æ‹¬å·çš„é—®é¢˜è§£æ„èµ‹å€¼è™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è§£æèµ·æ¥å¹¶ä¸å®¹æ—¥ï¼Œå¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œä¸€ä¸ªå¼å­åˆ°åº•æ˜¯æ¨¡å¼ï¼Œè¿˜æ˜¯è¡¨è¾¾å¼ï¼Œä»ä¸€å¼€å§‹æ˜¯ä¸çŸ¥é“çš„ï¼Œåªæœ‰ç­‰åˆ°è§£æçš„æ—¶å€™ï¼ˆè§£æåˆ°æˆ–è€…è§£æä¸åˆ°ç­‰å·ï¼‰æ‰èƒ½çŸ¥é“ ç”±æ­¤å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæ¨¡å¼ä¸­å‡ºç°åœ†æ‹¬å·æ€ä¹ˆå¤„ç† ES6 çš„è§„åˆ™æ˜¯ï¼Œåªè¦æœ‰å¯èƒ½å¯¼è‡´è§£æ„çš„æ­§ä¹‰ï¼Œå°±ä¸å¾—ä½¿ç”¨åœ†æ‹¬å· ä½†æ˜¯è¿™æ¡è§„åˆ™å®é™…ä¸Šä¸é‚£ä¹ˆå®¹æ˜“è¾¨åˆ«ï¼Œå¤„ç†èµ·æ¥ä¹Ÿç›¸å½“éº»çƒ¦ã€‚å› æ­¤ï¼Œå¦‚æœå¯èƒ½ï¼Œå°½é‡ä¸è¦åœ¨æ¨¡å¼ä¸­æ”¾ç½®åœ†æ‹¬å· ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·ä»¥ä¸‹è§£æ„èµ‹å€¼ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å· #### å˜é‡èµ‹å€¼è¯­å¥ 12345678let [(a)] = [1];let &#123;x: (c)&#125; = &#123;&#125;;let (&#123;x: c&#125;) = &#123;&#125;;let &#123;(x: c)&#125; = &#123;&#125;;let &#123;(x): c&#125; = &#123;&#125;;let &#123; o: (&#123; p: p &#125;) &#125; = &#123; o: &#123; p: 2 &#125; &#125;; ä»¥ä¸Š6ä¸ªè¯­å¥éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºä»–ä»¬éƒ½æ˜¯å˜é‡å£°æ˜è¯­å¥ï¼Œæ¨¡å¼ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å· #### å‡½æ•°å‚æ•° è¦çŸ¥é“å‡½æ•°å‚æ•°ä¹Ÿæ˜¯å±äºå˜é‡å£°æ˜ï¼Œå› æ­¤ä¸èƒ½å¸¦æœ‰åœ†æ‹¬å· 1234// æŠ¥é”™function f([(z)]) &#123; return z; &#125;// æŠ¥é”™function f([z,(x)]) &#123; return x; &#125; èµ‹å€¼è¯­å¥çš„æ¨¡å¼123// å…¨éƒ¨æŠ¥é”™(&#123; p: a &#125;) = &#123; p: 42 &#125;;([a]) = [5]; ä¸Šé¢ä»£ç å°†æ•´ä¸ªæ¨¡å¼æ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå¯¼è‡´æŠ¥é”™ã€‚ 12// æŠ¥é”™[(&#123; p: a &#125;), &#123; x: c &#125;] = [&#123;&#125;, &#123;&#125;]; ä¸Šé¢ä»£ç å°†ä¸€éƒ¨åˆ†æ¨¡å¼æ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå¯¼è‡´æŠ¥é”™ã€‚ å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µåªæœ‰ä¸€ç§ï¼šèµ‹å€¼è¯­å¥çš„éæ¨¡å¼éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨åœ†æ‹¬å· 123[(b)] = [3]; // æ­£ç¡®(&#123; p: (d) &#125; = &#123;&#125;); // æ­£ç¡®[(parseInt.prop)] = [3]; // æ­£ç¡® ä¸Šé¢ä¸‰è¡Œè¯­å¥å¯ä»¥æ­£ç¡®æ‰§è¡Œï¼Œ å…¶ä¸€ã€å› ä¸ºé¦–å…ˆä»–ä»¬éƒ½æ˜¯èµ‹å€¼è¯­å¥ï¼Œè€Œä¸æ˜¯ç”Ÿå‘½è¯­å¥ å…¶äºŒã€ä»–ä»¬çš„åœ†æ‹¬å·éƒ¨åˆ†éƒ½ä¸å±äºæ¨¡å¼çš„ä¸€éƒ¨åˆ† ç¬¬ä¸€è¡Œè¯­å¥ä¸­ï¼Œæ¨¡å¼æ˜¯å–æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œè·Ÿåœ†æ‹¬å·æ— å…³ï¼›ç¬¬äºŒè¡Œè¯­å¥ä¸­ï¼Œæ¨¡å¼æ˜¯pï¼Œè€Œä¸æ˜¯dï¼›ç¬¬ä¸‰è¡Œè¯­å¥ä¸ç¬¬ä¸€è¡Œè¯­å¥çš„æ€§è´¨ä¸€è‡´ã€‚ æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼è§£æ„èµ‹å€¼æ—¶ï¼Œå¦‚æœç­‰å·å³è¾¹æ˜¯æ•°å€¼å’Œå¸ƒå°”å€¼ï¼Œåˆ™ä¼šå…ˆè½¬ä¸ºå¯¹è±¡ï¼Œç„¶ååœ¨è¿›è¡Œå¯¹è±¡è§£æ„èµ‹å€¼ 123let &#123;a,toString:b&#125; = 123a//undefinedb//bæ˜¯function toString()&#123;.....&#125;, è¿™é‡Œçš„bæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯Number.prototype.toStringæŒ‡å‘çš„å‡½æ•°toString(){} ç›¸åº”åœ°ï¼Œæ•°å­—å¯ä»¥è½¬ä¸ºNumberå¯¹è±¡ï¼Œé‚£ä¹ˆå¸ƒå°”å€¼ä¹Ÿæœ‰å¯¹è±¡Boolean 1let &#123;toString: s&#125; = true; è¿™é‡Œçš„sè·Ÿbä¸€æ ·ï¼Œä¸è¿‡sæ˜¯Boolean.prototype.toString è§£æ„èµ‹å€¼çš„è§„åˆ™æ˜¯ï¼Œåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ï¼Œç„¶ååœ¨è¿›è¡Œå¯¹è±¡è§£æ„èµ‹å€¼ ä¸è¿‡è¦æ³¨æ„çš„æ˜¯undefinedå’Œnulléƒ½æ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹ä»–ä»¬è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œéƒ½ä¼šæŠ¥é”™ 12let &#123; prop: x &#125; = undefined; // TypeErrorlet &#123; prop: y &#125; = null; // TypeError å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼å‡½æ•°çš„å‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ 12345function add([x, y])&#123; return x + y;&#125;add([1, 2]); // 3 ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°addçš„å‚æ•°è¡¨é¢ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†åœ¨ä¼ å…¥å‚æ•°çš„é‚£ä¸€åˆ»ï¼Œæ•°ç»„å‚æ•°å°±è¢«è§£æ„æˆå˜é‡xå’Œyã€‚å¯¹äºå‡½æ•°å†…éƒ¨çš„ä»£ç æ¥è¯´ï¼Œå®ƒä»¬èƒ½æ„Ÿå—åˆ°çš„å‚æ•°å°±æ˜¯xå’Œyã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ 12[[1, 2], [3, 4]].map(([a, b]) =&gt; a + b);// [ 3, 7 ] é»˜è®¤å€¼å‡½æ•°å‚æ•°çš„è§£æ„ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ 12345678function move(&#123;x = 0, y = 0&#125; = &#123;&#125;) &#123; return [x, y];&#125;move(&#123;x: 3, y: 8&#125;); // [3, 8]move(&#123;x: 3&#125;); // [3, 0]move(&#123;&#125;); // [0, 0]move(); // [0, 0] ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°moveçš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œè§£æ„ï¼Œå¾—åˆ°å˜é‡xå’Œyçš„å€¼ã€‚å¦‚æœè§£æ„å¤±è´¥ï¼Œxå’Œyç­‰äºé»˜è®¤å€¼ã€‚ ä»å¦ä¸€ä¸ªè§’åº¦æ¥è®²ï¼Œå¦‚ä¸‹çš„ä»£ç ä¹Ÿæ˜¯ä¸€ç§è®¾ç½®é»˜è®¤å€¼çš„æ–¹å¼ï¼Œä½†æ˜¯å´ä¸ä¸Šé¢çš„ä»£ç æœ‰å¾ˆå¤§å·®åˆ«ï¼š 12345678function move(&#123;x, y&#125; = &#123; x: 0, y: 0 &#125;) &#123; return [x, y];&#125;move(&#123;x: 3, y: 8&#125;); // [3, 8]move(&#123;x: 3&#125;); // [3, undefined]move(&#123;&#125;); // [undefined, undefined]move(); // [0, 0] ä¸Šé¢ä»£ç æ˜¯ä¸ºå‡½æ•°moveçš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯ä¸ºå˜é‡xå’ŒyæŒ‡å®šé»˜è®¤å€¼ï¼Œæ‰€ä»¥å½“åœ¨æ•´ä¸ªå‚æ•°ä¸ºundefinedçš„æ—¶å€™ï¼Œæ‰ä¼šè‡´ä½¿é»˜è®¤å€¼ç”Ÿæ•ˆï¼Œæ‰€ä»¥ä¼šå¾—åˆ°ä¸å‰ä¸€ç§å†™æ³•ä¸åŒçš„ç»“æœã€‚ è§£æ„èµ‹å€¼çš„ç”¨é€”å˜é‡çš„ç»“æ„èµ‹å€¼ç”¨é€”å¾ˆå¤šï¼Œä»¥ä¸‹å‡ ä¸ªåœºæ™¯å°±èƒ½ä½“éªŒå…¶ä¼˜ç‚¹ï¼š å˜é‡å€¼äº’æ¢1234let x = 1;let y = 2;[x, y] = [y, x]; å¦‚æœæŒ‰ç…§ä»¥å‰çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹ä¸­é—´é‡æ¥å¸®åŠ©è¿›è¡Œäº’æ¢ï¼Œè€Œä½¿ç”¨è§£æ„èµ‹å€¼çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå˜é‡å€¼çš„äº¤æ¢ï¼Œè¿™æ ·çš„å†™æ³•ä¸ä»…ç®€ä»‹ï¼Œè€Œä¸”æ˜“è¯»ï¼Œè¯­ä¹‰éå¸¸æ¸…æ™° ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæƒ³è¦ä¸€ä¸ªå‡½æ•°è¿”å›å¤šä¸ªå€¼çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œå°†ç€å¤šä¸ªå€¼å€ŸåŠ©æ•°ç»„æˆ–è€…å¯¹è±¡å¸¦å‡ºæ¥ã€‚ä¸è¿‡æ¯”è¾ƒéº»çƒ¦çš„æ˜¯ï¼Œå–å€¼çš„é—®é¢˜ã€‚è€Œæœ‰äº†è§£æ„èµ‹å€¼ï¼Œé‚£ä¹ˆå–å€¼çš„æ—¶å€™å°±ä¼šéå¸¸æ–¹ä¾¿ 12345678910111213141516// è¿”å›ä¸€ä¸ªæ•°ç»„function example() &#123; return [1, 2, 3];&#125;let [a, b, c] = example();// è¿”å›ä¸€ä¸ªå¯¹è±¡function example() &#123; return &#123; foo: 1, bar: 2 &#125;;&#125;let &#123; foo, bar &#125; = example(); å‡½æ•°å‚æ•°çš„å®šä¹‰è§£æ„èµ‹å€¼å¯ä»¥æ–¹ä¾¿åœ°å°†ä¸€ç»„å‚æ•°ä¸å˜é‡åå¯¹åº”èµ·æ¥ 1234567// å‚æ•°æ˜¯ä¸€ç»„æœ‰æ¬¡åºçš„å€¼function f([x, y, z]) &#123; ... &#125;f([1, 2, 3]);// å‚æ•°æ˜¯ä¸€ç»„æ— æ¬¡åºçš„å€¼function f(&#123;x, y, z&#125;) &#123; ... &#125;f(&#123;z: 3, y: 2, x: 1&#125;); æå–JSONæ•°æ®åœ¨è§£æJSONå¯¹è±¡çš„æ•°æ®æ—¶ï¼Œè§£æ„èµ‹å€¼å°±æ˜¾å¾—å°¤ä¸ºä¾¿åˆ©äº† 12345678910let jsonData = &#123; id: 42, status: "OK", data: [867, 5309]&#125;;let &#123; id, status, data: number &#125; = jsonData;console.log(id, status, number);// 42, "OK", [867, 5309] å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æˆ‘ä»¬åº”è¯¥è¿™ä¹ˆåšè¿‡ï¼Œä¸ºäº†ä¿è¯ä»£ç å®¹é”™æ€§ï¼Œç»å¸¸éœ€è¦å¯¹å‡½æ•°çš„å…¥å‚è¿›è¡ŒéªŒè¯ï¼Œé˜²æ­¢å‡ºç°ç©ºæŒ‡é’ˆçš„å¼‚å¸¸ è€Œæˆ‘ä»¬é€šè¿‡è§£æ„èµ‹å€¼æ¥ç»™å‡½æ•°å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œå°±ä¸éœ€è¦å†åœ¨å‡½æ•°ä¸­åˆ¤æ–­å‚æ•°ï¼Œç„¶åå†ç»™é»˜è®¤å€¼çš„ä»£ç äº† 1234567891011jQuery.ajax = function (url, &#123; async = true, beforeSend = function () &#123;&#125;, cache = true, complete = function () &#123;&#125;, crossDomain = false, global = true, // ... more config&#125; = &#123;&#125;) &#123; // ... do stuff&#125;; mapç»“æ„çš„å¾ªç¯éå†æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæƒ³è¦è·å–mapçš„å€¼è¦é€šè¿‡keyæ¥è·å–ï¼Œè€Œmapçš„keyä¸€èˆ¬å¯ä»¥æ˜¯æ²¡æœ‰ä»»ä½•è§„å¾‹ï¼Œæ‰€ä»¥æƒ³è¦å¾ªç¯å°±ä¸ä¼šåƒæ•°ç»„é‚£æ ·ç®€å•ã€‚ ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡è§£æ„èµ‹å€¼æ¥æ–¹ä¾¿ä½è§£å†³è¿™ä¸ªé—®é¢˜ Mapç»“æ„åŸç”Ÿæ”¯æŒIteratoræ¥å£ï¼Œé…åˆå˜é‡çš„è§£æ„èµ‹å€¼ï¼Œè·å–keyå’Œvalueå°±å¦‚ä¸‹ï¼š 1234567const map = new Map();map.set('first', 'hello');map.set('second', 'world');for (let [key, value] of map) &#123; console.log(key + " is " + value);&#125; è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³•åŠ è½½æ¨¡å—æ—¶ï¼Œå¾€å¾€éœ€è¦æŒ‡å®šè¾“å…¥å“ªäº›æ–¹æ³•ã€‚è§£æ„èµ‹å€¼ä½¿å¾—è¾“å…¥è¯­å¥éå¸¸æ¸…æ™° 1const &#123; SourceMapConsumer, SourceNode &#125; = require("source-map"); è¿™äº›åœºæ™¯ä¸‹ï¼Œèƒ½å¤Ÿä½¿ç”¨å˜é‡çš„è§£æ„èµ‹å€¼ï¼Œéƒ½ä¼šæ˜¯ä¸€ç§å¾ˆä¾¿æ·çš„æ–¹æ³•ï¼Œè¶³ä»¥ä½“ç°å‡ºè§£æ„èµ‹å€¼çš„å¼ºå¤§]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>å®å½•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[let&const]]></title>
    <url>%2Fit233.github.io%2F2018%2F12%2F04%2Flet%26const%2F</url>
    <content type="text"><![CDATA[letå‘½ä»¤ç®€è¿° ES6æ–°å¢äº†letå‘½ä»¤ç”¨æ¥ç”Ÿå‘½å˜é‡ï¼Œè€Œåœ¨ä¹‹å‰å†™jsçš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¹ æƒ¯äº†ä½¿ç”¨varï¼Œè€Œletçš„ç”¨æ³•ä¹Ÿä¸ä¹‹ç›¸ä¼¼ã€‚ è€Œå­˜åœ¨äº†varå‘½ä»¤æ¥å£°æ˜å˜é‡ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æœ‰letå‘½ä»¤ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œä½¿ç”¨varçš„è¯ä¼šå‡ºç°å¾ˆå¤šçš„é—®é¢˜ï¼Œå¦‚å˜é‡æå‡å¯¼è‡´çš„å„ç§èµ‹å€¼ã€å–å€¼çš„é”™è¯¯é—®é¢˜ç­‰ç­‰ï¼Œæƒ³å¿…å‰ç«¯çš„è¿™ç±»é—®é¢˜é‡åˆ°ä¸å°‘ã€‚ ä¸ºäº†æœ‰æ•ˆçš„è§„é¿æ­¤ç±»çš„é—®é¢˜ï¼Œç‰¹æ¨å‡ºäº†letå‘½ä»¤ã€‚ä½¿ç”¨letå£°æ˜çš„å˜é‡ï¼Œåªä¼šåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯é™¤äº†åŒ…å«letå‘½ä»¤çš„ä½œç”¨åŸŸï¼Œå…¶ä»–åœ°æ–¹æ˜¯è®¿é—®ä¸åˆ°è¿™ä¸ªå˜é‡çš„ ä»£ç å®éªŒä¸‹é¢å®å½•å®éªŒä»£ç  å…ˆæ¥çœ‹ä¸€ä¸‹varå‘½ä»¤å£°æ˜çš„å˜é‡ 1234&#123; var a = 10&#125;console.log(a) //10 è¿™ä¸ªä»£ç è¿è¡Œä¹‹åï¼Œèƒ½å¤Ÿæ‰“å°å‡ºaçš„å€¼ä¸º10ï¼Œç„¶è€Œæˆ‘ä»¬çš„å˜é‡aæ˜¯åœ¨{}åŒºåŸŸä¸­å®šä¹‰çš„ï¼Œè€Œconsole.log(a)æ˜¯åœ¨è¯¥åŒºåŸŸå¤–é¢è®¿é—®aï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸Šä¸€çº§è°ƒç”¨ä½çº§åŒºåŸŸä¸­çš„å˜é‡ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿè¿›è¡Œè®¿é—® å†æ¥çœ‹ä¸€ä¸‹let 12345&#123; let a = 10 console.log(a)//10&#125;console.log(a)//ReferenceError: a is not defined è¿™ä¸ªä»£ç è¿è¡Œç¬¬ä¸‰è¡Œä¼šæ‰“å°10ï¼Œè€Œç¬¬5è¡Œä¼šæŠ¥é”™ï¼šReferenceError: a is not defined è¿™å°±æ˜¯letçš„ä½œç”¨ï¼Œåœ¨{}åŒºåŸŸä¸­å®šä¹‰çš„aï¼Œåœ¨è¯¥åŒºåŸŸå¤–ï¼ˆä¸Šçº§åŒºåŸŸï¼‰æ˜¯æ— æ³•è®¿é—®åˆ°è¯¥å˜é‡çš„ï¼Œè¿™æ ·å°±ä¸å­˜åœ¨å˜é‡æå‡çš„é—®é¢˜äº†,è€Œaå˜é‡ä¹Ÿå°±åªèƒ½ä½œç”¨åœ¨ï½›ï½åŒºåŸŸä¸­ é—®é¢˜ç ”ç©¶ ç„¶åç»™å¤§å®¶å±•ç¤ºä¸€ä¸ªå¾ˆæœ‰è¶£çš„é—®é¢˜ 12345678910var b = 0;for(var a = 0;a &lt;10;a++)&#123; setTimeout(() =&gt; &#123; b += a; console.log("for-"+a+":"+b) &#125;, 1000);&#125;var a = 5;b+=a;console.log("0-9ç´¯åŠ æ€»å’Œ+5ä¸ºï¼š"+b) æŒ‰ç…§æ­£å¸¸é€»è¾‘ï¼Œæˆ‘ä»¬è¿™å—ä»£ç æ˜¯è¦è¿›è¡Œç»Ÿè®¡0-9ç´¯åŠ çš„å’Œï¼Œæˆ‘ä»¬åˆ†æè¿™æ®µä»£ç ï¼š å…ˆå£°æ˜å˜é‡bä¸º0ï¼Œæ–¹ä¾¿æœ€åä¿å­˜æ€»å’Œ å†™forå¾ªç¯ï¼Œè¿›è¡Œ0-9çš„ç´¯åŠ  ç„¶åå®šä¹‰å˜é‡a=5ï¼Œbè®¡ç®—å®Œä¹‹åå†ç´¯åŠ 5ï¼Œç„¶åè¾“å‡ºç»“æœ æ­£å¸¸é€»è¾‘ç®—ä¸‹æ¥åº”è¯¥æ˜¯45+5 = 50 ç»“æœå‘¢ï¼Ÿ æˆ‘æƒ³ï¼Œå’Œæˆ‘ä¸€æ ·å…ˆå­¦javaåæ¥å­¦jsçš„äººï¼Œèµ·åˆå¾ˆç—›è‹¦å§ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ è¿™ä¸ªå…·ä½“å¦‚ä½•è§£é‡Šæˆ‘ä¹Ÿä¸å¤ªèƒ½ç†è§£ï¼Œåˆ°åº•forå¾ªç¯çš„aä¸åé¢å®šä¹‰çš„aæ˜¯å¦åŒä¸€ä¸ªï¼Ÿè¿˜æ˜¯åé¢å®šä¹‰çš„æŠŠä¹‹å‰çš„ç»™è¦†ç›–æ‰äº†ï¼Ÿåˆ†ä¸å¤ªæ¸…ï¼ŒåªçŸ¥é“åœ¨ç­‰1sä¹‹åï¼Œæ‰§è¡Œb+=açš„æ—¶å€™ï¼Œæ‹¿åˆ°çš„aæ˜¯5ï¼Œæœ€åèµ‹å€¼ä¸º5çš„é‚£ä¸ªa é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½ç©çš„æ˜¯ï¼šæŠŠåé¢var a = 5å»æ‰ï¼Œåˆä¼šå‡ºç°å¦ä¸€ä¸ªé—®é¢˜ åˆ†æè§£é‡Š å®éªŒä¹‹å‰çš„é‚£ä¸ªå¾ªç¯æŠŠvaræ”¹æˆletï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µ 12345678910var b = 0for(let a = 0;a &lt;10;a++)&#123; setTimeout(() =&gt; &#123; b += a console.log("for-"+a+":"+b) &#125;, 1000);&#125;var a = 5;b+=a;console.log("0-9ç´¯åŠ æ€»å’Œ+5ä¸ºï¼š"+b) è™½ç„¶é¡ºåºæœ‰é—®é¢˜ï¼ˆsetTimeout()å‡½æ•°å¼‚æ­¥å»¶æ—¶ï¼‰ï¼Œä½†æ˜¯æœ€ç»ˆç»“æœæ˜¯æ­£ç¡®çš„ å¥½äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¹‹å‰è¯´çš„å»æ‰åé¢å®šä¹‰çš„varä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ varï¼š 123456for(var a = 0;a &lt;10;a++)&#123; setTimeout(() =&gt; &#123; console.log("for-"+a) &#125;, 1000);&#125;console.log() ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬åªä¿ç•™äº†å¾ªç¯ï¼Œç»“æœå¦‚ä¸‹ letï¼š 123456for(let a = 0;a &lt;10;a++)&#123; setTimeout(() =&gt; &#123; console.log("for-"+a) &#125;, 1000);&#125;console.log() ç»“æœï¼š ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œåˆ«æ€¥ï¼Œæˆ‘ä»¬æ¥è°ƒè¯•ä¸€ä¸‹çœ‹çœ‹ä¼šä¸ä¼šå‘ç°ä»€ä¹ˆï¼š æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹varï¼š æ–­ç‚¹å°±æ‰“åœ¨ç¬¬ä¸€è¡Œï¼Œforï¼Œç„¶åå¯åŠ¨è°ƒè¯•ï¼Œæ³¨æ„çœ‹å˜é‡è¿™å— åœ¨è¿™é‡Œè¦è¯´ä¸€ä¸‹åˆšåˆšå¤§å®¶èƒ½å¤Ÿçœ‹åˆ°ï¼Œæˆ‘ä»¬è¿™å¼ å›¾æ˜¯å¯åŠ¨è°ƒè¯•ä¹‹åæœªåšä»»ä½•æ“ä½œçš„ç¬¬ä¸€å¼ å›¾ï¼Œä½†æ˜¯è¿™æ—¶å€™Localä¸­å°±å·²ç»å­˜åœ¨äº†aï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿæ˜¯node.jsåœ¨é‡åˆ°å˜é‡å£°æ˜çš„æ—¶å€™ï¼Œä¼šå°†å£°æ˜æ”¾åœ¨ç¬¬ä¸€è¡Œï¼Œå…ˆå£°æ˜å˜é‡ï¼Œç„¶ååœ¨ç»§ç»­æ‰§è¡Œ å½“æˆ‘ä»¬èµ°åˆ°ç¬¬äºŒè¡Œï¼Œé‚£ä¹ˆaå°±åˆ›å»ºæˆåŠŸäº†ï¼Œæˆ‘ä»¬æ¥è§‚å¯Ÿå˜é‡çœ‹çœ‹æœ‰ä»€ä¹ˆå€¼å¾—æ³¨æ„çš„ï¼Ÿ çœ‹åˆ°Localä¸‹é¢aã€‚è¿™æ˜¯æœ¬åœ°å˜é‡ã€‚è€Œä¹‹å‰ä¸ºundefinedï¼Œé€šè¿‡ç¬¬ä¸€è¡Œçš„èµ‹å€¼ä¹‹å(å£°æ˜è¢«æå‡åˆ°äº†ä¸Šé¢ï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œåªå®Œæˆäº†ä¸€ä¸ªèµ‹å€¼)ï¼Œå®ƒçš„å€¼æ˜¯0 æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€ç›´è°ƒè¯•åˆ°ç¬¬å…­è¡Œï¼Œç„¶åèƒ½å‘ç°è¿™ä¸ªæƒ…å†µï¼š ç„¶åæˆ‘ä»¬æ”¾å¼€è°ƒè¯•ï¼Œç›´æ¥æ‰§è¡Œåˆ°åº• ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹let è°ƒè¯•èµ°ä¸€æ­¥ è¿™é‡Œå‡ºç°äº†Blockï¼šè¿™æ˜¯å—çº§ä½œç”¨åŸŸï¼ŒES6æ–°åŠ çš„ï¼Œåé¢ä¼šè¯´åˆ°ã€‚è¿™å°±æ˜¯ä¸åŒï¼Œè¿™æ ·å°±è¯´æ˜è¿™ä¸ªforä¸­å£°æ˜çš„aå°±æ˜¯åªèƒ½ä½œç”¨åœ¨è¿™ä¸ªå—ä¸­ï¼Œå…¶ä»–åœ°æ–¹ç”¨ä¸äº†ï¼Œä¹Ÿæ‹¿ä¸åˆ°ï¼Œæ‰€ä»¥ç»“æœæ˜¯ï¼Œä¸è¯´äº†ã€‚éƒ½çŸ¥é“äº† å”¯ä¸€æ€§ å¤§å®¶åº”è¯¥çŸ¥é“ï¼Œä½¿ç”¨varå‘½ä»¤å£°æ˜çš„å˜é‡ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥é‡å¤å£°æ˜ï¼Œè€Œæ‰€æœ‰å˜é‡éƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ªå…¨å±€å˜é‡ 123var a = 0console.log(a) //0var a = 10 è€Œä½¿ç”¨letå‘½ä»¤å£°æ˜çš„å˜é‡å´ä¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´letå£°æ˜çš„å˜é‡åªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸èƒ½ä¸å·²å­˜åœ¨çš„å˜é‡é‡å 123var a = 0console.log(a)let a = 10 //SyntaxError: Identifier 'a' has already been declared ä¸åªæ˜¯åœ¨ä¹‹åå£°æ˜ï¼Œåœ¨ä¹‹å‰å£°æ˜ä¹Ÿæ˜¯æŠ¥é”™ï¼ˆä¸ºä»€ä¹ˆ?å·²ç»è§£é‡Šè¿‡äº†ï¼‰ï¼š 123let a = 0console.log(a)var a = 10 //SyntaxError: Identifier 'a' has already been declared æ€»ç»“ varæŒ‡ä»¤ varå£°æ˜çš„å˜é‡aï¼Œåœ¨å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆï¼Œæ‰€ä»¥å…¨å±€åªæœ‰ä¸€ä¸ªå˜é‡a åœ¨å¾ªç¯ä¸­ï¼Œæ¯ä¸€æ¬¡å¾ªç¯ï¼Œå˜é‡açš„å€¼éƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå¦‚æœaçš„å£°æ˜æ‰§è¡Œä¸ºvarï¼Œå¾ªç¯å†…çš„aæŒ‡å‘çš„å°±æ˜¯å…¨å±€çš„a ä½¿ç”¨varæŒ‡ä»¤å¦‚æœå…ˆå£°æ˜äº†ä¸€ä¸ªå˜é‡aï¼Œä¹‹ååˆä½¿ç”¨varæŒ‡ä»¤å£°æ˜ä¸€ä¸ªå˜é‡aï¼Œè¿™ä¸ªæ—¶å€™ä¸ä¼šæŠ¥é”™ï¼Œä¸¤ä¸ªå˜é‡aéƒ½æ˜¯æŒ‡å‘åŒä¸€ä¸ªå˜é‡ï¼Œä¹Ÿåªæœ‰ä¸€ä¸ªå˜é‡a varå£°æ˜çš„å˜é‡aï¼Œåœ¨ä»»ä½•æ—¶å€™è°ƒç”¨çš„ï¼Œéƒ½æ˜¯å½“å‰açš„å€¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨setTimeOutï¼ˆï¼‰å»¶æ—¶è°ƒç”¨açš„æ—¶å€™ï¼Œæ‰€æœ‰aéƒ½æ˜¯æœ€åä¸€ä¸ªå€¼ varå‘½ä»¤ä¼šå‘ç”Ÿå˜é‡æå‡ç°è±¡ï¼Œå³åœ¨å˜é‡å£°æ˜ä¹‹å‰å¯ä»¥ä½¿ç”¨ï¼Œä¸è¿‡å€¼ä¸ºundefinedã€‚ä¹Ÿå°±æ˜¯ä¹‹å‰è¯´çš„ï¼Œnode.jsæ‰§è¡Œä»£ç ä¹‹å‰ï¼Œå…ˆæŠŠvarå£°æ˜çš„å˜é‡éƒ½æå‡åˆ°æœ€å‰é¢ï¼Œå…ˆå£°æ˜æ‰€æœ‰å˜é‡ï¼Œå€¼ä¸ºundefinedï¼Œåœ¨ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼Œé‡åˆ°èµ‹å€¼çš„æ—¶å€™å°±èµ‹å€¼ï¼Œè°ƒç”¨çš„æ—¶å€™å°±è°ƒç”¨ letæŒ‡ä»¤ letæŒ‡ä»¤å£°æ˜çš„aï¼Œåªåœ¨å½“å‰å½“å‰çš„ä½œç”¨åŸŸå†…æœ‰æ•ˆ åœ¨å¾ªç¯ä¸­ï¼Œletå£°æ˜çš„aï¼Œåªåœ¨æœ¬è½®å¾ªç¯ä¸­æœ‰æ•ˆï¼Œæ‰€ä»¥æ¯æ¬¡å¾ªç¯çš„aå…¶å®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡ æ¯æ¬¡å¾ªç¯çš„aéƒ½æ˜¯æ–°çš„å˜é‡ï¼Œå´èƒ½å¤ŸçŸ¥é“ä¸Šä¸€è½®å¾ªç¯açš„å€¼ï¼Œæ˜¯å› ä¸ºJavaScriptå¼•æ“å†…éƒ¨ä¼šè®°ä½ä¸Šä¸€è½®å¾ªç¯çš„å€¼ï¼Œåˆå§‹åŒ–æœ¬è½®çš„å˜é‡aæ—¶ï¼Œå°±åœ¨ä¸Šä¸€è½®å¾ªç¯çš„åŸºç¡€ä¸Šè¿›è¡Œè®¡ç®— forå¾ªç¯çš„ç‰¹åˆ«ä¹‹å¤„ï¼šè®¾ç½®å¾ªç¯å˜é‡çš„é‚£éƒ¨åˆ†æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œè€Œå¾ªç¯ä½“å†…éƒ¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­ä½œç”¨åŸŸ ä½¿ç”¨letå£°æ˜çš„å˜é‡ï¼Œä¸ä¼šå‘ç”Ÿå˜é‡æå‡ï¼Œæ‰€ä»¥åœ¨å£°æ˜å®ƒä¹‹å‰ï¼Œè¯¥å˜é‡ç›¸å½“äº(ä¸ºä»€ä¹ˆæ˜¯ç›¸å½“äºï¼Œçœ‹å®Œåé¢å¸Œæœ›ç†è§£)æ˜¯ä¸å­˜åœ¨çš„ï¼Œå¦‚æœåœ¨å£°æ˜ä¹‹å‰è°ƒç”¨è¯¥å˜é‡ï¼Œä¼šæŠ¥é”™ ä½¿ç”¨letå£°æ˜çš„å˜é‡ï¼Œåœ¨åŒä¸€ä¸ªåŒºåŸŸä¹‹ä¸­æ˜¯å”¯ä¸€çš„ï¼Œå³æ— è®ºä»¥å“ªç§å½¢å¼å£°æ˜äº†å˜é‡aï¼Œåœ¨è¯¥åŒºåŸŸä¸­ä¹‹åçš„ä»£ç é‡Œéƒ½æ— æ³•å†ä½¿ç”¨letå£°æ˜å˜é‡a æš‚æ—¶æ€§æ­»åŒºç®€è¿° æ‰€è¯´çš„æš‚æ—¶æ€§æ­»åŒºï¼Œå°±æ˜¯åœ¨letå‘½ä»¤å£°æ˜å˜é‡ä¹‹å‰ï¼Œè¯¥å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ï¼Œè¿™ä¸€éƒ¨åˆ†ä»£ç åŒºé—´å°±ç§°ä¸ºæš‚æ—¶æ€§æ­»åŒº ä¾‹å¦‚æœ‰ä¸€æ®µä»£ç ï¼Œæœ‰ä¸€å—åŒºåŸŸå æ®æ€»ä»£ç çš„ç¬¬10~30è¡Œï¼Œå…¶ä¸­æœ‰letå‘½ä»¤å£°æ˜çš„å˜é‡åœ¨è¯¥åŒºåŸŸçš„ç¬¬20è¡Œï¼Œé‚£ä¹ˆè¿™å—åŒºåŸŸçš„ç¬¬10~20è¡Œå°±æ˜¯è¯¥å˜é‡çš„â€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼ˆtemporal dead zoneï¼ŒTDZï¼‰ å˜é‡ç»‘å®šåŒºåŸŸä¸TDZæ‰€è°“çš„å˜é‡ç»‘å®šåŒºåŸŸï¼Œå°±æ˜¯æŒ‡å¦‚æœä¸€ä¸ªå—çº§ä½œç”¨åŸŸå†…å­˜åœ¨letå‘½ä»¤å£°æ˜çš„å˜é‡aï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å°±ä¼šç»‘å®šè¿™ä¸ªåŒºåŸŸï¼Œå¹¶ä¸”ä¸ä¼šå†å—åˆ°å¤–éƒ¨çš„å½±å“ï¼ŒåŠæ—¶åœ¨å¤–éƒ¨åˆå£°æ˜äº†ä¸è¯¥å˜é‡ç›¸åŒåç§°çš„å˜é‡aï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°è¿™ä¸ªåŒºåŸŸä¸­çš„å˜é‡a å¦‚ï¼š 12345var a = 0&#123; console.log(a)//0 var a = 10&#125; åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªvarå‘½ä»¤çš„å˜é‡aï¼Œä½†æ˜¯åœ¨å—çº§åŒºåŸŸçš„ä»£ç ä¸­åˆè¿›è¡Œäº†ä¸€æ¬¡å˜é‡açš„å£°æ˜(var)ï¼Œè¿™æ ·çš„ä»£ç æ˜¯å¯ä»¥é€šè¿‡çš„ ä½†æ˜¯æœ‰è¿™ç§æƒ…å†µï¼š 12345var a = 0&#123; console.log(a) let a = 10 //ReferenceError: a is not defined&#125; è¿™é‡Œæœ‰ä¸¤ç‚¹ï¼šå˜é‡ç»‘å®šåŒºåŸŸä»¥åŠæš‚æ—¶æ€§æ­»åŒº ES6æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨letå’Œconstå‘½ä»¤ï¼Œè¿™ä¸ªåŒºå—å¯¹è¿™äº›å‘½ä»¤å£°æ˜çš„å˜é‡ï¼Œä»ä¸€å¼€å§‹å°±å½¢æˆäº†å°é—­ä½œç”¨åŸŸã€‚å‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±æ˜¯ç”¨è¿™äº›å˜é‡çš„ï¼Œå°±ä¼šæŠ¥é”™ æ‰€ä»¥åœ¨ä»£ç è¡Œ2~5è¿™ä¸ªåŒºå—ä¹‹é—´ï¼Œå­˜åœ¨letå£°æ˜çš„å˜é‡aï¼Œé‚£ä¹ˆ1å£°æ˜çš„å˜é‡aå¯¹äº2~5è¿™ä¸ªåŒºå—å°±æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºlet aå·²ç»ç»‘å®šäº†è¿™ä¸ªåŒºå—ï¼ŒåŒæ—¶å› ä¸ºletå˜é‡çš„å”¯ä¸€æ€§ï¼Œä¸å…è®¸varå˜é‡å†æ¥æ’è¶³ã€‚è€Œ2~4è¡Œï¼Œå°±æ˜¯let açš„æ­»åŒºï¼Œæ˜¯æ— æ³•è°ƒç”¨å˜é‡açš„ â€œæš‚æ—¶æ€§æ­»åŒºâ€ä¹Ÿå°±æ„å‘³ç€typeofä¸å†æ˜¯ä¸€ä¸ªç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„æ“ä½œ ä¸‹é¢ä¸ºå¯¹æ¯”ä»£ç ï¼š 1234567console.log(typeof a) //undefinedvar a = 0&#123; console.log(typeof b) //undefined console.log(typeof a) //æŠ¥é”™ï¼šReferenceError: a is not defined let a = 10&#125; è¿™é‡Œçš„ä»£ç èƒ½å¤Ÿçœ‹å¾—å‡ºæ¥ varå˜é‡å› ä¸ºå˜é‡æå‡ï¼Œæ‰€ä»¥åœ¨å£°æ˜ä»£ç ä¹‹å‰å°±èƒ½è°ƒç”¨ï¼Œåªä¸è¿‡æ˜¯undefined å¦‚æœæ²¡æœ‰å£°æ˜çš„å˜é‡ï¼Œä»–å°±æ˜¯undefined ä½†æ˜¯letå˜é‡åœ¨å£°æ˜ä¹‹å‰ï¼Œè™½ç„¶ä¹Ÿæ˜¯undefinedï¼Œä½†æ˜¯è§„å®šåœ¨æ­»åŒºä¸­æ˜¯æ— æ³•è°ƒç”¨çš„ï¼Œä¼šæŠ¥é”™ é…å›¾å¦‚ä¸‹ï¼š å…³äºéšè”½æ­»åŒºçš„ç¤ºä¾‹ç¤ºä¾‹ä¸€ã€å‡½æ•°å…¥å‚12345function fun(x = y, y = 2)&#123; //ReferenceError: y is not defined return [x,y]&#125;a = fun()console.log(a) ä»¥ä¸Šä»£ç çš„æ„æ€å°±æ˜¯å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œxå’Œy å¹¶ä¸”ç»™ä¸¤ä¸ªå‚æ•°é»˜è®¤å€¼ï¼Œxçš„é»˜è®¤å€¼æ˜¯yçš„å€¼ï¼Œyçš„é»˜è®¤å€¼æ˜¯2 è¿™é‡Œä¼šæŠ¥é”™:ReferenceError: y is not defined(å¯èƒ½æŸäº›æƒ…å†µä¸‹ä¸ä¼šæŠ¥é”™) ä¸ºä»€ä¹ˆä¼šæŠ¥é”™ï¼Œç®€å•è¯´ä¸€ä¸‹ï¼š é¦–å…ˆï¼Œè¿™é‡ŒæŠ¥é”™yï¼Œæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°çš„x = yè¿™é‡ŒæŠ¥é”™ï¼Œè¿™é‡Œçš„yæœªæ‰¾åˆ° ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºåœ¨è¿™ä¸ªfun()çš„åŒºå—ä¸­ï¼Œæœ‰å£°æ˜yï¼Œä¸è¿‡æ˜¯ç¬¬äºŒä¸ªå‚æ•°å£°æ˜çš„ï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸€ä¸ªå‚æ•°è°ƒç”¨å°±æ˜¯yçš„æ­»åŒºï¼Œ å¦‚æœå°†ä¸¤ä¸ªå‚æ•°äº’æ¢ä¸€ä¸‹ä½ç½®ï¼Œé‚£ä¹ˆè¿™æ®µä»£ç å°±èƒ½æ­£ç¡®æ‰§è¡Œäº† 12345function bar(y = 2 , x = y)&#123; return [x,y]&#125;a = bar()console.log(a) //Array(2) [2, 2] #### å®ä¾‹äºŒã€å£°æ˜èµ‹å€¼ 1234var a = aconsole.log(a) //undefinedlet b = b //ReferenceError: b is not definedconsole.log(b) è¿™é‡Œä¾æ—§æ˜¯æ­»åŒºçš„é—®é¢˜ï¼Œä¸Šé¢çš„å¯¹æ¯”ä»£ç ï¼Œvar a= aèµ‹å€¼çš„æ—¶å€™è¿è¡Œæ­£å¸¸ï¼Œæ˜¯å› ä¸ºvarå˜é‡æ²¡æœ‰æ­»åŒºçš„ è€Œlet b = bæŠ¥é”™ï¼Œæ˜¯å› ä¸º=åçš„bå±äºè°ƒç”¨å˜é‡bï¼Œè€Œè¿™ä¸ªåŒºå—ä¸­æœ‰å£°æ˜bçš„letå‘½ä»¤ï¼Œæ‰€ä»¥åœ¨bæ²¡æœ‰å®Œå…¨å£°æ˜ä¹‹å‰è°ƒç”¨äº†bï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ­»åŒº å—çº§ä½œç”¨åŸŸåœ¨ES5ä¸­åªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œè¿™æ ·ä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ï¼š é—®é¢˜ä¸€ã€å†…å±‚å˜é‡å¯èƒ½ä¼šè¦†ç›–å¤–å±‚å˜é‡12345var a = new Date();function fun()&#123; console.log(a) //Wed Dec 05 2018 14:21:35 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) &#123;&#125;&#125;fun() è€Œå¦‚æœæ˜¯è¿™æ ·ï¼š 123456var a = new Date();function fun()&#123; console.log(a) //undefined var a = 123&#125;fun() ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæ˜¯å› ä¸ºå˜é‡æå‡ï¼Œç”±äºåœ¨fun()ä¸­ä¹Ÿæœ‰å£°æ˜aå˜é‡ï¼Œæ‰€ä»¥aå˜é‡çš„å£°æ˜å°±æå‡åˆ°äº†å‡½æ•°æœ€é¡¶ç«¯è¿›è¡Œå£°æ˜ï¼Œè¿™æ—¶å€™aå°±æ˜¯undefinedï¼Œè¿™ä¸ªæ—¶å€™æ˜¯å› ä¸ºfun()çš„aè¦†ç›–äº†ä¸Šå±‚çš„a é—®é¢˜äºŒã€åŒºå—å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡12345var s = 'abcdefg'for(var i = 0;i&lt;s.length;i++)&#123; console.log(s[i])&#125;console.log(i) //7 è¿™é‡Œåœ¨å¾ªç¯ç»“æŸä¹‹åï¼Œiçš„å€¼ä¾ç„¶å­˜åœ¨ï¼Œè¿˜æ˜¯èƒ½å¤Ÿè·å–åˆ° ES6çš„å—çº§ä½œç”¨åŸŸletå®é™…ä¸Šæ˜¯ä¸ºJavaScriptæ–°å¢äº†å—çº§ä½œç”¨åŸŸ ç¤ºä¾‹ä»£ç ï¼š 12345678910111213141516function fun()&#123; var a = 5 if(true)&#123; var a = 10 &#125; console.log("a:",a)&#125;function fun2()&#123; let b = 5 if(true)&#123; let b = 10; &#125; console.log(b)&#125;fun()//10fun2()//5 ä»è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœèƒ½å¤Ÿçœ‹å¾—å‡ºæ¥ï¼Œvarå˜é‡å†…å±‚å˜é‡ä¼šå½±å“åˆ°ä¸Šå±‚å˜é‡ï¼Œä½†æ˜¯letå˜é‡å´ä¸ä¼š ä¹‹å‰è¯´è¿‡ï¼Œletå˜é‡æ˜¯ç»‘å®šåŒºåŸŸçš„ï¼Œæ‰€ä»¥åœ¨ä¸€ä¸ªåŒºåŸŸä¸­ï¼ŒåŒæ ·çš„å˜é‡ï¼ˆåå­—ç›¸åŒï¼‰åªä¼šå­˜åœ¨ä¸€ä¸ª è€Œå¦‚æœä¸‹å±‚letå˜é‡ä¸ä¸Šå±‚letå˜é‡åŒåçš„è¯ï¼Œä¸ä¼šäº’ç›¸å½±å“ï¼Œé‡‡ç”¨å°±è¿‘åŸåˆ™ åŒæ—¶å—çº§ä½œç”¨åŸŸçš„å‡ºç°ï¼Œä¹Ÿä½¿å¾—ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ä¸å†å¿…è¦äº† å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜å‡½æ•°èƒ½ä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Ÿ ES5è§„å®šï¼Œå‡½æ•°åªèƒ½åœ¨é¡¶å±‚ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸä¸­å£°æ˜ å¦‚ä¸‹ä»£ç ï¼š 123456789101112if (true) &#123; function fun() &#123; console.log("fun") &#125;&#125;try &#123; function fun2() &#123; console.log("fun2") &#125;&#125; catch (e) &#123; console.log(e)&#125; å…¶å®ä»¥ä¸Šä¸¤ç§å‡½æ•°å£°æ˜ï¼Œæ ¹æ®ES5çš„è§„å®šéƒ½æ˜¯éæ³•çš„ ä½†æ˜¯æµè§ˆå™¨æ²¡æœ‰éµå®ˆè¿™ä¸ªè§„å®šï¼Œä¸ºäº†å…¼å®¹ä»¥å‰çš„æ—§ä»£ç ï¼Œè¿˜æ˜¯æ”¯æŒåœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ï¼Œå› æ­¤ä¸Šç±³æ˜‚ä¸¤ç§æƒ…å†µå®é™…ä¸Šéƒ½èƒ½è¿è¡Œï¼Œä¸ä¼šæŠ¥é”™ã€‚ è€ŒES6å¼•å…¥äº†å—çº§ä½œç”¨åŸŸï¼Œæ˜ç¡®å…è®¸åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•° åŒæ—¶ï¼ŒES6è§„å®šï¼Œå—çº§ä½œç”¨åŸŸä¹‹ä¸­ã€‚å‡½æ•°å£°æ˜è¯­å¥çš„è¡Œä¸ºç±»ä¼¼äºletï¼Œåœ¨å—çº§ä½œç”¨åŸŸä¹‹å¤–ä¸èƒ½è¢«å¼•ç”¨ é™¤æ­¤ä¹‹å¤–ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ”¹å˜äº†å—çº§ä½œç”¨åŸŸå†…å£°æ˜çš„å‡½æ•°çš„å¤„ç†è§„åˆ™ï¼Œæ˜¾ç„¶ä¼šå¯¹è€ä»£ç äº§ç”Ÿå¾ˆå¤§å½±å“ï¼Œä¸ºäº†å‡è½»å› æ­¤äº§ç”Ÿçš„ä¸å…¼å®¹é—®é¢˜ï¼ŒES6åœ¨é™„å½•Bé‡Œè§„å®šï¼Œæµè§ˆå™¨çš„å®ç°å¯ä¸éµå®ˆä¸Šé¢çš„è§„å®šï¼Œæœ‰è‡ªå·±çš„è¡Œä¸ºæ–¹å¼ã€‚ å…è®¸åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•° å‡½æ•°å£°æ˜ç±»ä¼¼äºvarï¼Œå³ä¼šæå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸçš„å¤´éƒ¨ åŒæ—¶ï¼Œå‡½æ•°å£°æ˜è¿˜ä¼šæå‡åˆ°æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸçš„å¤´éƒ¨ æ³¨æ„ï¼šä¸Šé¢ä¸‰æ¡è§„åˆ™åªå¯¹ES6çš„çš„æµè§ˆå™¨æœ‰æ•ˆï¼Œå…¶ä»–ç¯å¢ƒçš„è€Œå®ç°ä¸ç”¨éµå®ˆï¼Œè¿˜æ˜¯å°†å—çº§ä½œç”¨åŸŸçš„å‡½æ•°å£°æ˜å½“ä½œletå¤„ç† æ‰€ä»¥ï¼Œè€ƒè™‘åˆ°ç¯å¢ƒå¯¼è‡´çš„è¡Œä¸ºå·®å¼‚å¤ªå¤§ï¼Œåº”è¯¥é¿å…åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ï¼Œ å¦‚æœç¡®å®éœ€è¦ï¼Œä¹Ÿåº”è¯¥å†™æˆå‡½æ•°è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜è¯­å¥ï¼š 123456789101112131415&#123; //å‡½æ•°å£°æ˜è¯­å¥ let a = 'abcdefg' function f() &#123; return a &#125;&#125;&#123; //å‡½æ•°è¡¨è¾¾å¼ let b = 'abcdefg' let fu = function fun() &#123; return b &#125;&#125; æ³¨æ„ï¼š æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå†™å—çº§ï¼ˆå¦‚ifï¼Œå¾ªç¯ï¼‰ï¼Œå¦‚æœåŒºåŸŸä¸­åªæœ‰ä¸€è¡Œä»£ç ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å· ä½†æ˜¯åœ¨å—çº§ä½œç”¨åŸŸå£°æ˜å‡½æ•°ï¼Œå³ä½¿å¦‚è¿™æ ·å½¢å¼çš„å‡½æ•°ï¼š function fun(){} è¿™ä¹Ÿä¸æ˜¯ä»£è¡¨åªæœ‰ä¸€è¡Œä»£ç ï¼Œæ‰€ä»¥å¦‚æœåœ¨å—çº§ä½œç”¨åŸŸå£°æ˜å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰å—çº§ä½œç”¨åŸŸçš„å¤§æ‹¬å·ï¼Œä¼šæŠ¥é”™ constå‘½ä»¤åŸºæœ¬ç”¨æ³•constæ˜¯å£°æ˜ä¸€ä¸ªå¸¸é‡ï¼Œè¿™ä¸ªå¸¸é‡æ˜¯åªè¯»çš„ï¼Œå°±æ˜¯èƒ½å¤Ÿè¯»å–å…¶å€¼ï¼Œä½†æ˜¯ä¸èƒ½æ”¹å˜å®ƒçš„å€¼ constå¸¸é‡æ³¨æ„ç‚¹1. å¸¸é‡ä¸€æ—¦å£°æ˜ä¹‹åï¼Œå°±ä¸èƒ½æ”¹å˜123const a = 0;a = 3;// TypeError: Assignment to constant variable. 2.å¸¸é‡çš„å€¼å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™å°±ç«‹å³åˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼12const a;// SyntaxError: Missing initializer in const declaration constå‘½ä»¤####ï¼‘.ä½œç”¨åŸŸ constçš„ä½œç”¨åŸŸä¸letå‘½ä»¤ç›¸åŒï¼šåªåœ¨å£°æ˜æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸæœ‰æ•ˆ 2.æš‚æ—¶æ€§æ­»åŒºconstå‘½ä»¤å£°æ˜çš„å¸¸é‡ä¹Ÿæ˜¯ä¸æå‡ï¼ŒåŒæ ·å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œåªèƒ½åœ¨å£°æ˜ä¹‹åä½¿ç”¨ 3.å”¯ä¸€æ€§constå£°æ˜çš„å¸¸é‡,ä¹Ÿä¸letä¸€æ ·,åœ¨åŒä¸€å—çº§åŒºåŸŸä¸­ä¸å¯é‡å¤å£°æ˜ï¼Œå…·æœ‰å”¯ä¸€æ€§ constæœ¬è´¨é¢˜å¤–è¯åšè¿‡åå°ï¼Œæœ‰ç ”ç©¶è¿‡å¸¸é‡çš„äººï¼Œåº”è¯¥çŸ¥é“ï¼Œæ‰€è¯´çš„å¸¸é‡ï¼ŒæŒ‡çš„å°±æ˜¯è¿™ä¸ªå˜é‡åœ¨æ ˆä¸­ä¿å­˜çš„å€¼ä¸ä¼šæ”¹å˜ã€‚è€Œå¦‚æœæ˜¯æŒ‡å‘æŸä¸ªå¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯æ‰§è¡ŒæŸä¸ªå¯¹è±¡çš„åœ°å€ä¸èƒ½æ”¹å˜ï¼Œè€Œå¯¹è±¡ä¸­çš„å±æ€§å¯ä»¥éšæ„æ”¹å˜ã€‚ ç®€è¿°constå®é™…ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸å¾—æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€æ‰€ä¿å­˜çš„ä¹¦æ€’ä¸å¾—æ”¹åŠ¨ã€‚ å¯¹äºç®€å•ç±»å‹çš„æ•°æ®ï¼ˆæ•°å€¼ã€å­—ç¬¦åˆ›ã€å¸ƒå°”ï¼‰ï¼Œå€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡ã€‚ ä½†æ˜¯å¯¹äºç¬¦åˆç±»å‹çš„æ•°æ®ï¼ˆä¸»è¦æ˜¯å¯¹è±¡å’Œæ•°ç»„ï¼‰ï¼Œå˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆï¼Œconståªèƒ½ä¿æŒè¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šä¸å˜çš„ï¼ˆæ€»æ˜¯æŒ‡å‘æŸä¸€ä¸ªå›ºå®šçš„åœ°å€ï¼‰ï¼Œè‡³äºå®ƒæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå°±å®Œå…¨ä¸èƒ½æ§åˆ¶äº† å¦‚ä¸‹ä»£ç ï¼š 123456const a = &#123;&#125;;// ä¸º a æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥æˆåŠŸa.prop = 123;a.prop // 123// å°† a æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šæŠ¥é”™a = &#123;&#125;; // TypeError: "a" is read-only 1234const a = [];a.push('Hello'); // å¯æ‰§è¡Œa.length = 0; // å¯æ‰§è¡Œa = ['Dave']; // æŠ¥é”™ ### æ‰©å±• å†»ç»“å¯¹è±¡å¦‚æœçœŸçš„æƒ³å°†å¯¹è±¡å†»ç»“ï¼Œå³å¯¹è±¡å·²ç»åˆ›å»ºï¼Œå…¶æ•°æ®ç»“æ„ä¸èƒ½æ”¹å˜ï¼Œè¦ç”¨Object.freezeæ–¹æ³• 12345const foo = Object.freeze(&#123;&#125;);// å¸¸è§„æ¨¡å¼æ—¶ï¼Œä¸‹é¢ä¸€è¡Œä¸èµ·ä½œç”¨ï¼›// ä¸¥æ ¼æ¨¡å¼æ—¶ï¼Œè¯¥è¡Œä¼šæŠ¥é”™foo.prop = 123; é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœè¿˜è¦å°†å¯¹è±¡çš„å±æ€§å†»ç»“ï¼Œä¸‹é¢ä»£ç æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå°†å¯¹è±¡å½»åº•å†»ç»“çš„å‡½æ•° 12345678var constantize = (obj) =&gt; &#123; Object.freeze(obj); Object.keys(obj).forEach( (key, i) =&gt; &#123; if ( typeof obj[key] === 'object' ) &#123; constantize( obj[key] ); &#125; &#125;);&#125;; åŸç†å°±æ˜¯å¦‚æœå¯¹è±¡çš„å±æ€§è¿˜æ˜¯å¯¹è±¡çš„è¯ï¼Œå°±é€’å½’è°ƒç”¨ï¼Œå°†è¿™ä¸ªå¯¹è±¡å†»ç»“ï¼Œç›´åˆ°æ‰€æœ‰å¯¹è±¡å±æ€§å…¨éƒ¨è¢«å†»ç»“ ES6 å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•ES5åªæœ‰ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼švarå‘½ä»¤å’Œfunctionå‘½ä»¤ã€‚ ES6é™¤äº†æ·»åŠ letå’Œconstå‘½ä»¤ï¼Œè¿˜æœ‰å¦å¤–ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼šimportå‘½ä»¤å’Œclasså‘½ä»¤ é¡¶å±‚å¯¹è±¡é¡¶å±‚å¯¹è±¡çš„å±æ€§é¡¶å±‚å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæŒ‡çš„å°±æ˜¯windowå¯¹è±¡ï¼Œåœ¨NodeæŒ‡çš„å°±æ˜¯globalå¯¹è±¡ ES5ä¹‹ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æ˜¯ç­‰ä»·çš„ 12345window.a = 1;a // 1a = 2;window.a // 2 è¿™ä¸ªä»£ç ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§èµ‹å€¼ä¸å…¨å±€å˜é‡çš„èµ‹å€¼ï¼Œæ˜¯åŒä¸€ä»¶äº‹ï¼Œä¹Ÿå°±æ˜¯è¯´å…¨å±€å˜é‡ å°±æ˜¯ é¡¶å±‚å¯¹è±¡çš„å±æ€§ é¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æŒ‚é’©ï¼Œè¢«è®¤ä¸ºæ˜¯JavaScriptè¯­è¨€æœ€å¤§çš„è®¾è®¡è´¥ç¬”ä¹‹ä¸€ã€‚ è¿™æ ·çš„è®¾è®¡å¸¦æ¥å‡ ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼š é¦–å…ˆæ˜¯æ²¡æ³•åœ¨ç¼–è¯‘æ—¶å°±æŠ¥å‡ºå˜é‡æœªå£°æ˜çš„é”™è¯¯ï¼Œåªæœ‰è¿è¡Œæ—¶æèƒ½çŸ¥é“ï¼ˆå› ä¸ºå…¨å±€å˜é‡å¾ˆå¯èƒ½æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§åˆ›é€ çš„ï¼Œè€Œå±æ€§çš„åˆ›é€ æ˜¯åŠ¨æ€çš„ï¼‰ å…¶æ¬¡ï¼Œç¨‹åºå‘˜å¾ˆå®¹æ˜“ä¸çŸ¥ä¸å€¦å°±åˆ›å»ºäº†å…¨å±€å˜é‡ æœ€åï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§æ˜¯å¯¼å‡ºå¯ä»¥æœ‰è¯»å†™çš„ï¼Œè¿™éå¸¸ä¸åˆ©äºæ¨¡å—åŒ–ç¼–ç¨‹ å¦ä¸€æ–¹é¢ï¼Œwindowå¯¹è±¡æœ‰å®ä½“å«ä¹‰ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„çª—å£å¯¹è±¡ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯ä¸€ä¸ªæœ‰å®ä½“å«ä¹‰çš„å¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸åˆé€‚çš„ ES6ä¸ºäº†æ”¹å˜è¿™ä¸€ç‚¹ï¼Œ ä¸€æ–¹é¢è§„å®šï¼Œä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œvarå‘½ä»¤å’Œfunctionå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ å¦ä¸€æ–¹é¢è§„å®šï¼Œletå‘½ä»¤ã€constå‘½ä»¤ã€classå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ ä¹Ÿå°±æ˜¯è¯´ï¼Œä»ES6å¼€å§‹ï¼Œå…¨å±€å˜é‡å°†é€æ­¥ä¸é¡¶å±‚å¯¹è±¡çš„å±æ€§è„±é’© 1234567var a = 1;// å¦‚æœåœ¨ Node çš„ REPL ç¯å¢ƒï¼Œå¯ä»¥å†™æˆ global.a// æˆ–è€…é‡‡ç”¨é€šç”¨æ–¹æ³•ï¼Œå†™æˆ this.awindow.a // 1let b = 1;window.b // undefined è¿™æ®µä»£ç ä¸­ï¼Œå…¨å±€å˜é‡aç”±varå‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒæ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼› å…¨å±€å˜é‡bç”±letå‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼Œè¿”å›undefined globalå¯¹è±¡ES5çš„é¡¶å±‚å¯¹è±¡ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåœ¨å„ç§å®ç°é‡Œé¢æ˜¯ä¸ç»Ÿä¸€çš„ æµè§ˆå™¨é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯windowï¼Œä½†æ˜¯Nodeå’ŒWeb Workeræ²¡æœ‰window æµè§ˆå™¨å’ŒWeb Workeré‡Œé¢ï¼Œselfä¹ŸæŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œä½†æ˜¯Nodeæ²¡æœ‰self Nodeé‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯globalï¼Œä½†å…¶ä»–ç¯å¢ƒéƒ½ä¸æ”¯æŒ åŒä¸€æ®µä»£ç ä¸ºäº†èƒ½å¤Ÿåœ¨å„ç§ç¯å¢ƒéƒ½èƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ï¼Œç°åœ¨ä¸€èˆ¬æ˜¯ä½¿ç”¨thiså˜é‡ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ï¼š å…¨å±€ç¯å¢ƒä¸­ï¼Œthisä¼šè¿”å›é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯Nodeæ¨¡å—å’ŒES6æ¨¡å—ä¸­ï¼Œthisè¿”å›çš„æ˜¯å½“å‰æ¨¡å— å‡½æ•°é‡Œé¢çš„thisï¼Œå¦‚æœå‡½æ•°ä¸æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿è¡Œï¼Œè€Œæ˜¯æ·¡æ‘ä½œä¸ºå‡½æ•°è¿è¡Œï¼Œthisä¼šæŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ—¶thisä¼šè¿”å›undefined ä¸ç®¡æ˜¯ä¸¥æ ¼æ¨¡å¼è¿˜æ˜¯æ™®é€šæ¨¡å¼ï¼Œnew Function(â€˜return thisâ€™)()æ€»ä¼šè¿”å›å…¨å±€å¯¹è±¡ã€‚ä½†æ˜¯å¦‚æœæµè§ˆå™¨ç”¨äº†CSPï¼ˆContent Security Policyï¼Œå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰ï¼Œé‚£ä¹ˆevalã€new Functionè¿™äº›æ–¹æ³•å¯èƒ½æ— æ³•ä½¿ç”¨ ç»¼ä¸Šæ‰€è¿°ï¼Œå¾ˆéš¾æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ¸ é“é¡¶å±‚å¯¹è±¡ã€‚ ä¸‹é¢æ˜¯ä¸¤ç§å‹‰å¼ºå¯ä»¥ä½¿ç”¨çš„æ–¹æ³• 12345678910111213141516// æ–¹æ³•ä¸€(typeof window !== 'undefined' ? window : (typeof process === 'object' &amp;&amp; typeof require === 'function' &amp;&amp; typeof global === 'object') ? global : this);// æ–¹æ³•äºŒvar getGlobal = function () &#123; if (typeof self !== 'undefined') &#123; return self; &#125; if (typeof window !== 'undefined') &#123; return window; &#125; if (typeof global !== 'undefined') &#123; return global; &#125; throw new Error('unable to locate global object');&#125;; ç°åœ¨æœ‰ä¸€ä¸ªææ¡ˆï¼Œåœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ï¼Œå¼•å…¥globalä½œä¸ºé¡¶å±‚å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰€æœ‰ç¯å¢ƒä¸‹ï¼Œglobaléƒ½æ˜¯å­˜åœ¨çš„ï¼Œéƒ½å¯ä»¥ä»å®ƒæ‹¿åˆ°é¡¶å±‚å¯¹è±¡ã€‚ å«ç‰‡åº“system.globalæ¨¡æ‹Ÿäº†è¿™ä¸ªå¤©ï¼Œå¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒæ‹¿åˆ°global 12345// CommonJS çš„å†™æ³•require('system.global/shim')();// ES6 æ¨¡å—çš„å†™æ³•import shim from 'system.global/shim'; shim(); ä¸Šé¢ä»£ç å¯ä»¥ä¿è¯å„ç§ç¯å¢ƒé‡Œé¢ï¼Œglobalå¯¹è±¡éƒ½æ˜¯å­˜åœ¨çš„ã€‚ 123456// CommonJS çš„å†™æ³•var global = require('system.global')();// ES6 æ¨¡å—çš„å†™æ³•import getGlobal from 'system.global';const global = getGlobal(); ä¸Šé¢ä»£ç å°†é¡¶å±‚å¯¹è±¡æ”¾å…¥å˜é‡global]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>let</tag>
        <tag>const</tag>
        <tag>å®å½•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaæ•´å‹å°è£…ç±»Integerçš„æ¯”è¾ƒ]]></title>
    <url>%2Fit233.github.io%2F2018%2F11%2F29%2Fjava%E6%95%B4%E5%9E%8B%E5%B0%81%E8%A3%85%E7%B1%BBInteger%E7%9A%84%E6%AF%94%E8%BE%83%2F</url>
    <content type="text"><![CDATA[ã€ç¬”è®°ã€‘æ ‡ç­¾ï¼Œæ˜¯å¯¹äºä»¥å‰åšçš„ä¸€äº›ç¬”è®°çš„å›é¡¾ï¼ŒåŒæ—¶è¿˜æœ‰æ–°çš„å­¦ä¹ ã€‚æœ‰å¯èƒ½æœ‰äº›åœ°æ–¹å·²ç»é—æ¼äº†ï¼Œä¹Ÿå¯èƒ½æœ‰äº›åœ°æ–¹æ— æ³•ç¡®è¯ï¼Œç”šè‡³æœ‰çš„åœ°æ–¹ç†è§£æœ‰è¯¯ï¼ ä¸€ã€æµ…è¯´ï¼ˆè¿™é‡Œè¯´çš„æ˜¯åºŸè¯ï¼‰æ•°å­—ç±»å‹â€‹ æˆ‘ä»¬æ—¥å¸¸ä¸­ç»å¸¸ä¼šä½¿ç”¨çš„æ•°å­—æ¥è¿›è¡Œå„ç§è®¡ç®—ï¼Œæ¯”å¦‚1ï¼Œ2ï¼Œ3ç­‰è¿™äº›è‡ªç„¶æ•°ï¼Œå½“ç„¶è¿™äº›è‡ªç„¶æ•°éƒ½æ˜¯æ•´çš„ï¼Œä¸ä¼šåƒå°æ•°1.1ï¼Œ2.5ï¼Œ3.21ç­‰ç­‰è¿™æ ·æœ‰å°æ•°ç‚¹çš„é›¶æ•£çš„å°æ•°ï¼Œè¿™äº›å¤§äº0çš„æ•°å­—éƒ½è¢«ç§°ä¸ºæ­£æ•°ã€‚ â€‹ å½“ç„¶ï¼Œæœ‰å¤§äºå¿…ç„¶ä¼šæœ‰å°äºï¼Œæ‰€ä»¥é‚£äº›å°äº0çš„æ•°å­—è¢«ç§°ä¸ºè´Ÿæ•°ï¼Œå¦‚-1ï¼Œ-2ï¼Œ-3ï¼Œ-5.33ï¼Œ-7.4ç­‰ â€‹ è€Œåœ¨è¿™äº›è´Ÿæ•°ä¸­ä¹Ÿæ˜¯è·Ÿæ­£æ•°ä¸€æ ·ï¼Œé™¤äº†ä»£è¡¨å°äº0çš„è´Ÿå·ï¼ˆ-ï¼‰ä¹‹å¤–ï¼Œå…¶ä»–éƒ½ä¸€æ ·ï¼Œæœ‰çš„åƒ1ï¼Œ2ï¼Œ3ä¸€æ ·æ²¡æœ‰å°æ•°ç‚¹ï¼Œæœ‰çš„å´æœ‰å°æ•°ç‚¹ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰æ•°å­—åˆ†ä¸ºæ•´æ•°å’Œå°æ•° javaä¸­ä»£è¡¨æ•°å­—çš„ç±»å‹â€‹ è¿™äº›æœ€åŸºæœ¬çš„çŸ¥è¯†ç‚¹ï¼Œå°±ä¸åœ¨è¿™è¿‡å¤šä»‹ç»ï¼Œç®€å•æä¸€ä¸‹ æ•´å‹ï¼šjavaä¸­çš„æ•´å‹å°±æ˜¯ä¸Šé¢æˆ‘ä»¬è¯´çš„æ•´æ•°ï¼Œjavaä¸­æ•´å‹çš„æ•°æ®ç±»å‹æœ‰è¿™ä¹ˆå‡ ä¸ªbyteã€shortã€intã€long æµ®ç‚¹å‹ï¼šæµ®ç‚¹å‹ï¼Œè¯´çš„å°±æ˜¯å¸¦æœ‰å°æ•°ç‚¹çš„å°æ•°äº†ï¼Œjavaä¸­æµ®ç‚¹å‹çš„æ•°æ®ç±»å‹æœ‰flotã€double è¿™é‡Œå°±ç®€å•è¿‡ä¸€ä¸‹ï¼Œä»Šå¤©æˆ‘ä»¬è¦è¯´çš„å¹¶ä¸æ˜¯è¿™å‡ ä¸ªæ•°æ®ç±»å‹ï¼Œè€Œæ˜¯å¦ä¸€ç§ å¼•å­ä¸Šé¢æ‰€è¯´çš„æ•°æ®ç±»å‹ï¼Œéƒ½æ˜¯javaä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¿™é—¨è¯­è¨€å‡ºç”Ÿå°±å®šä¹‰å¥½çš„ç±»å‹ã€‚å ç”¨çš„å†…å­˜ç©ºé—´æ¯”è¾ƒå°ï¼Œç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚ ä½†æ˜¯ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œä¾ç„¶ä¼šæœ‰å®ƒè‡ªå·±çš„ç¼ºé™·ã€‚æˆ‘ä»¬åº”è¯¥éƒ½çŸ¥é“ï¼Œå…¶å®åœ¨é¡¹ç›®ä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„å¹¶ä¸æ˜¯è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯å®ƒä»¬çš„å°è£…ç±» ä¸ºä»€ä¹ˆè¦ç”¨å¼€é”€æ›´å¤§çš„å°è£…ç±»ï¼Œè€Œä¸æ˜¯è¿™äº›åŸºæœ¬ç±»å‹? æœ€ç®€å•çš„ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ä¸€ä¸ªç±»ä¸­çš„å±æ€§ï¼Œå®šä¹‰ä¸€ä¸ªæ•´å‹å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡ä¼šæœ‰ä¸€ä¸ªé»˜è®¤å€¼0ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè¿™ä¸ª0åˆ°åº•æ˜¯ä¼ é€’è¿‡æ¥çš„å€¼å°±æ˜¯0å‘¢ï¼Ÿè¿˜æ˜¯å› ä¸ºæ²¡æœ‰ç»™è¿™ä¸ªå®ƒèµ‹å€¼çš„é»˜è®¤å€¼å‘¢ï¼Ÿ å¦‚æœä½ è¯´è‡ªå·±èµ‹å€¼è‡ªå·±ä¸çŸ¥é“å—ï¼Ÿé‚£ä¹ˆé¡¹ç›®ä¸­ä¸€èˆ¬æ‹¿å€¼éƒ½ä¼šä»å‰ç«¯ä¼ é€’è¿‡æ¥ï¼Œè¿™ä¸ªæ—¶å€™åœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åˆæ€ä¹ˆçŸ¥é“è¿™ä¸ªå€¼æ˜¯å‰ç«¯ä¼ è¿‡æ¥å°±æ˜¯0å‘¢ï¼Ÿè¿˜æ˜¯å› ä¸ºå‰ç«¯æ²¡æœ‰ä¼ æ‰€ä»¥é»˜è®¤å€¼ä¸º0äº†å‘¢ï¼Ÿ å¥½äº†ï¼Œç®€å•è®¨è®ºï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½çœ‹å‡ºæ¥ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹æœ‰æ—¶å€™å¹¶ä¸èƒ½æ»¡è¶³ä¸€äº›éœ€æ±‚ï¼Œæ‰€ä»¥è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹çš„å°è£…ç±»ï¼ˆå‡çº§ç‰ˆï¼‰å°±æ¥äº†ã€‚ ä»Šå¤©æˆ‘ä»¬è¦è¯´çš„æ˜¯æ•´å‹intçš„å°è£…ç±»ï¼ˆIntegerï¼‰ äºŒã€ç”±è¯¥è¯é¢˜å¼•å‘çš„è¡¥å……ç–‘é—®æˆ‘æƒ³åº”è¯¥æœ‰äººåœ¨åˆå­¦çš„æ—¶å€™ï¼Œæœ‰äººä¼šå‘Šè¯‰ä½ ï¼ŒIntegerç±»å‹è¿›è¡Œå€¼æ¯”è¾ƒçš„æ—¶å€™ï¼Œè¦ç”¨equalse()æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬å´è¿˜æ˜¯ç”¨==è¿›è¡Œæ¯”è¾ƒï¼Œä½ ä¼šå‘ç°ï¼Œæœ‰çš„æ—¶å€™==æ¯”è¾ƒä¸¤ä¸ªç›¸åŒæ•°å­—çš„Integerå¯¹è±¡ï¼Œè¿”å›çš„æ˜¯trueï¼Œæœ‰çš„æ—¶å€™å´æ˜¯falseï¼Œæ¥ä¸‹æ¥ä¼šè¯¦ç»†è¯´æ˜ == å’Œ equals()è¿™é‡Œåœ¨ç®€å•æä¸€ä¸‹äºŒè€…çš„åŒºåˆ« é¦–å…ˆï¼Œ==æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå€¼ï¼Œè€Œequals()æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå†…å®¹ æˆ‘æƒ³æˆ‘æå‡ºçš„è¿™ä¸ªæ¦‚å¿µä¼šæœ‰å¾ˆå¤šäººä¸è§£ç”šè‡³ä¼šå–·ï¼Œå› ä¸ºå¤§éƒ¨åˆ†äººéƒ½æœ‰è¿™æ ·æ ¹æ·±è’‚å›ºçš„æ¦‚å¿µï¼š ==æ¯”è¾ƒçš„æ˜¯åœ°å€ï¼Œequalsæ¯”è¾ƒçš„æ˜¯å€¼ è¿™ä¹ˆè¯´ä¹Ÿä¸èƒ½ç®—é”™å§ï¼Œæ¯•ç«Ÿå¤§å¤šæ•°äººéƒ½æ˜¯è¿™ä¹ˆè¯´çš„ã€‚ è€Œæˆ‘æœ‰ä¸€ç‚¹ç–‘é—®æå‡ºæ¥ï¼Œå°±æ˜¯è¿™ç§è¯´æ³•çš„ä¸ä¸¥è°¨ï¼š æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ°å€ä¸€èˆ¬æ˜¯å¯¹è±¡æ‰æœ‰ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å­˜åœ¨å †ä¸­çš„å¯¹è±¡æ‰ä¼šæœ‰æŒ‡å‘è¿™ä¸ªå¯¹è±¡åœ¨å †ä¸­å®é™…ä½ç½®çš„åœ°å€ï¼Œè€Œæˆ‘ä»¬æŠŠè¿™ä¸ªåœ°å€ä¼šå­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œè€Œè¿™ä¸ªå˜é‡ä¸­çš„å€¼ï¼Œå°±æ˜¯è¿™ä¸ªåœ°å€ï¼Œè¿™ä¸ªå€¼ä¹Ÿæ˜¯å­˜åœ¨æ ˆä¸­çš„ å¯¹æ­¤ï¼Œæ‰€ä»¥äººéƒ½è¯´==æ¯”è¾ƒçš„æ˜¯åœ°å€ï¼Œè€Œequalsæ¯”è¾ƒçš„æ˜¯å€¼ é‚£ä¹ˆæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œè¿™æ ·çš„è¯´æ³•ç½®åŸºæœ¬æ•°æ®ç±»å‹byteã€shortã€intã€longã€doubleã€floatäºä½•åœ°ï¼Ÿä»–ä»¬æœ‰æŒ‡å‘å †ä¸­å¯¹è±¡çš„åœ°å€å—ï¼Ÿ æ‰€ä»¥è¯´ï¼Œæˆ‘è§‰å¾—å­˜åœ¨æ ˆä¸­çš„ä¸ç®¡æ˜¯æŒ‡å‘å¯¹è±¡çš„åœ°å€ï¼Œè¿˜æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æœ¬èº«çš„å€¼ï¼Œéƒ½æ˜¯è¿™ä¸ªå˜é‡å­˜å‚¨çš„å€¼ï¼Œè€Œå­˜åœ¨äºå †ä¸­çš„çœŸæ­£å¯¹è±¡ï¼Œä¿å­˜çš„å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„å†…å®¹ï¼ˆåŒ…æ‹¬å…¶æ‹¥æœ‰çš„å±æ€§ã€è¡Œä¸ºæ–¹æ³•ç­‰ï¼Œéƒ½æ˜¯è¿™ä¸ªå¯¹è±¡çš„å†…å®¹ï¼‰ å¦‚æœä½ æœ‰æ›´æœ‰åŠ©äºè‡ªå·±ç†è§£çš„æ¦‚å¿µï¼Œé‚£æ›´å¥½ å¥½äº†ï¼Œä¸Šé¢çš„è¯´æ³•å¯èƒ½è·³çš„æœ‰ç‚¹å¿«ï¼Œä¸è¿‡æ²¡åŠæ³•ï¼Œè¿™é‡Œæ˜¯è¦è¯´å°è£…ç±»Integerï¼Œå…³äºè™šæ‹Ÿæœºçš„å†…å­˜æ¨¡å‹ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº† ä¸‰ã€å®éªŒå®å½•å¥½äº†ï¼Œæ‰¯äº†é‚£ä¹ˆå¤šï¼Œè¿˜æ²¡çœŸæ­£è¿›å…¥è¯é¢˜ï¼Œæƒ³å–·å°±å–·å§ é—®é¢˜ç°è±¡ç°åœ¨æ¥è¯´ä¸€ä¸‹è¿™ä¸ªé—®é¢˜çš„ç°è±¡ï¼š 1. å…ˆçœ‹int123int a = 1;int b = 1;System.out.println("int a == int b ç»“æœï¼š"+(a == b)); è¿™ä¸ªç»“æœä¸ç”¨å¤šè€ƒè™‘ï¼Œä¸ºtrueæ˜¯å§ï¼Ÿ 2. å†çœ‹Integer123Integer c = 1;Integer d = 1;System.out.println("Integer c == Integer d ç»“æœï¼š"+(c == d)); å¥½ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰è¯´çš„ï¼Œ==æ¯”è¾ƒçš„æ˜¯cå’Œdçš„å€¼ï¼ˆæ ˆä¸­çš„å€¼ï¼‰ï¼Œ é‚£ä¹ˆè¿™é‡Œåˆ†æä¸‹ï¼šæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªIntegerå¯¹è±¡cï¼Œç»™è¿™ä¸ªå¯¹è±¡èµ‹å€¼ä¸º1ï¼Œç„¶åæˆ‘ä»¬åˆåˆ›å»ºä¸€ä¸ªå¯¹è±¡dï¼Œè¿™ä¸ªå¯¹è±¡ä¹Ÿèµ‹å€¼ä¸º1ï¼Œç„¶åç”¨==æ¯”è¾ƒcå’Œdï¼Œæˆ‘ä»¬æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡å­˜åœ¨æ ˆä¸­çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯cå’ŒdçœŸæ­£çš„å€¼ï¼ˆæŒ‡å‘å¯¹è±¡çš„åœ°å€ï¼‰ ç»“æœå¦‚ä½•ï¼Ÿ å¼ï¼Œæ˜¯trueï¼Œå¥½äº†ï¼Œæš‚ä¸”åˆ°è¿™ï¼Œå…ˆä¸è®¨è®ºï¼Œæ¥ä¸‹æ¥çœ‹å¦ä¸€ä¸ªå®éªŒï¼š 3.å†çœ‹ä¸€æ¬¡Integer ç§ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä»€ä¹ˆï¼Ÿ falseå”‰ï¼Œåˆšåˆšè¿˜æ˜¯trueçš„ï¼Œä¸ºä»€ä¹ˆå˜æˆfalseäº†å‘¢ï¼Ÿ é—®é¢˜ä¾æ—§ä¿ç•™ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹equals() 4.çœ‹çœ‹equals() ä¹‹å‰è¯´äº†ï¼Œequals()æ˜¯æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡å†…å®¹æ˜¯å¦å®Œå…¨ä¸€è‡´ æˆ‘ä»¬çœ‹çœ‹ç”¨equalsæ¯”è¾ƒè¿™ä¸¤ç§æƒ…å†µçš„ç»“æœ trueï¼Œä¸¤ä¸ªéƒ½æ˜¯trueï¼Œè¯´æ˜ä¸¤ä¸ªå¯¹è±¡å†…å®¹å®Œå…¨ä¸€è‡´ã€‚ æŸ¥æ‰¾åŸå› æ–­ç‚¹è°ƒè¯• æˆ‘ä»¬ä¸€èˆ¬é‡åˆ°é—®é¢˜é¦–å…ˆæƒ³åˆ°çš„æ˜¯æ–­ç‚¹è°ƒè¯•ï¼Œè¿™æ²¡é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥èµ°ä¸€æ³¢çœ‹çœ‹ æ‰“ä¸Šæ–­ç‚¹ï¼Œè¿›å…¥è°ƒè¯•ï¼Œç„¶ååˆ†æ­¥æ¥çœ‹ï¼Œæ…¢æ…¢è§£æ æ³¨æ„çœ‹è¿™å¼ å›¾çš„å‡ ä¸ªç‚¹ï¼Œæˆ‘ä»¬èµ°åˆ°cã€dä¸¤ä¸ªIntegerå¯¹è±¡åˆ›å»ºç»“æŸï¼Œ èƒ½å¤Ÿåœ¨Variablesä¸­çœ‹åˆ°ï¼Œå·²ç»åˆ›å»ºå¥½äº†cã€dä¸¤ä¸ªå¯¹è±¡ï¼Œå€¼éƒ½æ˜¯1 æ³¨æ„çœ‹ä¸€ä¸‹æ‹¬å·ä¸­ï¼Œè¿™é‡Œæ ‡æ˜äº†cã€dä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯Integerå¯¹è±¡ï¼Œè€Œè¿™ä¸¤ä¸ªå¯¹è±¡çš„è®°å½•ç¼–å·éƒ½æ˜¯525 okï¼Œç»§ç»­å¾€ä¸‹èµ° è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°ï¼Œæœ‰åˆ›å»ºäº†eã€fä¸¤ä¸ªå€¼ä¸º1111çš„Integerå¯¹è±¡ï¼Œè®°å½•ç¼–å·åˆ†åˆ«æ˜¯528ï¼Œ529 åˆ°æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿçœ‹å‡ºæ¥äº†å§ æ²¡é”™ï¼Œåœ¨ç»™Integerçš„ä¸¤ä¸ªå¯¹è±¡éƒ½èµ‹å€¼ä¸º1çš„æ—¶å€™ï¼Œcã€dä¸¤ä¸ªå˜é‡çš„å€¼ä¿å­˜çš„åœ°å€æ˜¯æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡çš„(525) è€Œèµ‹å€¼ä¸º1111çš„æ—¶å€™ï¼Œä¸¤ä¸ªå˜é‡çš„å€¼ä¿å­˜çš„åœ°å€åˆ†åˆ«æŒ‡å‘ä¸åŒçš„ï¼ˆ528å’Œ529ï¼‰ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆc==dä¸ºtrueï¼Œè€Œe==fä¸ºfalse ä¸€æ­¥ä¸€æ­¥å¯ä»¥å½“æ˜¯åºŸè¯ åˆ°æ­¤ï¼Œå¹¶æ²¡æœ‰ç»“æŸï¼Œå¹¶ä¸æ˜¯æ‰¾åˆ°ä¸ºä»€ä¹ˆc==dä¸ºtrueï¼Œe==fä¸ºfalseæ˜¯å› ä¸ºå‰è€…æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œåè€…æ˜¯ä¸åŒå¯¹è±¡å°±ç»“æŸäº†ã€‚è¿™ä¹Ÿä»…ä»…æ˜¯çœ‹åˆ°äº†è¡¨è±¡åŸå›  ç”±æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥å¼•å‘å¦ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆåŒæ ·æ˜¯ç»™Integerçš„å¯¹è±¡èµ‹å€¼ï¼Œéƒ½èµ‹å€¼ä¸º1çš„æ—¶å€™æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œèµ‹å€¼ä¸º1111çš„æ—¶å€™ç¡®å®ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Ÿ è¿™ç‚¹æ˜¯å¯¹äºæ— ä»ä¸‹æ‰‹çš„äººæ¥è¯´ï¼Œæ€è€ƒåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåŠï¼Ÿæœ‰ç»éªŒçš„äººè‚¯å®šäºŒè¯ä¸è¯´å°±å»çœ‹æºç å»äº†ï¼Œæ²¡é”™ï¼Œç­”æ¡ˆè‚¯å®šæ˜¯åœ¨Integerçš„æºç ä¸­ã€‚ åˆšè¿›æºç ä¸­åˆçœ‹äº†ä¸€çœ¼ï¼ŒIntegerç±»ä¸­æœ‰1600è¡Œå·¦å³çš„ä»£ç ï¼Œæˆ‘ä»¬æ€ä¹ˆæ‰¾ï¼Ÿå¾ˆå¤´ç–¼ï¼Œæ˜¯é‚£äº›ä»£ç å¼•èµ·çš„ä¸Šé¢çš„è¿™ä¸ªé—®é¢˜çš„ï¼Ÿæˆ‘ä»¬ä¸çŸ¥é“ã€‚ è¿™æ ·æˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿæœ‰ç§æ— å¤´è‹è‡èˆ¬çš„æ…Œä¹±æ„Ÿå§ï¼Ÿ ä¸ç”¨ç€æ€¥ï¼æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ideæ–­ç‚¹è°ƒè¯•ä¸­çš„ä¸€ä¸ªå°å°çš„ä¾¿åˆ©åŠŸèƒ½ï¼Œæœ‰äººæ³¨æ„åˆ°è°ƒè¯•çš„æ—¶å€™ï¼ŒVariablesè§†å›¾ä¸­ï¼Œæˆ‘ä»¬æ¯æœ‰ä¸€ä¸ªè¡Œä¸ºè°ƒç”¨ï¼Œå°±ä¼šæ ‡è¯†å‡ºè¿™ä¸ªè¡Œä¸ºä»¥åŠå…¶å®ä½“å¯¹è±¡ï¼Œä¸‹é¢çœ‹ä¸€ç»„å›¾ï¼Œæ…¢æ…¢ç†è§£ æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°ï¼Œç¬¬ä¸€å¼ å›¾ï¼Œä¹Ÿå°±æ˜¯æˆ‘ç»™å¯¹è±¡cèµ‹å€¼çš„æ—¶å€™æ‰€è°ƒç”¨çš„è¡Œä¸ºæ–¹æ³•å°±æ˜¯ç¼–å·ä¸º525çš„Integerå¯¹è±¡çš„æ–¹æ³•valueOf(int)â€”-å¯¹è±¡dä¹Ÿæ˜¯ ç¬¬ä¸‰å¼ å›¾ä¸ºäº†æ›´å…¨é¢ï¼Œæˆ‘å°±å±•ç¤ºäº†ä¸€ä¸‹è¾“å‡ºå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå…¶å®è¿™è¡Œä»£ç çš„è¡Œä¸ºå°±æ˜¯StringBufferçš„toStringæ–¹æ³•ï¼Œå› ä¸ºprintln()å…¥å‚æ˜¯Stringç±»å‹ï¼ˆæ‹¼æ¥å­—ç¬¦ä¸²çš„æ—¶å€™é»˜è®¤ä½¿ç”¨äº†StringBufferæ¥è¿›è¡Œæ‹¼æ¥ï¼Œæ˜¯ä¸ºäº†æ•ˆç‡ï¼Œå­—ç¬¦ä¸²çš„é—®é¢˜è¿™é‡Œä¸è®¨è®ºï¼‰ ä¸ºäº†æ›´å…¨é¢ï¼Œæˆ‘ä»¬å°±ä¸¾ä¾‹ä¸‰ç§ï¼Œæ‰€ä»¥å°±åˆåŠ äº†ä¸€ä¸ªåˆ«çš„ç±»å‹Dateã€‚èƒ½å¤Ÿåœ¨æœ€åä¸€å¼ å›¾çœ‹åˆ°ï¼Œä¹Ÿæœ‰ä¸€ä¸ªè¡Œä¸ºï¼Œæ˜¯ç±»åŠ è½½è¡Œä¸ºã€‚ å¯èƒ½å¤§å®¶éƒ½çœ‹åˆ°ä¸åŒçš„å¯¹è±¡çš„è¡Œä¸ºï¼Œideç»™æˆ‘ä»¬å±•ç¤ºçš„ä¿¡æ¯ä¹Ÿä¸åŒï¼Œç”šè‡³æœ‰äº›ä¹±ï¼Œä¸è¿‡é‚£ä¹Ÿæ˜¯æ²¡æœ‰åŠæ³•çš„ï¼Œå®ƒåªä¼šç»™æˆ‘ä»¬å±•ç¤ºæœ€è¿‘æœ‰å½±å“çš„è¡Œä¸ºï¼Œå¦‚æˆ‘ä»¬ä»£ç ä¸­Integer c = 1ï¼Œå…¶å®è¿™ä¸€è¡Œä»£ç æœ‰è¿™ä¹ˆå‡ ä¸ªè¡Œä¸ºï¼šå£°æ˜Integerå¯¹è±¡cï¼Œå®ä¾‹åŒ–å¯¹è±¡cï¼Œç„¶åç»™cèµ‹å€¼ï¼Œè€Œæˆ‘ä»¬ä¸Šé¢å±•ç¤ºçš„æ˜¯æœ€åä¸€ä¸ªç»™cèµ‹å€¼çš„valueOf(int)ã€‚ æ‰€ä»¥ï¼Œå¦‚æœæœ‰ä¸çŸ¥é“è¯¥æ€ä¹ˆå»çœ‹æºç çš„ï¼Œå¯ä»¥å€ŸåŠ©è¿™ä¸€ç‚¹æ¥å»æºç é‡Œé¢çœ‹ä¸€çœ‹ï¼Œæ¯•ç«Ÿå¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹æ‰¾åˆ°è·Ÿæˆ‘ä»¬ç¨‹åºæœ‰æœ€ç›´æ¥å…³ç³»çš„æ–¹æ³•ï¼Œç„¶åä»¥æ­¤ä¸ºèµ·ç‚¹ï¼Œæ…¢æ…¢å¾€é‡Œçœ‹ æŸ¥çœ‹æºç åœ¨è°ƒè¯•ä¸­æˆ‘ä»¬èƒ½çœ‹åˆ°ï¼Œè°ƒç”¨Integerçš„æ—¶å€™è°ƒç”¨äº†valueOf(int)è¿™ä¸ªæ–¹æ³•ï¼Œé‚£å°±æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ç©¶ç«Ÿæœ‰ä»€ä¹ˆç¥å¥‡çš„åœ°æ–¹ï¼š æ‰“å¼€Integerç±»çš„æºç ï¼Œæ‰¾åˆ°valueOf(int) åœ¨Integerç±»çš„æºç ä¸­ï¼Œé‡è½½äº†å¤šä¸ªvalueOfæ–¹æ³•ï¼Œä¸è¿‡éƒ½æ˜¯è°ƒç”¨äº†valueOf(int i)çš„æ–¹æ³•æ¥å¤„ç†çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦çœ‹è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥äº† åœ¨æºç ä¸­èƒ½å¤Ÿçœ‹åˆ°ï¼šå½“èµ‹å€¼iåœ¨IntegerCache.lowå’ŒIntegerCache.highä¹‹é—´ï¼ˆäºŒè€…éƒ½åŒ…æ‹¬ï¼‰çš„æ—¶å€™ï¼Œæ˜¯ç›´æ¥è¿”å›å·²å­˜åœ¨çš„IntegerCache.cache[index]ä¸­çš„å€¼ï¼ˆæŸä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œå¦åˆ™æ‰ä¼šæ–°å»ºï¼ åˆ°äº†è¿™ä¸€æ­¥ï¼Œæˆ‘æƒ³å·®ä¸å¤šåº”è¯¥å·²ç»æ˜ç™½æ˜¯æ€ä¹ˆå›äº‹äº†ã€‚ è¿™é‡Œæ˜¯Integeråšçš„ä¸€ä¸ªç¼“å­˜ï¼Œé¢„å…ˆç¼“å­˜ä¸€éƒ¨åˆ†å€¼ï¼Œå¦‚æœç¨‹åºè¦ä½¿ç”¨çš„å€¼åœ¨å…¶ä¸­ï¼Œé‚£ä¹ˆç›´æ¥å°±æ‹¿æ¥ç”¨ï¼Œå¦åˆ™çš„è¯æ‰ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡èµ‹å€¼è¿”å›ã€‚ æ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿåˆ¤æ–­å‡ºæ¥ï¼Œå½“ç»™Integer aèµ‹å€¼1çš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰è¶…å‡ºIntegerCache.cacheçš„èŒƒå›´çš„ï¼Œè€Œ1111åˆ™è¶…å‡ºäº†ï¼Œæ‰€ä»¥å¯¼è‡´ä¸€ç§æ˜¯ç›¸åŒå¯¹è±¡ï¼Œä¸€ç§æ˜¯ä¸åŒå¯¹è±¡çš„ç»“æœã€‚ Integerä¸­æ•´æ•°ç¼“å­˜ä¸è¿‡è¿™ä¸ªèŒƒå›´åˆ°åº•æ˜¯å¤šå°‘å‘¢ï¼Ÿ é‚£ä¹ˆæ—¢ç„¶æåˆ°è¿™ä¸ªé—®é¢˜äº†ï¼Œæˆ‘ä»¬å°±æ·±ç©¶ä¸€ä¸‹è¿™ä¸ªIntegerCache.cacheåˆ°åº•æ€ä¹ˆå›äº‹ï¼š é‚£ä¹ˆå°±æ¥çœ‹çœ‹IntegerCacheçš„æºç ï¼š åœ¨Integerç±»ä¸­æœ‰ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œå°±æ˜¯IntegerCache è¿™ä¸ªç±»çš„ä½œç”¨å°±æ˜¯ä¸ºIntegerç±»æä¾›ä¸€éƒ¨åˆ†intç±»å‹çš„ç¼“å­˜ï¼Œé¿å…äº†é‡å¤åˆ›å»ºå¯¹è±¡çš„éº»çƒ¦ã€‚ ä¸‹é¢è¯·çœ‹æºç ï¼š åœ¨æºç ä¸­æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°ï¼Œé¦–å…ˆIntegerCacheè®¾å®šäº†ç¼“å­˜æœ€å°å€¼ä¸º-128(å¯¹äºè¿™ä¸ªå€¼ï¼Œæˆ‘æƒ³å¤§å®¶åº”è¯¥å·²ç»çŒœåˆ°äº†ä»€ä¹ˆ) æ²¡é”™ï¼Œè¿™æ˜¯byteçš„æœ€å°ä¸´ç•Œç‚¹ï¼ˆæœ€å°å€¼ï¼‰ é‚£ä¹ˆhighä¸ç”¨æƒ³äº†ï¼Œå¾ˆå¤§å¯èƒ½å°±æ˜¯127äº† å½“ç„¶ï¼Œçœ‹äº†æºç ä¹Ÿèƒ½çœ‹åˆ°äº†ï¼Œåœ¨é™æ€å—ä¸­ç»è¿‡å¤„ç†ï¼Œæœ€å¤§å€¼highä¹Ÿæ˜¯127 æ‰€ä»¥åœ¨valueOfä¸­ï¼Œå…¥å‚iå¦‚æœæ»¡è¶³-128&lt;=i&lt;=127ï¼Œé‚£ä¹ˆè¿”å›çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªï¼Œæ•°ç»„cacheä¸­çš„æŸä¸€ä¸ªï¼Œå¦åˆ™å°±æ˜¯new ä¸€ä¸ªå¯¹è±¡ æ‰€ä»¥å°±ä¼šå‡ºç°å¦‚æœIntegerçš„å€¼æ˜¯åœ¨-128~127ä¹‹é—´çš„æ—¶å€™ç”¨==åˆ¤æ–­ä¸ºtrueï¼Œè€Œå…¶ä»–çš„å€¼==ä¸ºfalseçš„ç°è±¡ å…³äºIntegerç¼“å­˜è€Œå¯¹äºIntegerç¼“å­˜å¤§å°çš„è®¾ç½®ï¼Œä¹Ÿæ˜¯å¯ä»¥è‡ªå·±è®¾å®šçš„ å› ä¸ºjavaä¸æ˜¯ç›´æ¥è¿è¡Œåœ¨æœ¬åœ°æ“ä½œç³»ç»Ÿä¸Šçš„ï¼Œè€Œæ˜¯è¿è¡Œåœ¨jvmä¸Šçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ›´æ”¹jvmçš„è¿è¡Œå‚æ•°æ¥æ”¹å˜ã€‚ è¿™ä¸ªç½‘ä¸Šçœ‹çœ‹å°±å¥½äº†ï¼Œæ¯•ç«Ÿå°†ç¼“å­˜èŒƒå›´å˜å¤§ï¼Œé‚£ä¹ˆæ„å‘³ç€å†…å­˜å¼€é”€åŠ å‰§ï¼Œå¹¶ä¸”è¿™éƒ¨åˆ†ç¼“å­˜ä¸ä¼šè¢«gcå›æ”¶çš„]]></content>
      <categories>
        <category>java</category>
        <category>æ•°æ®ç±»å‹</category>
        <category>æ•´å‹</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jpaè‡ªåŠ¨æ˜ å°„javaå®ä½“ç±»ä¸æ•°æ®åº“è¡¨]]></title>
    <url>%2Fit233.github.io%2F2018%2F11%2F28%2Fjpa%E8%87%AA%E5%8A%A8%E6%98%A0%E5%B0%84java%E5%AE%9E%E4%BD%93%E7%B1%BB%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[â€‹ ä¹‹å‰æœ‰è¯´è¿‡jpaä¸å®ç”¨å®ä½“ç±»ï¼Œé‚£æ˜¯æŸç§ç‰¹æ®Šæƒ…å†µçš„æ—¶å€™çš„éœ€è¦ â€‹ è€Œå¤§å¤šæ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬åç«¯ä»£ç è¿˜æ˜¯éœ€è¦æœ‰ä¸æ•°æ®åº“å¯¹åº”çš„å®ä½“ç±»çš„ â€‹ è¿™æ ·æ–¹ä¾¿åç«¯è¿›è¡Œç®¡ç†æ•°æ®ï¼Œè€Œä¸”æ›´æ˜“äºä½¿ç”¨jpaæ¡†æ¶ è¿™æ¬¡åºŸè¯ä¸å¤šè¯´ï¼Œæ¯•ç«Ÿæ—¶é—´ä¸å¤šï¼Œç®€å•åšä¸€äº›è®°å½•ï¼Œåæ­£å¯¹äºè¿™ä¸ªæ¡†æ¶è¿˜ä¸å¤ªç†Ÿæ‚‰ï¼æœ‰æœºä¼šå†æ¥å¥½å¥½ç ”ç©¶ä¸€ç•ª ä¸‹é¢ç›´æ¥è¯´å‡ºå¦‚ä½•å»å†™ï¼ŒåŸç†ï¼Œå®éªŒä»€ä¹ˆçš„å°±å…ˆå…äº† å®ä½“ç±»123456789101112131415@Data@NoArgsConstructor@AllArgsConstructor@Builder@Entity@Table(name = "ssprt_config",uniqueConstraints = &#123;@UniqueConstraint(name = "UK_SSPRTCONFIG_TYPE",columnNames = "type")&#125;)public class SsprtConfig &#123; @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; @Column(name = "type",length = 50) private String type; @Column(name = "value",length = 1) private Integer value;&#125; ç®€å•è§£é‡Šï¼š @Dataï¼šä¸ç”¨è¯´äº†ï¼Œå°±æ˜¯getterã€setteræ–¹æ³• @NoArgsConstructorï¼šæ— å‚æ„é€  @AllArgsConstructorï¼šæ‰€æœ‰å‚æ•°çš„æ„é€  æ³¨æ„2å’Œ3ä¸¤ä¸ªæ³¨è§£ï¼Œæœ€å¥½åŠ ä¸Šï¼Œå› ä¸ºæˆ‘ä»¬åˆ©ç”¨jpaæŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼ŒæŸ¥å®Œæ•°æ®é€šè¿‡æ„é€ è¿›è¡Œç»™å®ä½“ç±»èµ‹å€¼ï¼Œæ²¡æœ‰çš„è¯ä¼šæŠ¥æœ‰å…³æ„é€ å‡½æ•°çš„é”™è¯¯ @Builderï¼šbuilderåˆ›å»ºå¯¹è±¡ï¼Œåˆ©ç”¨é™æ€æ–¹æ³•builderæ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸ç”¨newï¼Œæä¾›é“¾å¼setterèµ‹å€¼ï¼Œæ–¹ä¾¿å¿«æ· @Entityï¼šæ ‡æ³¨è¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼Œæ˜¯ä¸€ä¸ªä¸æ•°æ®åº“æ˜ å°„çš„å®ä½“ç±» @Tableï¼šæ ‡æ³¨è¿™ä¸ªç±»æ‰€å¯¹åº”çš„æ•°æ®åº“ä¸­çš„è¡¨åï¼ŒåŒæ—¶ï¼Œå¦‚æœæ•°æ®åº“ä¸­æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„è¡¨ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆè¯¥è¡¨ä¸ä¹‹å¯¹åº”ï¼ˆè¿™ä¸ªè¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ç­–ç•¥ï¼Œä¸ç»†è¯´äº†ï¼Œå› ä¸ºæˆ‘ä¹Ÿåªæ˜¯çŸ¥é“ï¼Œå¹¶æ²¡æœ‰ç ”ç©¶ï¼‰ nameï¼šä¸æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆä½¿ç”¨é»˜è®¤çš„è¯¥å®ä½“ç±»çš„çŸ­ç±»åã€‚ uniqueConstraintsï¼šå”¯ä¸€é”®ï¼ŒæŒ‡å®šæŸä¸ªåˆ—columnNames @Idï¼šæ ‡æ³¨ä¸ºä¸»é”® @GeneratedValueï¼šä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œ TABLEï¼šä½¿ç”¨è¡¨ä¿å­˜idå€¼ IDENTITYï¼šidentitycolumn SEQUENCR ï¼šsequence AUTOï¼šæ ¹æ®æ•°æ®åº“çš„ä¸åŒä½¿ç”¨ä¸Šé¢ä¸‰ä¸ª @Columnï¼šç”Ÿå‘½è¯¥å­—æ®µä¸æ•°æ®åº“è¡¨å­—æ®µçš„æ˜ å°„å…³ç³»ï¼Œ nameæŒ‡è¡¨å­—æ®µåï¼ŒlengthæŒ‡æ•°æ®é•¿åº¦ï¼Œæ³¨æ„æ•°æ®ç±»å‹ä½¿ç”¨å°è£…ç±»]]></content>
      <categories>
        <category>java</category>
        <category>æ¡†æ¶</category>
        <category>JPA</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[canvas-camera]]></title>
    <url>%2Fit233.github.io%2F2018%2F11%2F21%2Fcanvas-camera%2F</url>
    <content type="text"><![CDATA[è¿™é‡Œæ˜¯è¿ç”¨canvasæ¥å®ç°ç”µè„‘æ‘„åƒå¤´æ‹ç…§çš„åŠŸèƒ½çš„jsä»£ç ã€‚ çº¯å±ä¸ªäººå…´è¶£ ä»¥ä¸‹æ˜¯ä¸ªäººå°è£…çš„jsï¼Œå¥½åçš†æ˜¯å¦‚æ­¤ ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112/** * * è°ƒç”¨æ‘„åƒå¤´ * ä¼ å…¥å‚æ•°ï¼šå¿…é¡» * canvasï¼šç”»å¸ƒï¼Œä¼ å…¥çš„å‚æ•°ä¸ºid,class,nameæˆ–è€…tagNameå››é€‰ä¸€ï¼Œæ³¨æ„ï¼šåªéœ€è¦ä¼ å…¥åç§°å³å¯,ä¸éœ€è¦ç¬¦å·ï¼Œ * ä¾‹å¦‚:&lt;canvas id = "myCanvas"&gt;&lt;/canvas&gt;,é‚£ä¹ˆå…¥å‚å°±æ˜¯myCanvas * videoï¼šå½±åƒï¼Œä¼ å…¥idï¼Œclassï¼Œnameï¼Œæˆ–è€…tagNameå››é€‰ä¸€ * * ä¼ å…¥å‚æ•°ï¼šéå¿…é¡» * open ï¼šæ‰“å¼€æ‘„åƒå¤´åŠŸèƒ½çš„æŒ‰é’®idï¼Œclassï¼ŒName * snap ï¼š æ‹æ‘„åŠŸèƒ½çš„æŒ‰é’®idï¼Œclassæˆ–è€…name * closeï¼š å…³é—­æ‘„åƒå¤´åŠŸèƒ½çš„æŒ‰é’®idï¼Œclassæˆ–è€…name * * æ³¨æ„ï¼šå¦‚æœä¸ä¼ å…¥æŒ‰é’®åŠŸèƒ½ï¼Œä¼šæœ‰openï¼Œsnapï¼Œcloseä¸‰ä¸ªfunctionæ¥æä¾›ç›¸åº”çš„åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨canCamera.open()ç­‰æ¥è°ƒç”¨ * * åŒæ—¶ï¼Œæä¾›é“¾å¼è°ƒç”¨ * * è°ƒç”¨ç¤ºä¾‹ï¼š * var cc = canCamera(&#123; * canvas:"myCanvas", * video:"myVideo", * open:"start", * snap:"getPhotoBtn", * close:"closeBtn" * &#125;) * * æˆ–è€…ï¼š * * var cc = canCamera(&#123; * canvas:"myCanvas", * video:"myVideo" * &#125;) * //ç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶ * document.getElementById("start").addEventListener('click',cc.open); * document.getElementById("getPhotoBtn").addEventListener('click',cc.snap); * document.getElementById("closeBtn").addEventListener('click',cc.close); * */(function (window, document) &#123; var canCamera = function (obj) &#123; var $this = canCamera $this.canvas = document.getElementById(obj.canvas) || document.getElementsByName(obj.canvas)[0] || document.getElementsByClassName(obj.canvas)[0] || document.getElementsByTagName(obj.canvas)[0] $this.video = document.getElementById(obj.video) || document.getElementsByName(obj.video)[0] || document.getElementsByClassName(obj.video)[0] || document.getElementsByTagName(obj.video)[0] $this.openBtn = document.getElementById(obj.open) || document.getElementsByName(obj.open)[0] || document.getElementsByClassName(obj.open)[0] $this.snapBtn = document.getElementById(obj.snap) || document.getElementsByName(obj.snap)[0] || document.getElementsByClassName(obj.snap)[0] $this.closeBtn = document.getElementById(obj.close) || document.getElementsByName(obj.close)[0] || document.getElementsByClassName(obj.close)[0] $this.context = $this.canvas.getContext('2d') $this.MediaStreamTrack = null $this.open = function () &#123; $this.video.style.display = "block"; $this.canvas.style.display = "none"; if (navigator.mediaDevices &amp;&amp; navigator.mediaDevices.getUserMedia) &#123; navigator.mediaDevices.getUserMedia(&#123; "video": true &#125;).then(function (stream) &#123; $this.MediaStreamTrack = typeof stream.stop === 'function' ? stream : stream.getTracks()[1]; $this.video.srcObject = stream; $this.video.play(); &#125;).catch(function (err) &#123; console.log(err); &#125;); &#125; else if (navigator.getMedia) &#123; navigator.getMedia(&#123; "video": true &#125;).then(function (stream) &#123; console.log(stream); $this.MediaStreamTrack = stream.getTracks()[1]; $this.video.srcObject = (window.webkitURL).createObjectURL(stream); $this.video.play(); &#125;).catch(function (err) &#123; console.log(err); &#125;); &#125; else &#123; alert("æµè§ˆå™¨ä¸æ”¯æŒï¼"); &#125; return $this &#125;; $this.snap = function () &#123; var w = $this.video.offsetWidth, h = $this.video.offsetHeight; $this.video.style.display = "none"; $this.canvas.style.display = "block"; $this.context.drawImage($this.video, 0, 0, w, h); return $this &#125;; $this.close = function () &#123; $this.MediaStreamTrack &amp;&amp; $this.MediaStreamTrack.stop(); return $this &#125;; if ($this.openBtn) $this.openBtn.addEventListener('click', $this.open); if ($this.snapBtn) $this.snapBtn.addEventListener('click', $this.snap); if ($this.closeBtn) $this.closeBtn.addEventListener('click', $this.close); window.canCamera = canCamera || new canCamera() return $this &#125; window.canCamera = canCamera || new canCamera()&#125;)(window, document)]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>js</category>
        <category>HFJs</category>
      </categories>
      <tags>
        <tag>å…´è¶£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯ç”»å›¾Canvasç®€å•è¿ç”¨]]></title>
    <url>%2Fit233.github.io%2F2018%2F11%2F19%2F%E5%89%8D%E7%AB%AF%E7%94%BB%E5%9B%BECanvas%E7%AE%80%E5%8D%95%E8%BF%90%E7%94%A8%2F</url>
    <content type="text"><![CDATA[ä¸€ã€å‰è¨€ æœ‹å‹é‡åˆ°çš„æƒ…å†µï¼Œå±äºå‰ç«¯çš„é—®é¢˜ï¼Œæ˜¯éœ€è¦æ‰“å¼€æ‘„åƒå¤´æ¥æ‹ç…§ï¼Œå…³äºè¿™ä¸ªé—®é¢˜ï¼Œä»–æ‰¾åˆ°äº†æˆ‘è®©æˆ‘æ¥å¸®ä»–è§£å†³ï¼Œä¸è¿‡ç”±äºæˆ‘çš„å‰ç«¯ä¹Ÿæ˜¯å±äºé‚£ç§åŠåŠå­æ°´å¹³ï¼Œæ‰€ä»¥åœ¨è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å‚è€ƒäº†ç½‘ä¸Šçš„ä¸å°‘èµ„æ–™å’Œæ¡ˆä¾‹ï¼Œä¸è¿‡è¿˜å¥½çš„æ˜¯å› æ­¤ä¹Ÿäº†è§£äº†ä¸å°‘çŸ¥è¯†ï¼Œæ‰€ä»¥å‡†å¤‡æ•´ç†ä¸€ä¸‹ï¼Œåšä¸ªè®°å½• è¿™ç¯‡ä¸»è¦æ˜¯å‰ç«¯canvasç”»å¸ƒåŠŸèƒ½ï¼Œå¯èƒ½çŸ¥è¯†ä¸å¤Ÿå…¨é¢ï¼Œä½†æ˜¯è¦å®ç°æ‹ç…§åº”è¯¥æ˜¯æ²¡é—®é¢˜äº† é™¤äº†å‚ç…§å›¾åƒèµ„æºè¿›è¡Œåˆ©ç”¨canvasç”»å›¾ä¹‹å¤–ï¼Œcanvasè¿˜æœ‰å¾ˆå¤šåŠŸèƒ½æä¾›ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç›´æ¥åœ¨é¡µé¢ä¸Šè¿›è¡Œæ‰‹å·¥ç»˜ç”»ï¼Œè¿™äº›åŠŸèƒ½è¿™é‡Œå°±ä¸å±•ç¤ºäº†ï¼Œå› ä¸ºæˆ‘ä¹Ÿå¿˜è®°äº†ï¼Œåªæ˜¯ä¹‹å‰åˆšå­¦å‰ç«¯çš„æ—¶å€™æœ‰æ£å¼„è¿‡ï¼Œä¸è¿‡ç°åœ¨ä¸»è¦åšåå°å¼€å‘ï¼Œæ‰€ä»¥å‰ç«¯æ°´å¹³å°±ä¸€èˆ¬èˆ¬ äºŒã€ç”»å›¾ åœ¨å®ç°æ‹ç…§ä¹‹å‰ï¼Œå…ˆæ¥è¯¦ç»†äº†è§£ä¸€ä¸‹canvasç”»å›¾åŠŸèƒ½ï¼Œè¿™æ ·å¯¹äºåé¢æ‹ç…§ä¼šæ›´ç®€å•ä¸€ç‚¹ é¡µé¢å‡†å¤‡ å®ç°canvasç”»å›¾åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€å¼ å›¾ç‰‡ï¼Œä¸ºäº†è¯•éªŒæ•ˆæœï¼Œæˆ‘å°±éšä¾¿æˆªäº†ä¸€å¼ æ¡Œé¢çš„å›¾ç‰‡ åœ¨é¡µé¢ä¸­æˆ‘ä»¬è¦æ”¾ç½®ä¸€å¼ å›¾ç‰‡(å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨å±•ç¤ºåœ¨é¡µé¢ä¸Šï¼Œè¿™ä¸ªjsä»£ç ä¸­ä¼šæ‰©å±•)ï¼Œæ‰€ä»¥éœ€è¦imgæ ‡ç­¾å…ƒç´  æƒ³è¦è¿›è¡Œåœ¨é¡µé¢ç”»å›¾ï¼Œæˆ‘ä»¬è¿˜è¦é€šè¿‡canvasæ ‡ç­¾å…ƒç´ è·å¾—context(ç®€ç§°ï¼Œåé¢å±•ç¤ºå…¨éƒ¨)æ¥å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªåŠŸèƒ½ ç„¶åï¼Œä¸ºäº†è¿›è¡Œæµ‹è¯•ï¼Œæˆ‘ä»¬åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œå½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†å±•ç¤ºçš„å›¾ç‰‡ç”»å‡ºæ¥ htmlä»£ç  æˆ‘ä»¬éœ€è¦çš„htmlä»£ç å¾ˆç®€å•ï¼Œåªæœ‰ä¸‰ä¸ªå…ƒç´ ï¼šimgã€canvasã€button 1234&lt;img src="../imgs/0.png" id="img"&gt;&lt;canvas height="400" width="200" id="canvas1" style="border: 1px solid gray"&gt;&lt;/canvas&gt;&lt;br/&gt;&lt;button id="draw"&gt;ç”»å›¾&lt;/button&gt; jsä»£ç åŠè¯¦è§£ç®€å•åˆ†æ åœ¨ä¸Šä»£ç ä¹‹å‰ï¼Œ å…ˆæ¥è¯´ä¸€ä¸‹æµç¨‹ æˆ‘ä»¬æƒ³è¦å‚ç…§imgå…ƒç´ ä¸­çš„å›¾ç‰‡èµ„æºï¼Œåˆ©ç”¨canvasæ¥å°†å…¶ç”»å‡ºæ¥ é‚£ä¹ˆé¦–å…ˆæˆ‘ä»¬å°±éœ€è¦æ‰¾åˆ°imgå…ƒç´ ä¸­çš„å›¾ç‰‡ï¼Œ å…¶æ¬¡è¿˜è¦æœ‰canvasç”»å›¾çš„å¯¹è±¡ï¼Œ ç„¶åè·å¾—canvasçš„Context æœ€åé…ç½®Contextçš„ç¯å¢ƒå°†imgå›¾ç‰‡ç”»å‡ºæ¥ æ€»ä½“ç®€å•æ¥è¯´å°±è¿™å››æ­¥ï¼Œä¸‹é¢ç›´æ¥ä¸Šä»£ç ï¼Œç„¶åå†è§£é‡Šï¼š jsä»£ç 12345678window.onload = function () &#123; document.getElementById("ckbtn").addEventListener('click', function () &#123; var img = document.getElementById("img"); var cv = document.getElementById('canvas1'); var ct = cv.getContext("2d"); ct.drawImage(img, 0, 0, 200, 400); &#125;);&#125; jsä»£ç è¯¦ç»†è§£é‡Šï¼ˆä»¥åŠè¸©è¿‡çš„å‘å’Œæœªè¸©è¿‡çš„å‘ï¼‰ æ³¨æ„ç‚¹1ã€window.onload è¿™ä¸ªwindow.onloadä¸ç”¨å¤šè§£é‡Šï¼Œå°±æ˜¯åœ¨é¡µé¢åŠ è½½å®Œæˆä¹‹åå†æ‰§è¡Œfuncitonä¸­çš„è¿™æ®µä»£ç  ä¸ºä»€ä¹ˆä¸€å®šè¦è¿™ä¹ˆåšå‘¢ï¼Ÿ é‚£æ˜¯å› ä¸ºæˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„é¡µé¢å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªonloadä¿è¯é¡µé¢å…ˆåŠ è½½å®Œæˆï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼š canvaså…ƒç´ æ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥æˆ‘ä»¬è·å–å…¶domå¯¹è±¡çš„æ—¶å€™æœ‰å¯èƒ½ä¼šå‡ºç°undefined å¦‚æœcanvaså‡ºç°undefinedçš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…ç„¶æ— æ³•è·å¾—è¯¥ç”»å¸ƒä¸‹çš„Contextï¼Œä¹Ÿå°±æ— æ³•å®ç°ç”»å›¾åŠŸèƒ½ é™¤æ­¤ä¹‹å¤–ï¼Œè¿æ°”å¥½ï¼Œæˆ‘ä»¬canvasç”»å¸ƒæ”¾çš„æ¯”è¾ƒé å‰ï¼Œèƒ½å¤Ÿæ‰¾å¾—åˆ°ï¼Œä¸è¿‡æˆ‘ä»¬çŸ¥é“ï¼Œå›¾ç‰‡å±äºå¤–éƒ¨é™æ€èµ„æºï¼ŒåŠ è½½å¯èƒ½æ²¡æœ‰htmlåŸç”Ÿä»£ç å¿«ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬å›¾ç‰‡æ²¡æœ‰åŠ è½½å®Œæˆï¼Œä¹Ÿå¯èƒ½ä¼šå‡ºç°ç”»å›¾å¤±è´¥ ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚æœ‰ä¸€ä¸ªç”»å®¶ï¼Œä»–è¦ä¸ºä¸€ä¸ªäººç”»ä¸€å¹…åƒï¼Œä½†æ˜¯ä¸å·§çš„æ˜¯ï¼Œè¿™ä¸ªäººçªç„¶ä¸´æ—¶æœ‰äº‹ï¼Œä¸èƒ½å‡†æ—¶åˆ°ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªäººè¿˜æ²¡æœ‰åˆ°è¾¾ä¹‹å‰ï¼Œè¿™ä¸ªç”»å®¶æ€ä¹ˆå»ç”»è¿™å¹…ç”»ï¼Ÿä»–æ‹¿ä»€ä¹ˆåšå‚è€ƒå‘¢ï¼Ÿ å†è€…å‘¢ï¼Œæˆ‘ä»¬åˆè¦ç»‘å®šæŒ‰é’®ï¼Œæ‰€ä»¥onloadæœ€å¥½æ˜¯åŠ ä¸Š è¿™é‡Œè¯´äº†é‚£ä¹ˆå¤šï¼Œæˆ‘ä»¬èƒ½å¤ŸçŸ¥é“ï¼Œå¦‚æœæˆ‘ä»¬çœ‹ç€ä»£ç æ²¡æœ‰é”™è¯¯ï¼Œå¹¶ä¸”æ²¡æœ‰æŠ¥é”™ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½æ˜¯å›¾ç‰‡æ²¡æœ‰åŠ è½½å®Œæˆï¼Œå¯¼è‡´æ²¡æ³•ç”»å‡ºå›¾ç‰‡ï¼ˆä¹‹åè¿˜æœ‰ä¸€ä¸ªå¯èƒ½çš„åŸå› ï¼Œåœ¨æ³¨æ„ç‚¹2ï¼‰ æ³¨æ„ç‚¹2ã€canvaså…ƒç´  è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ‰€è¯´çš„canvasç”»å›¾ï¼Œå…¶å®canvasåªæ˜¯ä¸€ä¸ªç”»å¸ƒ,éšçº¦è®°å¾—æ›¾ç»å­¦çš„æ—¶å€™ï¼Œå¥½åƒè¿˜æœ‰ç”»ç¬”ä»€ä¹ˆæ¥ç€ï¼Œè®°ä¸æ¸…äº†ï¼Œä¸çº ç»“äº†ã€ çœŸæ­£å®ç°ç”»å›¾åŠŸèƒ½çš„ï¼Œæ˜¯ç”»ç¬”è€Œä¸æ˜¯ç”»å¸ƒï¼Œè€Œä¹‹å‰è¯´çš„Contextï¼Œæ˜¯ä¸€ç§ç¯å¢ƒï¼Œ è¿™é‡Œæ‰“ä¸ªæ¯”æ–¹ï¼Œcanvasæ˜¯ç”»å¸ƒï¼Œå°±æ˜¯ç”»å®¶ä½¿ç”¨çš„ç”»æ¿ï¼Œå°±æ˜¯æˆ‘ä»¬è¦ç”»å‡ºçš„ç”»çš„å®¹å™¨ é‚£ä¸ªç”»ç¬”æ˜¯ä»€ä¹ˆæ¥ç€ï¼Œå°±æ˜¯ç”¨æ¥è¿›è¡Œç»˜ç”»çš„ï¼Œä¹‹å‰è¯´çš„èƒ½å¤Ÿæ‰‹å·¥ç»˜ç”»ä¹Ÿæ˜¯æ§åˆ¶ç”»ç¬”åœ¨é¡µé¢ä¸Šè¿›è¡Œç»˜ç”» è€Œcontextï¼Œæ˜¯ç¯å¢ƒï¼Œå°±å¥½æ¯”æˆ‘ä»¬ç”»å®¶ç”¨ç”»ç¬”åœ¨ç”»å¸ƒä¸Šç»˜ç”»æ‰€éœ€è¦çš„å› ç´ ï¼Œåœ¨è¿™é‡Œæˆ‘ä¸ªäººå°†å®ƒç†è§£ä¸ºäº†ç”»å®¶ï¼Œå› ä¸ºcontextæä¾›äº†ç”»å›¾å¾ˆå¤šæ–¹æ³•æ¥æ»¡è¶³ç”»å›¾çš„éœ€è¦ã€‚å°±åƒä¸€ä¸ªç”»å®¶ä¸€æ ·å…·å¤‡çš„èƒ½åŠ› è¿™é‡Œç®€å•å±•ç¤ºä¸€ä¸‹contextï¼Œå…³äºcontextè¿™ä¸ªå¯¹è±¡å…·ä½“çš„ä»£ç æœ‰ç‚¹å¤šï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±ç ”ç©¶ 123getContext(contextId: "2d", contextAttributes?: Canvas2DContextAttributes): CanvasRenderingContext2D | null;getContext(contextId: "webgl" | "experimental-webgl", contextAttributes?: WebGLContextAttributes): WebGLRenderingContext | null;getContext(contextId: string, contextAttributes?: &#123;&#125;): CanvasRenderingContext2D | WebGLRenderingContext | null; è¿™é‡Œå¹¶ä¸æ˜¯å¾ˆè¯¦ç»†åœ°è§£é‡Šäº†canvasï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“ï¼Œcanvasæ˜¯å®¹å™¨ï¼Œè¿™é‡Œä¹Ÿä¼šæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰äººé‡åˆ°è¿‡ã€‚ï¼ˆåœ¨åšæ‘„åƒå¤´æ‹ç…§çš„æ—¶å€™é‡åˆ°äº†å°é—®é¢˜ï¼Œæ‰€ä»¥å›å¤´ç ”ç©¶äº†canvasï¼‰ å¦‚æœæˆ‘ä»¬ä¸ºäº†ç¾è§‚ï¼Œä¸å±•ç¤ºcanvasæ¥å ç©ºé—´ï¼Œè€Œè®¾ç½®ä¸ºäº†display:noneï¼Œé‚£ä¹ˆä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®äº†canvasçš„é•¿å®½éƒ½ä¸º0ï¼Œä¼šæ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿ å¯¹äºä»¥ä¸Šä¸¤ç‚¹ï¼Œåœ¨ä¸‹é¢ä¼šæ¡ˆä¾‹å±•ç¤ºç»“æœï¼Œå…ˆçŒœä¸€ä¸‹å§ æ³¨æ„ç‚¹3ã€2ç»´å’Œ3ç»´ç”»å›¾ é€šè¿‡ä¸Šé¢çš„getContext()æ–¹æ³•ï¼Œèƒ½å¤Ÿçœ‹å¾—å‡ºæ¥ï¼Œæˆ‘ä»¬å‡å¦‚ä¼ å…¥çš„æ˜¯â€œ2dâ€è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°±ä¼šè·å¾—CanvasRenderingContext2Dè¿™ä¸ªå¯¹è±¡ åœ¨æ²¡æœ‰çœ‹è¿‡è¿™äº›ä»£ç ä¹‹å‰ï¼Œæˆ‘ä¹Ÿæ›¾ä¸€åº¦è®¤ä¸ºï¼Œæœ‰2då°±æœ‰3dï¼Œæœæ–­ä¸¢ä¸ªâ€3dâ€å‚æ•°è¿›å»ï¼Œå“ˆå“ˆï¼Œè·å¾—nullï¼Œé‚£ä¹ˆæˆ‘ä»¬è‚¯å®šè§‰å¾—ä¸åˆç†ï¼Œæœ‰2dç”»å›¾å°±åº”è¯¥èƒ½ç”»3dçš„å•Šï¼Œå…¶å®webglå°±æ˜¯ç”¨æ¥ç”»3dçš„ï¼Œä¸è¿‡æˆ‘ä¸ä¼šï¼Œä¹Ÿä¸äº†è§£ ä¸è¿‡æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„äº†ï¼Œæ¥ä¸‹æ¥å›¾æ–‡è§£é‡Šæ›´æ¸…æ™° é¦–å…ˆæˆ‘è·å¾—canvasä¹‹åï¼Œé€šè¿‡ä¼ å…¥å‚æ•°3d 1234var cv = document.getElementById('canvas1'); console.log(cv) var ct = cv.getContext("3d"); console.log(ct) è·å¾—çš„ç»“æœä¸ºnull ç„¶è€Œæˆ‘ä»¬å¦‚æœä¼ å…¥çš„æ˜¯â€2dâ€æˆ–è€…â€webglâ€çš„è¯ï¼Œç¡®å®èƒ½å¤Ÿè·å¾—contextçš„ æ³¨æ„äº†ï¼šå¦‚æœæˆ‘ä»¬å…ˆå…¥å‚2dè·å¾—è¿”å›å¯¹è±¡ä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œç„¶åå†å…¥å‚webglä¿å­˜åœ¨å¦ä¸€ä¸ªå˜é‡ä¸­ï¼Œä¼šæ˜¯ä»€ä¹ˆç»“æœï¼Ÿ 123456var cv = document.getElementById('canvas1'); console.log(cv) var ct2d = cv.getContext("2d"); var ctwebgl = cv.getContext("webgl") console.log("ct2d:"+ct2d) console.log("ctwebgl:"+ctwebgl) 12345678910111213141516- ç»“æœå°±æ˜¯å…ˆè·å¾—çš„contextå æ®è¿™ä¸ªç”»å¸ƒï¼Œå†è®¾ç½®å¦ä¸€ä¸ªåˆ™æ²¡ç”¨äº†ï¼Œç›´æ¥ä¸ºnullã€‚è€Œå®˜æ–¹åŸæ³¨é‡Šå¹¶æ²¡æœ‰è§£é‡Šä¸ºä½•ï¼Œæˆ‘ä»¬å¯ä»¥ä»å®˜æ–¹æ³¨é‡Šä¸­å¾—åˆ°çš„ä¿¡æ¯ï¼Œå°±æ˜¯ï¼š- è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æä¾›ç»˜åˆ¶å’Œæ“ä½œæ–‡æ¡£ä¸­ç”»å¸ƒå…ƒç´ ä¸Šçš„å›¾åƒå’Œå›¾å½¢çš„æ–¹æ³•å’Œå±æ€§ã€‚ä¸Šä¸‹æ–‡å¯¹è±¡åŒ…æ‹¬å…³äºé¢œè‰²ã€çº¿å®½ã€å­—ä½“å’Œå…¶ä»–å¯ä»¥åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶çš„å›¾å½¢å‚æ•°çš„ä¿¡æ¯ã€‚ @paramä¸Šä¸‹æ–‡è¦åˆ›å»ºçš„ç”»å¸ƒç±»å‹çš„æ ‡è¯†ç¬¦(ID)ã€‚Internet Explorer 9å’ŒInternet Explorer 10ä»…æ”¯æŒä½¿ç”¨canvas.getContext(â€œ2dâ€)çš„2dç¯å¢ƒ;IE11é¢„è§ˆè¿˜æ”¯æŒ3dæˆ–WebGLä¸Šä¸‹æ–‡ä½¿ç”¨canvas.getContext(â€œå®éªŒ- WebGLâ€);- å¥½åƒå¹¶æ²¡æœ‰ä»€ä¹ˆæ–‡å­—èƒ½è§£é‡Šä¸ºä»€ä¹ˆåªèƒ½è·å¾—ä¸€æ¬¡ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬å°±åªèƒ½ä»ä»£ç ä¸­åˆ†æäº†ï¼Œè¯·ç§»è‡³æ³¨æ„ç‚¹2æŸ¥çœ‹ä»£ç ï¼Œè¿™é‡Œä¸è´´äº†- w3schoolä¸­ä¹Ÿæ²¡æœ‰è¿‡å¤šè§£é‡Šï¼Œä¸è¿‡è¿™é‡Œä¾ç„¶ä¸å¦¨ç¢ç†è§£ï¼Œè¿™ä¸ªæ–¹æ³•å¤§è‡´ä¸ºä»¥ä¸‹æƒ…å†µï¼š- æ ¹æ®å…¥å‚æ¥åŒ¹é…2dæˆ–è€…webglï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆä¼šå…ˆå»çœ‹contextAttributesï¼Œå¦‚æœå·²ç»æœ‰å€¼äº†ï¼ˆä¸Šæ¬¡ä¸€è°ƒç”¨ä¹‹åä¼šå°†2dæˆ–è€…webglç›¸åº”å¯¹è±¡å­˜ä¸‹æ¥ï¼ŒçŒœæµ‹ï¼‰ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›nullï¼Œè¿™å°±å¯¼è‡´å¦‚æœç¬¬ä¸€æ¬¡å·²ç»æ‹¿åˆ°2dçš„å¯¹è±¡äº†ï¼Œé‚£ä¹ˆä¸‹é¢å†å…¥å‚webglè°ƒç”¨ï¼Œè·å¾—çš„å°±æ˜¯nullï¼Œè€Œä¸ºä»€ä¹ˆä¸æ˜¯è¿”å›ä¸Šä¸€æ¬¡çš„ï¼Œå°±æ˜¯å‡½æ•°è¿”å›å€¼çš„é—®é¢˜å§ï¼Œçœ‹å‰ä¸¤ä¸ªgetContextï¼Œè¿”å›å€¼è¦ä¹ˆæ˜¯å¯¹åº”çš„2dæˆ–webglå¯¹è±¡ï¼Œè¦ä¹ˆæ˜¯nullã€‚è¿™å°±æ˜¯è¯´å‚æ•°åŒ¹é…åˆ°ä¹‹åï¼Œå°±ä¼šæ‰§è¡Œç›¸åº”çš„å‡½æ•°ï¼Œè€Œ"2d"åªä¼šè¿”å›2då¯¹è±¡æˆ–è€…nullï¼Œwebglä¹Ÿæ˜¯ä¸€æ ·ã€‚æœ€åä¸€ä¸ªæ–¹æ³•ï¼Œæ˜¯åœ¨å‚æ•°ä¸åŒ¹é…2dæˆ–è€…webglçš„æ—¶å€™ï¼Œä¼šå…ˆå»è¿”å›2dï¼Œå¦‚æœæ²¡æœ‰ï¼Œå†è€ƒè™‘webglï¼Œæœ€åäºŒè€…éƒ½æ²¡æœ‰ï¼Œå°±è¿”å›null- å…¶å®ï¼Œä¹‹ä¸Šä¸€ç‚¹çš„çœ‹æ³•ï¼Œæœ€åç†è§£æ ¹æœ¬æ— æ³•å®è·µï¼Œå› ä¸ºæŒ‰ç…§æœ€åçš„è¯´æ³•ï¼Œæˆ‘ä»¬å¿…é¡»è¦ä¼ ä¸€ä¸ªå‚æ•°è¿‡å»ï¼Œè€Œå¦‚æœæˆ‘ä»¬å…ˆä¼ è¿‡å»2dï¼Œé‚£ä¹ˆè·å¾—2då¯¹è±¡ï¼Œè¿™æ—¶å€™å†å»è°ƒç”¨getContextå®è·µï¼Œä¸å¥½æ„æ€ï¼Œä¹‹å‰å·²ç»è®¾ç½®è¿‡2däº†ï¼Œå…¶ä»–çš„æˆ‘ä¸ä¼šç»™ä½ äº†ã€‚å°±å¥½æ¯”ä¸€ä¸ªç”»æ¿ï¼Œå…¶ä¸­Aç”»å®¶å…ˆå»ä½¿ç”¨äº†ï¼Œé‚£ä¹ˆä¸å¥½æ„æ€ï¼Œä¸ç®¡ä½ åæ¥å†æ¥çš„å…¶ä»–ä»»ä½•äººï¼Œéƒ½ä¸ä¼šå¾—åˆ°ä½¿ç”¨æƒã€‚ä¸è¿‡å¦‚æœå†æ¬¡ä¼ å…¥2dï¼Œè¿˜æ˜¯èƒ½å¤Ÿè·å¾—2då¯¹è±¡ï¼Œè¿™ä¸ªåªèƒ½è§£é‡Šä¸ºAç”»å®¶ä¸­é€”ä¼‘æ¯ï¼Œä¼‘æ¯å®Œä¹‹åä¾æ—§æ‹¥æœ‰è¯¥ç”»æ¿çš„ä½¿ç”¨æƒã€‚ä»¥è‡³äºæœ€åçš„çŒœæƒ³ä¹Ÿæ²¡æ³•å®ç°éªŒè¯ã€‚å› ä¸ºæˆ‘é™¤äº†ä¼ å…¥2då‚æ•°ï¼Œå…¶ä»–ä»»ä½•å‚æ•°éƒ½ä¼šç›´æ¥è·å¾—null- è€Œä¸”è¿™çœ‹åˆ°çš„åªæ˜¯interfaceä¸­çš„ä»£ç ï¼Œæ²¡æœ‰å…·ä½“å®ç°çš„é€»è¾‘ä»£ç ï¼Œä¸€åˆ‡é çŒœæµ‹ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå¾ˆå¤§çš„å†²çªï¼Œä¸è¿‡ç»“æœè‚¯å®šæ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºå°±æ˜¯é€šè¿‡ç»“æœæ¥è¿›è¡Œæ¨æµ‹çš„é€»è¾‘ã€‚å¦‚æœæœ‰äººæ¯”è¾ƒäº†è§£è¿™æ–¹é¢çš„ä¸œè¥¿ï¼Œå¸Œæœ›èƒ½å¤Ÿå‘ŠçŸ¥ä»¥ä¾¿ç›¸äº’å­¦ä¹  æ³¨æ„ç‚¹4ï¼šè¿™é‡Œä¸å«æ³¨æ„ç‚¹ï¼Œåº”è¯¥æ˜¯çŸ¥è¯†ç‚¹ drawImageï¼ˆr,x,y,w,hï¼‰å‚æ•°ï¼š rï¼šä»£è¡¨çš„æ˜¯å›¾åƒæºå¤´ xï¼šè¡¨ç¤ºåœ¨ç”»å¸ƒä¸­xåæ ‡è½´çš„åç§»é‡ yï¼šyåæ ‡è½´åç§»é‡ wï¼šç”»å‡ºçš„å›¾ç‰‡çš„å®½åº¦ hï¼šé«˜åº¦ ã€ç»“æœå®ä¾‹ å‚ç…§é¡µé¢imgå…ƒç´ ç”»å›¾ è¿™é‡Œå°±ä¸¢ä¸¤å¼ å›¾ï¼Œ åæ­£è¯¥è§£é‡Šçš„ä¸Šé¢å·²ç»è§£é‡Šäº† ä¸å‚ç…§é¡µé¢imgå…ƒç´ ç”»å›¾ åœ¨å‰é¢è¯´è¿‡ï¼Œæˆ‘ä»¬ä¸å°†å›¾ç‰‡å±•ç¤ºåœ¨é¡µé¢ä¸Šæ¥å°†å›¾ç‰‡ç”»å‡ºæ¥ï¼Œä¸è¿‡æˆ‘ä»¬è¦éµå¾ªçš„æ­¥éª¤ä¾æ—§æ˜¯ä¸€æ ·çš„ åªä¸è¿‡ç¬¬ä¸€æ­¥æ‰¾å‚è€ƒå›¾ç‰‡ä¸æ˜¯åœ¨é¡µé¢ä¸­å¯»æ‰¾äº†ï¼Œè€Œæ˜¯åœ¨jsä»£ç ä¸­ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªimgå…ƒç´ domå¯¹è±¡ï¼Œç„¶åæŒ‡å®šå…¶å›¾ç‰‡ ä»£ç ï¼š 12345678window.onload = function () &#123; var img = document.createElement("img") img.src="../imgs/0.png" document.getElementById("draw").addEventListener('click', function () &#123; var cv = document.getElementById('canvas1'); var ct = cv.getContext("2d"); ct.drawImage(img, 0, 0, 200, 200); &#125;); ç»“æœå›¾ï¼š ä»¥ä¸Šå±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨canvasç”»å›¾ï¼Œå…¶ä¸­æœ‰ç†è§£é”™è¯¯çš„åœ°æ–¹ï¼Œä¹Ÿå°±è¿™æ ·äº†ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸‹æ€ä¹ˆå°†è¿™å¼ canvasä¸­çš„å›¾ç‰‡ä¿å­˜ä¸‹æ¥ï¼Œè¿™ä¸ªåé¢ä¼šç”¨åˆ° å››ã€canvasè¡¥å…… ä¸Šé¢è¯´åˆ°çš„ä¸¤ä¸ªé—®é¢˜ï¼Œåœ¨è¿™é‡Œè¿›è¡Œè¡¥å……ç¤ºä¾‹è¯´æ˜ç»“æœ é—®é¢˜1ï¼šcanvasè®¾ç½®ä¸ºdisplay:noneçš„æƒ…å†µä¼šå¦‚ä½• é¦–å…ˆçœ‹ä¸€ä¸‹ä»£ç ï¼š htmlï¼šç›´æ¥è®¾ç½®canvasæ ·å¼ä¸ºdisplay:none 1234&lt;canvas height="400" width="200" id="canvas1" style="border: 1px solid gray;display:none;"&gt;&lt;/canvas&gt;&lt;br/&gt;&lt;button id="draw"&gt;ç”»å›¾&lt;/button&gt;&lt;button id="show"&gt;å±•ç¤º&lt;/button&gt; ç»“æœå¯æƒ³è€ŒçŸ¥ï¼Œé¡µé¢ä¸Šä»€ä¹ˆéƒ½æ²¡æœ‰åªæœ‰ä¸¤ä¸ªä¸ªæŒ‰é’® jsä»£ç ï¼šæ€è·¯æ˜¯ï¼Œç‚¹å‡»ç”»å›¾å°†å›¾ç‰‡ç”»åˆ°canvasä¸­ï¼Œåœ¨ç‚¹å‡»å±•ç¤ºæ”¹å˜canvasçš„æ ·å¼ä¸ºblockï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å›¾ç‰‡ 123456789101112//ç”»å›¾æŒ‰é’®var img = document.createElement("img")img.src="../imgs/0.png"document.getElementById("draw").addEventListener('click', function () &#123; var cv = document.getElementById('canvas1'); var ct = cv.getContext("2d"); ct.drawImage(img, 0, 0, 200, 200);&#125;);//å±•ç¤ºæŒ‰é’®document.getElementById("show").addEventListener('click',function () &#123; document.getElementById("canvas1").style.display= 'block';&#125;) ç»“æœï¼š å•Šå“ˆï¼Œæœ‰å›¾ç‰‡è€¶ï¼é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬äºŒç§æƒ…å†µ é—®é¢˜2ï¼šcanvasè®¾ç½®ä¸ºé•¿å®½éƒ½ä¸º0çš„æƒ…å†µä¼šå¦‚ä½• æ€è·¯åŒä¸Šä¸€ä¸ªï¼Œç›´æ¥è´´ä»£ç å’Œæ•ˆæœ 1234&lt;canvas height="0" width="0" id="canvas1" style="border: 1px solid gray;"&gt;&lt;/canvas&gt;&lt;br/&gt;&lt;button id="draw"&gt;ç”»å›¾&lt;/button&gt;&lt;button id="show"&gt;å±•ç¤º&lt;/button&gt; 12345678910111213//ç”»å›¾æŒ‰é’® var img = document.createElement("img") img.src = "../imgs/0.png" document.getElementById("draw").addEventListener('click', function () &#123; var cv = document.getElementById('canvas1'); var ct = cv.getContext("2d"); ct.drawImage(img, 0, 0, 200, 200); &#125;); //å±•ç¤ºæŒ‰é’® document.getElementById("show").addEventListener('click', function () &#123; document.getElementById("canvas1").style.width = '200px'; document.getElementById("canvas1").style.height = '400px'; &#125;) æ²¡æœ‰å›¾ç‰‡å”‰ï¼ æ€»ç»“ï¼š æˆ‘ä»¬å°†canvasè®¾ç½®ä¸ºdisplay:noneï¼Œä½†æ˜¯è¯¥å…ƒç´ è¿˜æ˜¯å­˜åœ¨é¡µé¢ä¸­çš„ï¼Œå¹¶ä¸”å æœ‰ä¸€å®šçš„é¢ç§¯ï¼Œåªæ˜¯å› ä¸ºè®¾ç½®ä¸ºä¸æ˜¾ç¤ºï¼Œæ‰€ä»¥è§†è§‰ä¸Šå¹¶æ²¡æœ‰å ç”¨é¡µé¢çš„ç©ºé—´ã€‚ ä¹‹å‰è¯´è¿‡ï¼Œcanvasæ˜¯ç”»å¸ƒï¼Œç”»å›¾æ˜¯å°†å›¾ç‰‡ç”»åœ¨canvaså…ƒç´ ä¸Šï¼Œé‚£ä¹ˆæ—¢ç„¶å­˜åœ¨ï¼Œä¸ç®¡åˆ«äººçœ‹ä¸çœ‹å¾—åˆ°ï¼Œæˆ‘ä»¬ç”»å›¾çš„æ—¶å€™æ²¡æœ‰å½±å“ è€Œå°†canvaså®½é«˜è®¾ç½®ä¸º0ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ è™½ç„¶ä¾æ—§å­˜åœ¨é¡µé¢ä¸­ï¼Œä½†æ˜¯ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å¤§å°çš„å…ƒç´ ï¼ŒçœŸæ­£çš„æ„ä¹‰æ˜¯ä¾æ—§å­˜åœ¨é¡µé¢ä¸­å—ï¼Ÿè°èƒ½å°†ä¸€å¹…ç”»ç”»åœ¨é¢ç§¯ä¸º0çš„ç”»æ¿ä¸Šå‘¢ï¼Ÿ æ‰€ä»¥ï¼Œå¯¹äºcanvasçš„ç†è§£ï¼Œå°±æ˜¯è¿™æ ·ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå°±æ˜¯ç”¨æ¥å­˜æ”¾ç”»å‡ºæ¥çš„å›¾åƒçš„ä¸€ä¸ªå®¹å™¨ã€‚ äº”ã€canvaså›¾ç‰‡ä¸‹è½½ é’ˆå¯¹ä¸æ‘„åƒå¤´æ‹ç…§ï¼Œæˆ‘ä»¬éœ€è¦å°†â€æ‹â€çš„ç…§ç‰‡ä¿å­˜ä¸‹æ¥ï¼Œå…¶å®å°±æ˜¯å°†canvasä¸­ç”»å‡ºæ¥çš„å›¾åƒä¿å­˜ä¸‹æ¥ï¼Œ ç„¶åç›®å‰çš„æƒ…å†µä¹Ÿå°±æ˜¯æˆ‘ä»¬åªæ˜¯æ‹¥æœ‰ä¸€ä¸ªå­˜åœ¨äºé¡µé¢æœ‰å±•ç¤ºæ•ˆæœçš„è§†è§‰å›¾åƒè€Œå·²ï¼Œä»¥åŠä¸€ä¸ªä¿å­˜è¿™ä¸ªå›¾åƒçš„å…ƒç´  é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å°†è¿™ä¸ªå…ƒç´ ä¸­çš„ç”»é¢ä»¥å›¾ç‰‡æ–‡ä»¶å½¢å¼ä¿å­˜ä¸‹æ¥å‘¢ï¼Ÿ å…¶å®å¾ˆç®€å•ï¼Œæœ‰ä»¥ä¸‹å‡ æ­¥ ## ï¼‘ã€è·å¾—å›¾ç‰‡æ–‡ä»¶å½¢å¼ æ–‡ä»¶ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ç»„æ•°æ®ï¼Œæˆ‘ä»¬åªè¦æ‹¿åˆ°è¿™ç»„æ•°æ®å°±èƒ½å®ç°æ–‡ä»¶ä¸‹è½½ 123var ctx = document.getElementById('canvas1'); //è·å¾—å›¾ç‰‡çš„base64åŠ å¯†å­—ç¬¦ä¸² var imgdata = ctx.toDataURL("image/png", 1.0); é€šè¿‡ctx.toDataURLæ–¹æ³•èƒ½å¤Ÿå°†canvaså…ƒç´ ä¸­çš„å›¾åƒå…ƒç´ è½¬æˆæ–‡ä»¶æ•°æ®è·¯å¾„ æ¥ä¸‹æ¥ï¼Œæœ‰äº†æ–‡ä»¶æ•°æ®è·¯å¾„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡aæ ‡ç­¾æ¥è¿›è¡Œä¸‹è½½è¯¥æ–‡ä»¶ 12345678910111213//è®¾ç½®æ–‡ä»¶åå­—ï¼Œå¹¶ç”Ÿæˆaæ ‡ç­¾é“¾æ¥æ–‡ä»¶ç›´æ¥æ‰§è¡Œé¼ æ ‡ç‚¹å‡»äº‹ä»¶è¿›è¡Œä¸‹è½½var type = 'jpg'var filename = 'canvasç”»å›¾.' + type;var a = document.createElement('a');//è®¾ç½®aé“¾æ¥å…ƒç´ ä¸ºæ–‡ä»¶æ•°æ®è·¯å¾„ï¼Œç‚¹å‡»æ—¶å€™å°±èƒ½ç›´æ¥ä¸‹è½½a.href = imgdata;a.download = filename;//ç„¶åç”Ÿæˆé¼ æ ‡ç‚¹å‡»äº‹ä»¶// a.click()var event = document.createEvent('MouseEvents');event.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);//æ‰§è¡Œaæ ‡ç­¾å…ƒç´ çš„é¼ æ ‡ç‚¹å‡»äº‹ä»¶ï¼Œå°±ç›¸å½“äºæ˜¯åœ¨é¡µé¢ä¸­ç”¨é¼ æ ‡ç‚¹å‡»äº†aé“¾æ¥ï¼Œå®ç°ä¸‹è½½a.dispatchEvent(event); è¯´æ˜ä¸€ä¸‹ï¼šå…¶å®ä»10è¡Œå¼€å§‹åˆ°ç»“æŸçš„ä»£ç ï¼Œæ•ˆæœç­‰åŒäºç¬¬ä¹è¡Œçš„a.click()ï¼Œå°±æ˜¯ä¸ºäº†èƒ½å¤Ÿä¸å®ç”¨é¼ æ ‡ç‚¹å‡»é¡µé¢å…ƒç´ è€Œå®ç°açš„ç‚¹å‡»äº‹ä»¶ åˆ°æ­¤ï¼Œæˆ‘ä»¬å°±æŠŠcanvasä¸­çš„å›¾åƒä¿å­˜ä¸‹æ¥äº†ï¼Œæœ‰äººåº”è¯¥æ³¨æ„åˆ°ï¼Œpngæ ¼å¼ï¼Œå¯¹äºæ²¡æœ‰è¢«å¡«å……çš„canvasèŒƒå›´ï¼Œåœ¨å›¾ç‰‡ä¸­æ˜¯é€æ˜èƒŒæ™¯ã€‚ é™¤äº†pngæ ¼å¼ï¼Œè¿˜æ”¯æŒjpgã€bmpã€gifç­‰æ ¼å¼ï¼Œè§†è‡ªå·±çš„éœ€æ±‚æ¥å§ å…­ã€æ‘„åƒå¤´æ‹ç…§ å…¶å®æ‘„åƒå¤´æ‹ç…§åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿåˆ©ç”¨canvasç”»å›¾æ¥å®ç° æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰è¯´çš„ï¼Œåˆ©ç”¨canvasåªè¦èƒ½å¤Ÿå°†ç”»é¢å…ƒç´ æ‹¿åˆ°ï¼Œå°±èƒ½å¤Ÿå°†è¯¥å…ƒç´ åŒºåŸŸä¸­çš„å›¾åƒç”»åˆ°canvasä¸­ï¼Œç„¶åä¸‹è½½ ä¸Šé¢å·²ç»è¯´äº†åé¢çš„æ­¥éª¤ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åˆ©ç”¨æ‘„åƒå¤´ä¸­æ‹ç…§ï¼Œé‚£ä¹ˆåˆ°ç›®å‰æˆ‘ä»¬è¦è§£å†³çš„äº‹æƒ…å°±åªæœ‰ä¸¤ä¸ªäº†ï¼š 1ã€æ‹¿åˆ°æ‘„åƒå¤´ä¸­æ‹æ‘„åˆ°çš„ç”»é¢å±•ç¤ºåœ¨é¡µé¢ä¸­ 2ã€å°†é¡µé¢ä¸­å±•ç¤ºæ‘„åƒå¤´é¡µé¢çš„å…ƒç´ è·å–åˆ°ï¼Œç»™canvasç”»ä¸‹æ¥ æ‰“å¼€æ‘„åƒå¤´å…ˆè´´ä»£ç ï¼Œç„¶åå†è§£é‡Š 12345678910navigator.mediaDevices.getUserMedia(&#123; "video": true &#125;).then(function (stream) &#123; console.log(stream); $this.MediaStreamTrack = typeof stream.stop === 'function' ? stream : stream.getTracks()[1]; $this.video.srcObject = stream; $this.video.play(); &#125;).catch(function (err) &#123; console.log(err); &#125;); è¯¦è§£navigator Navigator å¯¹è±¡åŒ…å«æœ‰å…³æµè§ˆå™¨çš„ä¿¡æ¯ ï¼Œ æ³¨é‡Šï¼šæ²¡æœ‰åº”ç”¨äº navigator å¯¹è±¡çš„å…¬å¼€æ ‡å‡†ï¼Œä¸è¿‡æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥å¯¹è±¡ æè¿°ï¼šNavigator å¯¹è±¡åŒ…å«çš„å±æ€§æè¿°äº†æ­£åœ¨ä½¿ç”¨çš„æµè§ˆå™¨ã€‚å¯ä»¥ä½¿ç”¨è¿™äº›å±æ€§è¿›è¡Œå¹³å°ä¸“ç”¨çš„é…ç½®ã€‚ è™½ç„¶è¿™ä¸ªå¯¹è±¡çš„åç§°æ˜¾è€Œæ˜“è§çš„æ˜¯ Netscape çš„ Navigator æµè§ˆå™¨ï¼Œä½†å…¶ä»–å®ç°äº† JavaScript çš„æµè§ˆå™¨ä¹Ÿæ”¯æŒè¿™ä¸ªå¯¹è±¡ã€‚ Navigator å¯¹è±¡çš„å®ä¾‹æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥ç”¨ Window å¯¹è±¡çš„ navigator å±æ€§æ¥å¼•ç”¨å®ƒã€‚ å¯¹äºè¿™ä¸ªå¯¹è±¡ï¼Œå¯ä»¥å»ç½‘ä¸ŠæŸ¥æŸ¥ï¼Œä»Šå¤©æˆ‘ä»¬å…³æ³¨çš„å¹¶ä¸æ˜¯å®ƒ mediaDevices ä¸Šé¢è¯´çš„Navigatorå¯¹è±¡å¾ˆç‰›é€¼ï¼Œç‰›é€¼åˆ°æˆ‘ä»¬èƒ½å¤Ÿè·å¾—å½“å‰æ‰€ä½¿ç”¨ç¯å¢ƒçš„å¾ˆå¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬æµè§ˆå™¨ï¼Œå½“å‰ç³»ç»Ÿç­‰ç­‰ è€ŒmediaDevicesï¼Œåˆ™æ˜¯ä¸€ä¸ªAPIæ¥å£ï¼Œè¯¥æ¥å£æä¾›äº†è®¿é—®é“¾æ¥åª’ä½“è¾“å…¥çš„è®¾å¤‡ï¼Œå¦‚æˆ‘ä»¬ä½¿ç”¨çš„æ‘„åƒå¤´ã€ç…§ç›¸æœºå’Œéº¦å…‹é£ï¼Œä»¥åŠå±å¹•å…±äº«ç­‰ã€‚ è¿™äº›åª’ä½“è¾“å…¥è®¾å¤‡,éƒ½èƒ½é€šè¿‡è¯¥æ¥å£æ¥è®¿é—®é“¾æ¥ä»¥ä¾¿è°ƒç”¨ é“¾æ¥å¯ä»¥å»ç½‘ç«™ä¸Šçœ‹çœ‹è¯¦ç»†çš„æ–‡æ¡£èµ„æ–™ â€‹ https://developer.mozilla.org/zh-CN/ è¿›å»åç‚¹å‡»å·¦ä¸Šè§’æŠ€æœ¯&gt;&gt;&gt;API/dom èƒ½å¤ŸæŸ¥çœ‹æ‰€æœ‰çš„APIæ–‡æ¡£ï¼Œç„¶åæ‰¾åˆ°mediaDeviceså’ŒNavigatorè‡ªè¡Œå­¦ä¹  æœ‰äº†mediaDevicesï¼Œåªæ˜¯ç»™æˆ‘ä»¬æä¾›äº†åª’ä½“è¾“å…¥è®¾å¤‡é“¾æ¥ï¼Œè€Œæˆ‘ä»¬è¦ä½¿ç”¨è®¾å¤‡ï¼Œè¿˜éœ€è¦ä¸€ä¸ªæ–¹æ³•ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ä»£ç ä¸­çš„getUserMedia() mediaDevices.getUserMedia() è¯¥æ–¹æ³•ä¼šä½¿ç”¨æˆ·ç»™äºˆä½¿ç”¨åª’ä½“è¾“å…¥çš„è®¸å¯ ï¼Œåª’ä½“è¾“å…¥ä¼šäº§ç”Ÿä¸€ä¸ªMediaStreamï¼Œé‡Œé¢åŒ…å«äº†è¯·æ±‚çš„åª’ä½“ç±»å‹çš„è½¨é“ ã€‚ MediaStreamæ˜¯ä¸€ä¸ªæµï¼Œè¿™ä¸ªæµå¯ä»¥åŒ…æ‹¬è§†é¢‘è½¨é“ï¼ˆæ¥è‡ªç¡¬ä»¶æˆ–è€…è™šæ‹Ÿè§†é¢‘æºï¼Œæ¯”å¦‚ç›¸æœºã€è§†é¢‘é‡‡é›†è®¾å¤‡å’Œå±å¹•å…±äº«æœåŠ¡ç­‰ç­‰ ï¼‰ã€éŸ³é¢‘è½¨é“ï¼ˆåŒæ ·æ¥è‡ªç¡¬ä»¶æˆ–è™šæ‹ŸéŸ³é¢‘æºï¼Œæ¯”å¦‚éº¦å…‹é£ã€A/Dè½¬æ¢å™¨ç­‰ç­‰ ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯å…¶ä»–è½¨é“ è¿™ä¸ªå‡½æ•°çš„å‚æ•°ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯è¡¨ç¤ºæˆ‘ä»¬è¦è¯·æ±‚ä½¿ç”¨çš„åª’ä½“ 1&#123; audio: true, video: true &#125; ä¸Šé¢è¿™ä¸ªä»£ç è¡¨ç¤ºæ²¡æœ‰ä»»ä½•è¦æ±‚ï¼Œåªè¦ä½¿ç”¨éŸ³é¢‘å’Œè§†é¢‘çš„åª’ä½“ 1234&#123; audio: true, video: &#123; width: 1280, height: 720 &#125;&#125; è€Œè¿™ä¸Šé¢ä»£ç æ˜¯è¯´ï¼Œæˆ‘è¦ä½¿ç”¨éŸ³é¢‘å’Œè§†é¢‘åª’ä½“è¾“å…¥è®¾å¤‡ï¼Œä½†æ˜¯è§†é¢‘è®¾é…æˆ‘è¦1280x720çš„åˆ†è¾¨ç‡ ç­‰ç­‰ï¼Œè¿™äº›å‚æ•°æˆ‘ä»¬å¯ä»¥çµæ´»ä½¿ç”¨ï¼Œè€Œè¿™äº›ä¸œè¥¿åœ¨ä¸Šé¢åˆ†äº«çš„urlé‡Œé¢éƒ½æœ‰ï¼Œå¯ä»¥è‡ªè¡Œå»çœ‹æ–‡æ¡£å­¦ä¹  è¯´å®Œå‚æ•°ï¼Œé‚£ä¹ˆæ¥çœ‹ä¸€ä¸‹è¿”å›å€¼ï¼šPromise å…¶å®è¿™ä¸ªå¯¹è±¡æ²¡å¤šå¤§æ·±åº¦ï¼Œå°±æ˜¯è¡¨ç¤ºå¼‚æ­¥æ“ä½œæœ€ç»ˆå®Œæˆæˆ–è€…å¤±è´¥çš„å¯¹è±¡ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¯·æ±‚ä½¿ç”¨è®¾å¤‡ï¼ŒæˆåŠŸäº†ï¼Œè¿™ä¸ªå¯¹è±¡å°±è¡¨ç¤ºæˆåŠŸäº†ï¼Œå¤±è´¥äº†ï¼Œå°±è¡¨ç¤ºå¤±è´¥äº† å®ƒçš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªç»‘å®šäº†å›è°ƒå‡½æ•°çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯å°†å›è°ƒå‡½æ•°ä¼ å…¥å‡½æ•°å†…éƒ¨ æ‰€ä»¥æˆ‘ä»¬ç”¨.then(function(){})æ¥æ‰§è¡Œè¯·æ±‚è®¾å¤‡è®¸å¯åçš„å¤„ç†æ–¹æ³• è€Œå¦‚æœè¯·æ±‚å¤±è´¥æˆ–è€…è®¾å¤‡ä¸å¯ç”¨ã€‚ä¼šå›è°ƒPermissionDeniedError æˆ–è€…NotFoundError ï¼Œæˆ‘ä»¬ç”¨é“¾å¼è°ƒç”¨.catch(function(){})æ¥å¤„ç†å¼‚å¸¸ æ³¨æ„ï¼šæœ‰å¯èƒ½è¿™ä¸ªå¯¹è±¡æ—¢ä¸è¿”å›å…è®¸ï¼Œä¹Ÿä¸è¿”å›æ‹’ç»ï¼Œå› ä¸ºç”¨æˆ·ä¸æ˜¯ç™¾åˆ†ç™¾ä¼šé€‰æ‹©å…è®¸ä½¿ç”¨æˆ–è€…æ‹’ç»ä½¿ç”¨ï¼Œä¹Ÿå¯èƒ½ç”¨æˆ·ä»€ä¹ˆéƒ½ä¸é€‰ å¥½äº†ï¼Œé—²è¯ä¸å¤šè¯´ï¼Œç®€å•èŠä¸€èŠï¼Œå…·ä½“çš„å»çœ‹æ–‡æ¡£èµ„æ–™å­¦ä¹ å§ æ¥ä¸‹æ¥è¯´ä¸€ä¸‹è·å¾—ä½¿ç”¨è®¾å¤‡çš„è®¸å¯ä¹‹åï¼Œæˆ‘ä»¬æ€ä¹ˆåš Promise.then(function(){})å›è°ƒ åˆšåˆšè¯´è¿‡ï¼Œåœ¨thenç»‘å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†è·å¾—è®¸å¯åçš„æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹è¿™é‡Œçš„ä»£ç  è¿™é‡Œï¼Œè¡¨ç¤ºæˆ‘ä»¬å–å¾—ä½¿ç”¨æƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åªéœ€è¦å¤„ç†åé¦ˆç»™æˆ‘ä»¬çš„stream(æµ)å°±å¯ä»¥äº† ç„¶åï¼Œæˆ‘ä»¬è·å¾—è§†é¢‘è½¨é“ï¼ˆåé¢æˆ‘ä»¬éœ€è¦å…³é—­æ‘„åƒå¤´çš„ï¼‰ï¼Œå½“ç„¶ï¼Œåœ¨ä»£ç ä¸­æˆ‘ä»¬ä¸ºäº†ä¸¥è°¨ï¼Œè¿˜æ˜¯åšäº†ä¸€æ­¥åˆ¤æ–­ï¼Œå°±ç®€å•æ¥è°ˆä¸€ä¸‹å§ $this.MediaStreamTrack = typeof stream.stop === â€˜functionâ€™ ? stream : stream.getTracks()[1]; è¿™ä¸ªæˆ‘ä»¬å…ˆåˆ¤æ–­è¿”å›çš„æµstreamæ˜¯ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½è¿™ä¸ªæµé‡Œé¢åŒ…å«çš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªè§†é¢‘è½¨é“ï¼Œæ‰€ä»¥åœ¨è¿™è¿›è¡Œäº†åˆ¤æ–­ï¼Œæ›´ä¸ºä¸¥è°¨ã€‚ä¸‰å…ƒè¡¨è¾¾å¼å°±ä¸è§£é‡Šäº†å§ã€‚ å¤„ç†å®Œstreamä¹‹åï¼Œå°±éå¸¸ç®€å•äº†ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨é¡µé¢ä¸Šå±•ç¤ºè§†é¢‘ï¼Œå°±æ˜¯ä½¿ç”¨videoï¼Œé‚£ä¹ˆé€šè¿‡documentè·å¾—é¡µé¢å…ƒç´ videoçš„domå¯¹è±¡videoï¼ˆå› ä¸ºæ‡’å¾—æƒ³åå­—äº†ï¼Œå°±ç›´æ¥var videoäº†ã€‚åˆ«è¯¯ä¼šå®ƒæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå°±æ˜¯é€šè¿‡idè·å–çš„é¡µé¢å…ƒç´ ï¼‰ $this.video.srcObject = stream; ç„¶åï¼Œå°±ç»™videoè¿™ä¸ªå¯¹è±¡çš„srcObjectèµ‹å€¼ä¸ºå½“å‰çš„streamï¼Œå®Œç¾æå®š è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œæœ‰çš„å¸–å­ä¸­å†™çš„æ˜¯video.src = streamï¼Œå¯å‘æ­»äº† å› ä¸ºä¹‹å‰æ²¡å†™è¿‡ï¼Œæ‰€ä»¥åˆšå¼€å§‹å°±ç›´æ¥èµ‹å€¼çš„åˆ«äººçš„ä»£ç ï¼Œç»“æœæ²¡ç”»é¢ï¼Œä½†æ˜¯æ‘„åƒå¤´æ‰“å¼€äº† å°±æ˜¯å› ä¸ºå±æ€§ä¸æ˜¯srcï¼Œè€Œæ˜¯srcObject äºæ˜¯ä¹ï¼Œå°±å»äº†ä¸Šè¾¹é“¾æ¥çš„ç½‘ç«™ä¸Šçœ‹äº†å¾ˆä¹…æ–‡æ¡£ï¼Œæ‰æ…¢æ…¢ææ˜ç™½æ€ä¹ˆå›äº‹ï¼Œç„¶åè‡ªå·±å°è£…æˆäº†è‡ªå·±çš„ç»„ä»¶ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ï¼Œå˜¿å˜¿å˜¿ è™½è¯´è·¯å¾„å·²ç»é…å¥½äº†ï¼Œä¸è¿‡ä¸è§‰å¾—è¿˜å·®ç‚¹ä»€ä¹ˆå—ï¼Ÿæ²¡é”™ï¼Œvideoæ²¡æœ‰å¼€å§‹æ’­æ”¾å•Šï¼Œä¸è§£é‡Šäº†ï¼Œ.play() æ‹ç…§ okï¼Œæ‘„åƒå¤´ç”»é¢æˆ‘ä»¬æœ‰äº†ï¼Œé‚£ä¹ˆå°±è¯¥â€æ‹ç…§â€äº†å§ï¼Œä¸ºä»€ä¹ˆæŠŠæ‹ç…§ä¸¤ä¸ªå­—ç”¨å¼•å·å¼•èµ·æ¥ï¼Ÿè¿˜ä¸æ‡‚å—ï¼Ÿå› ä¸ºå‹æ ¹å°±ä¸æ˜¯æ‹ç…§ï¼Œè€Œæ˜¯canvasç”»å›¾ è¿™ä¸€æ­¥å°±éå¸¸ç®€å•äº†ï¼Œç…§æ—§ï¼Œåœ¨é¡µé¢ä¸Šæ·»åŠ ä¸€ä¸ª æ‹ç…§ æŒ‰é’®ï¼Œç„¶åç‚¹å‡»äº‹ä»¶é‡Œé¢ä»£ç å¦‚ä¸‹ï¼š 1$this.context.drawImage($this.video, 0, 0, 200, 400); ä¸€è¡Œä»£ç æå®šï¼Œå°±æ˜¯ç›´æ¥å°†videoåƒä¹‹å‰çš„imgä¸€æ ·ï¼Œç›´æ¥æ”¾è¿›å»å°±OKäº† å…³é—­æ‘„åƒå¤´ è®°å¾—å…³é—­æ‘„åƒå¤´ 1$this.MediaStreamTrack.stop(); é—®é¢˜ç‚¹ç”»é¢å‡ºä¸æ¥ åˆ«æ€¥åˆ«æ€¥ï¼Œæœ‰å¯èƒ½æ˜¯æµè§ˆå™¨ä¸å…¼å®¹çš„é—®é¢˜ é‚£ä¹ˆæˆ‘ä»¬é€šè¿‡Navigator.mediaDevicesæ¥è¯·æ±‚æ‘„åƒå¤´ï¼Œå¯èƒ½å› ä¸ºæµè§ˆå™¨é—®é¢˜è€Œå‡ºç°é”™è¯¯ï¼Œåˆ«æ€¥ï¼Œæˆ‘ä»¬è¿˜æœ‰å¦ä¸€ç§åŠæ³• 12345678910navigator.getMedia(&#123; "video": true &#125;).then(function (stream) &#123; console.log(stream); $this.MediaStreamTrack = stream.getTracks()[1]; $this.video.srcObject = (window.webkitURL).createObjectURL(stream); $this.video.play(); &#125;).catch(function (err) &#123; console.log(err); &#125;); ä¸è¿‡è¿™ç§å°±æ˜¯ä¼šè¿”å›ä¸€ä¸ªå‡½æ•° æ‹ç…§æ— æ•ˆæœï¼Ÿ è¿™ä¸ªä¸è§£é‡Šäº†ï¼Œæœ‰è¿™ä¸ªé—®é¢˜å¾ˆå¤§éƒ¨åˆ†åº”è¯¥å°±æ˜¯ç”»å›¾ä¸­å‡ºç°çš„é‚£ä¸¤ä¸ªé—®é¢˜å§ï¼Œå¦‚æœå½“æ—¶ä½ ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šå‡ºç°é‚£ä¸¤ç§æƒ…å†µï¼Œé‚£ä¹ˆå½“ä½ åšåˆ°æ‘„åƒå¤´æ‹ç…§çš„æ—¶å€™å°±æœ‰å¯èƒ½ä¼šé‡åˆ°äº† å¥½äº†ï¼Œè¿™ä¸ªä¸è§£é‡Šï¼Œä½†æ˜¯ä¸‹é¢æˆ‘ä»¬æ¥å®Œå–„ä¸€ä¸‹é¡µé¢ï¼Œå¹¶ä¸”çœ‹çœ‹ä¸ºä»€ä¹ˆä¼šå‡ºç°ä¹‹å‰æå‡ºçš„ä¸¤ä¸ªé—®é¢˜ ä¸ƒã€å®Œå–„é¡µé¢æ•ˆæœå®Œå–„ å˜¿å˜¿ï¼Œè¯´åˆ°è¿™ï¼Œæˆ‘è¦æè¦æ±‚äº†ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ‘„åƒå¤´æ‹æ‘„ï¼Œæ˜¯ä¸æ˜¯æœ‰éœ€è¦å¼¹å‡ºå±‚çš„ï¼Ÿæœ‰éœ€è¦å°†å½±åƒå›ºå®šåœ¨æŸä¸ªåŒºåŸŸçš„ï¼Œåæ­£è‚¯å®šä¸ä¼šæ˜¯åœ¨é¡µé¢æœ€å·¦ä¸Šè§’å§ï¼Ÿé‚£æ ·ä¸‘æ­»äº†ã€‚ okï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹å§ã€‚æœ€ç®€å•çš„æ€è·¯å°±æ˜¯ï¼Œå°†videoå…ƒç´ å’Œcanvaså…ƒç´ å…±åŒæ”¾åœ¨åŒä¸€ä¸ªå®¹å™¨ä¸­ï¼Œè¿™æ ·ä¸ç®¡éœ€æ±‚æƒ³è¦å°†å½±åƒåœ¨å“ªå‘ˆç°ï¼Œåªè¦æŠŠè¿™ä¸ªå®¹å™¨æ‹¿è¿‡å»å°±OKäº†ï¼Œé‡Œé¢ä»€ä¹ˆéƒ½ä¸éœ€è¦åŠ¨ã€‚ 123456789&lt;div id="camera"&gt; &lt;div id="contentHolder"&gt; &lt;video id="video" width="640" height="480" autoplay&gt;&lt;/video&gt; &lt;canvas id="canvas" width="640" height="480"&gt;&lt;/canvas&gt; &lt;/div&gt; &lt;div id="buttons"&gt; &lt;button id="btn_snap" class="btn btn_blue"&gt;æ‹ç…§&lt;/button&gt; &lt;/div&gt;&lt;/div&gt; okï¼Œæˆ‘çš„é¡µé¢ï¼ˆè€è„¸å¾ˆçº¢ï¼Œè¿™æ˜æ˜æ˜¯æœ‹å‹å‘æ¥çš„é¡µé¢ï¼‰æ—¶è¿™ä¸ªæ ·å­æ»´ï¼Œä¸€ä¸ªå¤§çš„å®¹å™¨id = â€œcameraâ€ï¼Œè€Œé‡Œé¢åˆ†ä¸¤å—divï¼Œä¸€ä¸ªæ˜¯contentHolderç”¨æ¥å‘ˆç°å½±å“videoä»¥åŠæ‹ç…§åä¿å­˜ç”»é¢çš„vanvasï¼Œå¦ä¸€ä¸ªæ˜¯å­˜æ”¾æŒ‰é’® æˆ‘è‰ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ · ä¸ºä»€ä¹ˆï¼Ÿ ç°åœ¨èƒ½å¤Ÿçœ‹åˆ°ï¼ŒåŸæ¥æ˜¯canvasï¼Œå½“åˆæˆ‘ä»¬å®éªŒçš„æ—¶å€™æ²¡è€ƒè™‘è¿‡é¡µé¢ç¾åŒ–çš„é—®é¢˜å§ï¼Ÿé‚£ä¹ˆè¿™ä¸ªcanvasæ€ä¹ˆåŠï¼Ÿ å¾ˆç®€å•å•¦ï¼Œå°†canvasè®¾ç½®ä¸ºnoneä¸å°±è¡Œäº†ï¼Ÿ ä½†æ˜¯ï¼Œåƒä¸‡åˆ«å‚»å‚»åœ°å°†canvasè®¾ç½®å®½é«˜ä¸º0ï¼Œç„¶åå†æ”¹å›æ¥ï¼Œè¿™æ ·æ²¡æ³•ç”»å›¾çš„ï¼Œä¸Šé¢çš„å®éªŒä¹Ÿè¯´è¿‡äº† jså®Œå–„ okï¼Œå¦‚æœæŒ‰ç…§ä¹‹å‰è®¾ç½®ä¸ºnoneä¹‹åï¼Œé‚£ä¹ˆåé¢å¯èƒ½ä¼šæ²¡æœ‰ç”»é¢ï¼Œè¿™ä¸ªæ²¡å…³ç³»ï¼Œè¿˜è®°çš„ä¹‹å‰çš„canvasè¡¥å……é‡Œé¢çš„å®éªŒå—ï¼Ÿå°±é‚£ä¹ˆè§£å†³ ä½†æ˜¯è¿˜æ˜¯æœ‰ç‚¹æ‹…å¿ƒï¼Œåœ¨å°†canvasè®¾ç½®ä¸ºdisplay:blockä¹‹å‰ï¼Œåƒä¸‡åˆ«å¿˜è®°å§videoè®¾ç½®ä¸ºdisplay:noneï¼Œå› ä¸ºæˆ‘ä»¬çš„å®¹å™¨åªèƒ½åŒæ—¶å®¹çº³å…¶ä¸­ä¸€ä¸ªçš„å¤§å°ï¼Œæ˜¯ä¸ºäº†ç¾è§‚ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸ºäº†é€ æˆä¸€ç§å‡è±¡ï¼Œé‚£å°±æ˜¯è§†é¢‘å’Œæ‹ç…§éƒ½åœ¨åŒä¸€ä¸ªå®¹å™¨é‡Œé¢ï¼Œå…¶å®æ˜¯ä¸¤ä¸ªå…ƒç´ ï¼ˆvideoå’Œcanvasï¼‰è¿›è¡Œåˆ‡æ¢çš„ ä»£ç å¦‚ä¸‹ï¼š 123$this.video.style.display = "none";$this.canvas.style.display = "block";$this.context.drawImage($this.video, 0, 0, 200, 400); ç»„ä»¶ æœ€åå°±æ˜¯ä¸ªäººå°è£…çš„ç»„ä»¶ï¼Œä»£ç å°±ä¸è´´åœ¨è¿™äº†ï¼Œå•ç‹¬è´´åˆ°ä¸€ä¸ªæ–‡ç« ä¸­å§]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>js</category>
      </categories>
      <tags>
        <tag>å®å½•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaè¯¦è§£jvmå·¥ä½œåŸç†å’Œæµç¨‹]]></title>
    <url>%2Fit233.github.io%2F2018%2F11%2F15%2Fjava%E8%AF%A6%E8%A7%A3jvm%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8C%E6%B5%81%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ã€ç¬”è®°ã€‘æ ‡ç­¾ï¼Œæ˜¯å¯¹äºä»¥å‰åšçš„ä¸€äº›ç¬”è®°çš„å›é¡¾ï¼ŒåŒæ—¶è¿˜æœ‰æ–°çš„å­¦ä¹ ã€‚æœ‰å¯èƒ½æœ‰äº›åœ°æ–¹å·²ç»é—æ¼äº†ï¼Œä¹Ÿå¯èƒ½æœ‰äº›åœ°æ–¹æ— æ³•ç¡®è¯ï¼Œç”šè‡³æœ‰çš„åœ°æ–¹ç†è§£æœ‰è¯¯ï¼ [TOC] ä¸€ã€æµ…è¯´javaè¯´èµ·java,äººä»¬é¦–å…ˆæƒ³åˆ°çš„æ˜¯javaç¼–ç¨‹è¯­è¨€,ç„¶è€Œäº‹å®ä¸Š,Javaæ˜¯ä¸€ç§æŠ€æœ¯,å®ƒç”±å››æ–¹é¢ç»„æˆ: javaç¼–ç¨‹è¯­è¨€ javaç±»æ–‡ä»¶æ ¼å¼ javaè™šæ‹Ÿæœº javaåº”ç”¨ç¨‹åºæ¥å£(Java API) å…¶å…³ç³»å¦‚: javaå¹³å°ç”±Javaè™šæ‹Ÿæœºå’ŒJavaåº”ç”¨ç¨‹åºæ¥å£æ­å»º,javaè¯­è¨€åˆ™æ˜¯è¿›å…¥è¿™ä¸ªå¹³å°çš„é€šé“,ç”¨Javaè¯­è¨€ç¼–å†™å¹¶ç¼–è¯‘çš„ç¨‹åºå¯ä»¥è¿è¡Œåœ¨è¿™ä¸ªå¹³å°ä¸Š. è¿™ä¸ªå¹³å°ç»“æ„: è¿è¡ŒæœŸç¯å¢ƒä»£è¡¨ç€Javaå¹³å°,å¼€å‘äººå‘˜ç¼–å†™Javaä»£ç (.javaæ–‡ä»¶),ç„¶åå°†ä¹‹ç¼–è¯‘æˆå­—èŠ‚ç (.class)æ–‡ä»¶,åœ¨ç„¶åå­—èŠ‚ç è¢«è£…å…¥å†…å­˜,ä¸€æ—¦å­—èŠ‚ç è¿›å…¥è™šæ‹Ÿæœº,å®ƒå°±ä¼šè¢«è§£é‡Šå™¨è§£é‡Šæ‰§è¡Œ,æˆ–è€…æ˜¯è¢«å³æ—¶ä»£ç å‘ç”Ÿå™¨æœ‰é€‰æ‹©çš„è½¬æ¢æˆæœºå™¨ç æ‰§è¡Œ. javaç¨‹åºç»è¿‡ä¸€æ¬¡ç¼–è¯‘ä¹‹åï¼Œå°†javaä»£ç ç¼–è¯‘ä¸ºå­—èŠ‚ç ä¹Ÿå°±æ˜¯classæ–‡ä»¶ï¼Œç„¶ååœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šä¾é ä¸åŒçš„javaè™šæ‹Ÿæœºè¿›è¡Œè§£é‡Šï¼Œæœ€åå†è½¬æ¢ä¸ºä¸åŒå¹³å°çš„æœºå™¨ç ï¼Œæœ€ç»ˆå¾—åˆ°æ‰§è¡Œã€‚è¿™æ ·æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æ¨æ¼”ï¼Œå¦‚æœè¦åœ¨macç³»ç»Ÿä¸Šè¿è¡Œï¼Œæ˜¯ä¸æ˜¯åªéœ€è¦å®‰è£…mac javaè™šæ‹Ÿæœºå°±è¡Œäº†ã€‚ JVMåœ¨å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸­æœ‰ä¸€ä¸ªæ˜ç¡®çš„ä»»åŠ¡,é‚£å°±æ˜¯è¿è¡Œjavaç¨‹åº,å› æ­¤å½“Javaç¨‹åºå‘˜å¯åŠ¨çš„æ—¶å€™,å°±äº§ç”ŸJVMçš„ä¸€ä¸ªå®ä¾‹;å½“ç¨‹åºè¿è¡Œç»“æŸçš„æ—¶å€™,è¯¥å®ä¾‹ä¹Ÿå°±è·Ÿç€æ¶ˆå¤±äº† åœ¨Javaå¹³å°çš„ç»“æ„ä¸­,å¯ä»¥çœ‹å‡º,Javaè™šæ‹Ÿæœº(JVM)å¤„åœ¨æ ¸å¿ƒçš„ä½ç½®,æ˜¯ç¨‹åºä¸åº•å±‚æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶æ— å…³çš„ä¸€ä¸ªå…³é”®.ä¸‹æ–¹æ˜¯ç§»æ¤æ¥å£. ç§»æ¤æ¥å£ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šé€‚é…å™¨ å’Œ Javaæ“ä½œç³»ç»Ÿ å…¶ä¸­ä¾èµ–äºå¹³å°çš„éƒ¨åˆ†è¢«ç§°ä¸ºé€‚é…å™¨ JVMé€šè¿‡ç§»æ¤æ¥å£åœ¨å…·ä½“çš„å¹³å°å’Œæ“ä½œç³»ç»Ÿä¸Šå®ç°;åœ¨JVMçš„ä¸Šæ–¹æ˜¯Javaçš„åŸºæœ¬ç±»åº“å’Œæ‰©å±•ç±»åº“ä»¥åŠä»–ä»¬çš„API,åˆ©ç”¨Java APIç¼–å†™çš„åº”ç”¨ç¨‹åº(application)å’Œå°ç¨‹åº(java applet)å¯ä»¥åœ¨ä»»ä½•Javaå¹³å°ä¸Šè¿è¡Œè€Œæ— éœ€è€ƒè™‘åº•å±‚å¹³å°,å°±æ˜¯å› ä¸ºæœ‰Javaè™šæ‹Ÿæœº(JVMå®ç°äº†ç¨‹åºä¸æ“ä½œç³»ç»Ÿçš„åˆ†ç¦»,ä»è€Œå®ç°äº†Javaçš„å¹³å°æ— å…³æ€§) äºŒã€JVMåŸºæœ¬æ¦‚å¿µå’Œè¿è¡Œè¿‡ç¨‹1.åŸºæœ¬æ¦‚å¿µ:1JVMæ˜¯å¯è¿è¡ŒJavaä»£ç çš„å‡è±¡è®¡ç®—æœºï¼ˆè™šæ‹Ÿè®¡ç®—æœºï¼‰ JVMåŒ…æ‹¬ï¼š ä¸€å¥—å­—èŠ‚ç æŒ‡ä»¤é›† ä¸€ç»„å¯„å­˜å™¨ ä¸€ä¸ªæ ˆ ä¸€ä¸ªåƒåœ¾å›æ”¶ å † ä¸€ä¸ªå­˜å‚¨æ–¹æ³•åŸŸ JVMæ˜¯è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šçš„,å®ƒä¸ç¡¬ä»¶æ²¡æœ‰ç›´æ¥çš„äº¤äº’ 2.è¿è¡Œè¿‡ç¨‹Javaæºæ–‡ä»¶ é€šè¿‡ ç¼–è¯‘å™¨ èƒ½å¤Ÿäº§ç”Ÿç›¸åº”çš„ å­—èŠ‚ç æ–‡ä»¶(.Classæ–‡ä»¶) ,è€Œå­—èŠ‚ç æ–‡ä»¶åˆé€šè¿‡ Javaè™šæ‹Ÿæœºä¸­çš„è§£é‡Šå™¨ ç¼–è¯‘æˆ ç‰¹å®šæœºå™¨ä¸Šçš„æœºå™¨ç  12javaæºæ–‡ä»¶ ----&gt; ç¼–è¯‘å™¨ ----&gt; å­—èŠ‚ç æ–‡ä»¶å­—èŠ‚ç æ–‡ä»¶ ----&gt; JVM ----&gt; æœºå™¨ç  æ¯ä¸€ç§å¹³å° çš„ è§£é‡Šå™¨æ˜¯ä¸åŒçš„, ä½†æ˜¯å®ç°çš„ è™šæ‹Ÿæœº æ˜¯ ç›¸åŒ çš„,è¿™ä¹Ÿå°±æ˜¯Javaä¸ºä»€ä¹ˆèƒ½å¤Ÿ è·¨å¹³å° çš„åŸå› äº† å½“ä¸€ä¸ª ç¨‹åºä»å¼€å§‹è¿è¡Œ è¿™æ—¶ è™šæ‹Ÿæœº å°±å¼€å§‹ å®ä¾‹åŒ– äº†, å¤šä¸ªç¨‹åº å¯åŠ¨å°±ä¼šå­˜åœ¨ å¤šä¸ªè™šæ‹Ÿæœºå®ä¾‹. ç¨‹åº é€€å‡ºæˆ–å…³é—­, åˆ™è™šæ‹Ÿæœº å®ä¾‹æ¶ˆäº¡ , 12æ³¨æ„:å¤šä¸ªè™šæ‹Ÿæœºå®ä¾‹ä¹‹é—´æ•°æ®ä¸èƒ½å…±äº« 3.ä¸‰ç§JVM:1234567- Sun å…¬å¸çš„ HotSpot- BEA å…¬å¸çš„ JRockit- IBM å…¬å¸çš„ J9 JVMåœ¨ JDK1.7 åŠå…¶ä»¥å‰æˆ‘ä»¬æ‰€ä½¿ç”¨çš„éƒ½æ˜¯ Sun å…¬å¸çš„ HotSpot, ä½†æ˜¯ç”±äº Sunå…¬å¸ å’Œ BEAå…¬å¸éƒ½è¢« oracle æ”¶è´­jdk1.8 å°†é‡‡ç”¨ Sun å…¬å¸çš„ HotSpot å’Œ BEA å…¬å¸çš„ JRockit ä¸¤ä¸ªJVMä¸­ ç²¾å å½¢æˆ jdk1.8çš„JVM ä¸‰ã€JVMçš„ä½“ç³»ç»“æ„ 1.Class Loaderç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½.classæ–‡ä»¶,classæ–‡ä»¶åœ¨æ–‡ä»¶å¼€å¤´æœ‰ç‰¹å®šçš„æ–‡ä»¶æ ‡ç¤º,å¹¶ä¸”ClassLoaderè´Ÿè´£classæ–‡ä»¶çš„åŠ è½½ç­‰.ä½†æ˜¯è‡³äºå®ƒæ˜¯å¦å¯ä»¥è¿è¡Œ,åˆ™ç”±Execution Engine(æ‰§è¡Œå¼•æ“)å†³å®š å®šä½å’Œå¯¼å…¥ äºŒè¿›åˆ¶.classæ–‡ä»¶ éªŒè¯ å¯¼å…¥ç±»çš„æ­£ç¡®æ€§ ä¸ºç±» åˆ†é… åˆå§‹åŒ– å†…å­˜ å¸®åŠ© è§£æ ç¬¦å·å¼•ç”¨ 2.Native Interface æœ¬åœ°æ¥å£æœ¬åœ°æ¥å£çš„ä½œç”¨æ˜¯ èåˆä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸ºJavaæ‰€ç”¨, å®ƒçš„ åˆè¡· æ˜¯èåˆ C/C++ , Javaè¯ç”Ÿçš„æ—¶å€™C/C++æ¨ªè¡Œçš„æ—¶å€™,æƒ³è¦ç«‹è¶³,å¿…é¡»è°ƒç”¨C/C++ç¨‹åº, äºæ˜¯å°±åœ¨å†…å­˜ä¸­ä¸“é—¨å¼€è¾Ÿäº†ä¸€å—åŒºåŸŸå¤„ç†æ ‡è®°ä¸º nativeçš„ä»£ç . å…·ä½“åšæ³•: Native Method Stackä¸­ç™»è®°native æ–¹æ³•,åœ¨Execution Engineæ‰§è¡Œçš„æ—¶å€™åŠ è½½native libraies(æœ¬åœ°æ–¹æ³•åº“) ä¸è¿‡ç›®å‰è¯¥æ–¹æ³•ä½¿ç”¨çš„è¶Šæ¥è¶Šå°‘äº†,é™¤éæ˜¯ä¸ç¡¬ä»¶æœ‰å…³çš„åº”ç”¨, å¦‚: é€šè¿‡Javaç¨‹åºé©±åŠ¨æ‰“å°æœº,æˆ–è€…Javaç³»ç»Ÿç®¡ç†ç”Ÿäº§è®¾å¤‡,åœ¨ä¼ä¸šçº§åº”ç”¨ä¸­å·²ç»æ¯”è¾ƒå°‘è§ å› ä¸ºç°åœ¨çš„ å¼‚æ„é¢†åŸŸç©ºé—´ çš„é€šä¿¡å¾ˆå‘è¾¾ ,æ¯”å¦‚:å¯ä»¥ä½¿ç”¨ Socketé€šä¿¡, ä¹Ÿå¯ä»¥ä½¿ç”¨ Web Serviceç­‰ 3.Excution Engine æ‰§è¡Œå¼•æ“:æ‰§è¡Œ åŒ…åœ¨ è£…è½½ç±» çš„æ–¹æ³•ä¸­çš„ æŒ‡ä»¤,ä¹Ÿå°±æ˜¯ æ–¹æ³• 4.Runtime data area è¿è¡Œæ•°æ®åŒº:è™šæ‹Ÿæœºå†…å­˜æˆ–è€… JVMå†…å­˜, ä»æ•´ä¸ª è®¡ç®—æœºå†…å­˜ä¸­å¼€è¾Ÿ ä¸€å—å†…å­˜ å­˜å‚¨ JVMç”¨åˆ°çš„ å¯¹è±¡,å˜é‡ç­‰ è¿è¡ŒåŒºæ•°æ®åˆåˆ†å¾ˆå¤šå°åŒº,åˆ†åˆ«ä¸ºï¼šæ–¹æ³•åŒº å † è™šæ‹Ÿæœºæ ˆ æœ¬åœ°æ–¹æ³•æ ˆ ç¨‹åºè®¡æ•°å™¨ 5.JVMæ•°æ®è¿è¡ŒåŒºè¯¦è§£(æ ˆç®¡è¿è¡Œ,å †ç®¡å­˜å‚¨):1è¯´æ˜: jvmè°ƒä¼˜ä¸»è¦å°±æ˜¯ ä¼˜åŒ–Heapå †å’ŒMethod Areaæ–¹æ³•åŒº æ–¹æ³•åŒº Method Area æ–¹æ³•åŒºæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œ æ‰€æœ‰ å­—æ®µ å’Œ æ–¹æ³•å­—èŠ‚ç  ,ä»¥åŠä¸€äº›ç‰¹æ®Šæ–¹æ³•å¦‚ æ„é€ å‡½æ•°, æ¥å£ä»£ç  ä¹Ÿåœ¨æ­¤å®šä¹‰. ç®€å•è¯´,æ‰€æœ‰ å®šä¹‰çš„æ–¹æ³•çš„ä¿¡æ¯ éƒ½ä¿å­˜åœ¨è¯¥åŒºåŸŸ,å±äº å…±äº«åŒºé—´ é™æ€å˜é‡ + å¸¸é‡ + ç±»ä¿¡æ¯ + è¿è¡Œæ—¶å¸¸é‡æ±  å­˜åœ¨æ–¹æ³•åŒºä¸­ å † javaå †ä¹Ÿæ˜¯çº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œæˆ‘ä»¬çš„ç±»çš„å®ä¾‹å°±æ”¾åœ¨è¿™ä¸ªåŒºåŸŸ(è€ŒæŒ‡å‘è¯¥å®ä¾‹å˜é‡çš„å¼•ç”¨å­˜åœ¨æ ˆ)ï¼Œ å¯ä»¥æƒ³è±¡ä½ çš„ä¸€ä¸ªç³»ç»Ÿä¼šäº§ç”Ÿå¾ˆå¤šå®ä¾‹ï¼Œå› æ­¤javaå †çš„ç©ºé—´ä¹Ÿæ˜¯æœ€å¤§çš„ã€‚ å¦‚æœjavaå †ç©ºé—´ä¸è¶³äº†ï¼Œç¨‹åºä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚ ä¹Ÿæ˜¯ GCï¼ˆåƒåœ¾å›æ”¶æœºåˆ¶ï¼‰ ä¸»è¦çš„ å›æ”¶åŒº, ä¸€ä¸ªJVM å®ä¾‹åªå­˜åœ¨ ä¸€ä¸ªå † ç±»å†…å­˜,å †å†…å­˜çš„ å¤§å° æ˜¯å¯ä»¥ è°ƒèŠ‚ çš„ è™šæ‹Ÿæœºæ ˆ VM Stack æ ˆæ˜¯ä»€ä¹ˆ ï¼šæ ˆä¹Ÿå« æ ˆå†…å­˜, ä¸»ç®¡Java ç¨‹åºçš„è¿è¡Œ, æ˜¯åœ¨ çº¿ç¨‹åˆ›å»ºæ—¶ åˆ›å»º, ä»–çš„ç”Ÿå‘½æœŸæ˜¯è·Ÿéš çº¿ç¨‹çš„ç”Ÿå‘½æœŸ, çº¿ç¨‹ç»“æŸ æ ˆå†…å­˜ä¹Ÿå°± é‡Šæ”¾, å¯¹äºæ ˆæ¥è¯´ ä¸å­˜åœ¨åƒåœ¾å›æ”¶é—®é¢˜, åªè¦çº¿ç¨‹å·²ç»“æŸè¯¥æ ˆå°±over,ç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹ä¸€è‡´, æ˜¯ çº¿ç¨‹ç§æœ‰çš„ åŸºæœ¬ç±»å‹ çš„å˜é‡å’Œ å¯¹è±¡çš„å¼•ç”¨ å˜é‡éƒ½æ˜¯åœ¨å‡½æ•°çš„ æ ˆå†…å­˜ä¸­åˆ†é… æ ˆå­˜å‚¨ä»€ä¹ˆï¼šæ ˆå¸§ä¸­ä¸»è¦ä¿å­˜ 3ç±»æ•°æ®: æœ¬åœ°å˜é‡(Local Variables): è¾“å…¥å‚æ•°å’Œè¾“å‡ºå‚æ•°ä»¥åŠæ–¹æ³•å†…çš„å˜é‡ æ ˆæ“ä½œ( Operand Stack ): è®°å½•å‡ºæ ˆ,å…¥æ ˆçš„æ“ä½œ æ ˆå¸§æ•°æ®( Frame Data ): åŒ…æ‹¬ç±»æ–‡ä»¶,æ–¹æ³•ç­‰ç­‰ æ ˆè¿è¡ŒåŸç† æ ˆä¸­çš„ æ•°æ® éƒ½æ˜¯ä»¥ æ ˆå¸§çš„æ ¼å¼ å­˜åœ¨, æ ˆå¸§æ˜¯ä¸€ä¸ª å†…å­˜åŒºå—, æ˜¯ä¸€ä¸ª æ•°æ®é›†, æ˜¯ä¸€ä¸ªæœ‰å…³ æ–¹æ³• å’Œè¿è¡ŒæœŸ æ•°æ® çš„ æ•°æ®é›† å½“ä¸€ä¸ªæ–¹æ³•Aè¢«è°ƒç”¨æ—¶å°±äº§ç”Ÿäº†ä¸€ä¸ªæ ˆå¸§F1,å¹¶è¢«å‹å…¥åˆ°æ ˆä¸­,Aæ–¹æ³•æœ‰è°ƒç”¨äº†Bæ–¹æ³•,äºæ˜¯äº§ç”Ÿæ ˆå¸§F2ä¹Ÿè¢«å‹å…¥æ ˆ,Bæ–¹æ³•æœ‰è°ƒç”¨äº†Cæ–¹æ³•,äºæ˜¯äº§ç”Ÿçš„æ ˆå¸§F3ä¹Ÿè¢«å‹å…¥æ ˆâ€¦â€¦ä¾æ¬¡æ‰§è¡Œå®Œæ¯•å,å…ˆå¼¹å‡ºåè¿›â€¦â€¦F3,å†å¼¹å‡ºF2,F1 éµå¾ª å…ˆè¿›åå‡º/åè¿›å…ˆå‡º åŸåˆ™ å°±æ˜¯è¯´ï¼Œjavaæ ˆæ˜¯æ¯ä¸ªçº¿ç¨‹ç§æœ‰çš„åŒºåŸŸï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ªjavaæ ˆï¼Œæ¯æ‰§è¡Œä¸€ä¸ªæ–¹æ³•å°±ä¼šå¾€æ ˆä¸­å‹å…¥ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªå…ƒç´ å«â€œæ ˆå¸§â€ï¼Œè€Œæ ˆå¸§ä¸­åŒ…æ‹¬äº†æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ã€ç”¨äºå­˜æ”¾ä¸­é—´çŠ¶æ€å€¼çš„æ“ä½œæ ˆï¼Œè¿™é‡Œé¢æœ‰å¾ˆå¤šç»†èŠ‚ã€‚å¦‚æœjavaæ ˆç©ºé—´ä¸è¶³äº†ï¼Œç¨‹åºä¼šæŠ›å‡ºStackOverflowErrorå¼‚å¸¸ï¼Œæƒ³ä¸€æƒ³ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå®¹æ˜“äº§ç”Ÿè¿™ä¸ªé”™è¯¯ï¼Œå¯¹ï¼Œé€’å½’ï¼Œé€’å½’å¦‚æœæ·±åº¦å¾ˆæ·±ï¼Œå°±ä¼šæ‰§è¡Œå¤§é‡çš„æ–¹æ³•ï¼Œæ–¹æ³•è¶Šå¤šjavaæ ˆçš„å ç”¨ç©ºé—´è¶Šå¤§ã€‚ æœ¬åœ°æ–¹æ³•æ ˆ Native Method Stack æœ¬åœ°æ–¹æ³•æ ˆè§’è‰²å’Œjavaæ ˆç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒæ˜¯ç”¨æ¥è¡¨ç¤ºæ‰§è¡Œæœ¬åœ°æ–¹æ³•çš„ï¼Œå®ƒçš„å…·ä½“åšæ³•æ˜¯Native Method Stackä¸­ç™»è®°nativeæ–¹æ³•ï¼Œæœ¬åœ°æ–¹æ³•æ ˆå­˜æ”¾çš„æ–¹æ³•è°ƒç”¨æœ¬åœ°æ–¹æ³•æ¥å£ï¼Œåœ¨Execution Engineæ‰§è¡Œæ—¶å€™åŠ è½½native libraies ï¼Œæœ€ç»ˆè°ƒç”¨æœ¬åœ°æ–¹æ³•åº“ï¼Œå®ç°ä¸æ“ä½œç³»ç»Ÿã€ç¡¬ä»¶äº¤äº’çš„ç›®çš„ã€‚ ç¨‹åºè®¡æ•°å™¨ PCå¯„å­˜å™¨ï¼ˆæœ‰çš„è¿™ä¹ˆå«ï¼Œè¿™é‡Œæä¸€ä¸‹ï¼‰ï¼Œè¯´åˆ°è¿™é‡Œæˆ‘ä»¬çš„ç±»å·²ç»åŠ è½½äº†ï¼Œå®ä¾‹å¯¹è±¡ã€æ–¹æ³•ã€é™æ€å˜é‡éƒ½å»äº†è‡ªå·±è¯¥å»çš„åœ°æ–¹ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œç¨‹åºè¯¥æ€ä¹ˆæ‰§è¡Œï¼Œå“ªä¸ªæ–¹æ³•å…ˆæ‰§è¡Œï¼Œå“ªä¸ªæ–¹æ³•åæ‰§è¡Œï¼Œè¿™äº›æŒ‡ä»¤æ‰§è¡Œçš„é¡ºåºå°±æ˜¯PCå¯„å­˜å™¨åœ¨ç®¡ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æ§åˆ¶ç¨‹åºæŒ‡ä»¤çš„æ‰§è¡Œé¡ºåº ï¼ˆRegisterï¼Œä¹Ÿæ˜¯è®°å½•ï¼Œç™»è®°ï¼Œå¯„å­˜çš„æ„æ€ï¼Œå°±æ˜¯ç”¨æ¥ç®¡ç†çš„ï¼‰ æ¯ä¸ªçº¿ç¨‹éƒ½ä¸€ä¸ª ç¨‹åºè®¡ç®—å™¨, å°±æ˜¯ä¸€ä¸ª æŒ‡é’ˆ, æŒ‡å‘ æ–¹æ³•åŒºä¸­çš„ æ–¹æ³•å­—èŠ‚ç  (ä¸‹ä¸€ä¸ªå°†è¦æ‰§è¡Œçš„æŒ‡ä»¤ä»£ç ),ç”± æ‰§è¡Œå¼•æ“è¯»å– ä¸‹ä¸€æ¡æŒ‡ä»¤,æ˜¯ä¸€ä¸ª éå¸¸å° çš„å†…å­˜ç©ºé—´,å‡ ä¹å¯ä»¥ å¿½ç•¥ä¸è®¡ 6.å †å†…å­˜ å †å†…å­˜åˆ†ä¸º3éƒ¨åˆ†: 1.æ–°ç”ŸåŒº æ–°ç”ŸåŒºæ˜¯ ç±» çš„ è¯ç”Ÿ,æˆé•¿,æ¶ˆäº¡ çš„åŒºåŸŸ. ä¸€ä¸ª ç±» åœ¨è¿™é‡Œ äº§ç”Ÿ,åº”ç”¨, æœ€åè¢« åƒåœ¾å›æ”¶å™¨æ”¶é›†,ç»“æŸç”Ÿå‘½ æ–°ç”ŸåŒºåˆåˆ†ä¸ºä¸¤éƒ¨åˆ†: ä¼Šç”¸åŒº(Eden space) :æ‰€æœ‰çš„ç±»éƒ½æ˜¯åœ¨ä¼Šç”¸åŒºè¢«newå‡ºæ¥çš„ å¹¸å­˜è€…åŒº(Survivor Space) :æœ‰ä¸¤ä¸ª,0åŒºå’Œ1åŒº å½“ä¼Šç”¸åŒºçš„ç©ºé—´ç”¨å®Œæ—¶,ç¨‹åºæœ‰éœ€è¦åˆ›å»ºå¯¹è±¡,JVMçš„åƒåœ¾å›æ”¶å™¨å°†å¯¹ä¼Šç”¸åŒºè¿›è¡Œåƒåœ¾å›æ”¶(Minor GC),å°†ä¼Šç”¸åŒºä¸­çš„å‰©ä½™å¯¹è±¡ç§»åŠ¨åˆ°å¹¸å­˜0åŒº, è‹¥0å–ä¹Ÿæ»¡äº†,å¯¹è¯¥åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶,ç„¶åç§»åŠ¨åˆ°1åŒº 1åŒºæ»¡äº†ç§»åŠ¨åˆ°å…»è€åŒº(Tenure Generation Space) å…»è€åŒºæ»¡äº†,è¿™æ—¶å€™å°†äº§ç”ŸMajor GC(FullGC),è¿›è¡Œå…»è€åŒºçš„å†…å­˜æ¸…ç†. è‹¥å…»è€åŒºæ‰§è¡ŒFull GCä¹‹åå‘ç°ä¾ç„¶æ— æ³•è¿›è¡Œå¯¹è±¡çš„ä¿å­˜,ä¼šäº§ç”ŸOOMå¼‚å¸¸(OutOfMemoryError,å†…å­˜æº¢å‡º) æ‰€ä»¥ï¼Œå¦‚æœå‡ºç°java.lang.OutOfMemoryError:Java heap spaceå¼‚å¸¸,è¯´æ˜Javaè™šæ‹Ÿæœºçš„å †å†…å­˜ä¸å¤Ÿ ï¼ŒåŸå› æœ‰äºŒï¼š Javaè™šæ‹Ÿæœºçš„å †å†…å­˜ è®¾ç½® ä¸å¤Ÿ,å¯ä»¥é€šè¿‡å‚æ•° -Xms, -Xmx è°ƒæ•´ (jvmè°ƒä¼˜æ–¹é¢ä¼šè¯´) ä»£ç ä¸­åˆ›å»ºäº† å¤§é‡å¤§å¯¹è±¡,å¹¶ä¸”é•¿æ—¶é—´ ä¸èƒ½è¢« åƒåœ¾æ”¶é›†å™¨ æ”¶é›†(å­˜åœ¨è¢«å¼•ç”¨) 2.å…»è€åŒº ç”¨äºä¿å­˜ä»æ–°ç”ŸåŒºç­›é€‰å‡ºæ¥çš„Javaå¯¹è±¡,ä¸€èˆ¬ æ± å¯¹è±¡ éƒ½åœ¨è¿™ä¸ªåŒºåŸŸæ´»è·ƒ å¹´è€ä»£ä¸»è¦å­˜æ”¾JVMè®¤ä¸ºç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒé•¿çš„å¯¹è±¡ï¼ˆç»è¿‡å‡ æ¬¡çš„Young Gençš„åƒåœ¾å›æ”¶åä»ç„¶å­˜åœ¨ï¼‰ å†…å­˜å¤§å°ç›¸å¯¹ä¼šæ¯”è¾ƒå¤§ï¼Œåƒåœ¾å›æ”¶ä¹Ÿç›¸å¯¹æ²¡æœ‰é‚£ä¹ˆé¢‘ç¹ï¼ˆè­¬å¦‚å¯èƒ½å‡ ä¸ªå°æ—¶ä¸€æ¬¡ï¼‰ å¹´è€ä»£ä¸»è¦é‡‡ç”¨å‹ç¼©çš„æ–¹å¼æ¥é¿å…å†…å­˜ç¢ç‰‡ï¼ˆå°†å­˜æ´»å¯¹è±¡ç§»åŠ¨åˆ°å†…å­˜ç‰‡çš„ä¸€è¾¹ï¼Œä¹Ÿå°±æ˜¯å†…å­˜æ•´ç†ï¼‰ã€‚ å½“ç„¶ï¼Œæœ‰äº›åƒåœ¾å›æ”¶å™¨ï¼ˆè­¬å¦‚CMSåƒåœ¾å›æ”¶å™¨ï¼‰å‡ºäºæ•ˆç‡çš„åŸå› ï¼Œå¯èƒ½ä¼šä¸è¿›è¡Œå‹ç¼©ã€‚ ï¼ˆè¿™äº›è°ƒä¼˜ç¯‡ç»†è®²ï¼‰ 3.æ°¸ä¹…åŒºï¼ˆPermanent Space ï¼‰ æ˜¯ä¸€ä¸ª å¸¸é©»å†…å­˜åŒºåŸŸ , ç”¨äºå­˜æ”¾ JDKè‡ªèº« æ‰€æºå¸¦çš„ class,interfaceçš„å…ƒæ•°æ® ä¹Ÿå°±æ˜¯è¯´å®ƒå­˜å‚¨çš„æ˜¯ è¿è¡Œç¯å¢ƒå¿…é¡» çš„ç±»ä¿¡æ¯,è¢«è£…è½½è¿›æ­¤åŒºåŸŸçš„æ•°æ®æ˜¯ ä¸ä¼šè¢« åƒåœ¾å›æ”¶å™¨ å›æ”¶ æ‰çš„ å…³é—­JVM æ‰ä¼šé‡Šæ”¾ æ­¤åŒºåŸŸæ‰€å ç”¨çš„å†…å­˜ å¦‚æœå‡ºç°java.lang.OutOfMemoryError:PermGen space,è¯´æ˜æ˜¯Javaè™šæ‹Ÿæœºå¯¹æ°¸ä¹…ä»£Permå†…å­˜è®¾ç½®ä¸å¤Ÿ ï¼ŒåŸå› ä¹Ÿæœ‰ä¸¤ç‚¹ï¼š ç¨‹åºå¯åŠ¨éœ€è¦åŠ è½½å¤§é‡çš„ç¬¬ä¸‰æ–¹jaråŒ…. å¦‚:åœ¨ä¸€ä¸ªtomcatä¸‹éƒ¨ç½²äº†å¤ªå¤šçš„åº”ç”¨ å¤§é‡åŠ¨æ€åå°„ç”Ÿæˆçš„ç±»ä¸æ–­è¢«åŠ è½½,æœ€ç»ˆå¯¼è‡´PermåŒºè¢«å æ»¡ å…³äºæ°¸ä¹…åŒºçš„ä¸ªç‰ˆæœ¬ï¼š jdk1.6ä¹‹å‰:å¸¸é‡æ± åˆ†é…åœ¨æ°¸ä¹…å¸¦ jdk1.7:æœ‰,ä½†å·²ç»é€æ­¥â€å»æ°¸ä¹…å¸¦â€ jdk1.8ä¹‹å:æ— (java.lang.OutOfMemoryError:PermGen spaceè¿™ç§é”™è¯¯å°†ä¸ä¼šå‡ºç°åœ¨JDK1.8ä¸­) ä¸‹é¢ä¸¤å¼ å›¾ç‰‡è§£é‡Šä¸€ä¸‹ å››ã€ æ–¹æ³•åŒºå’Œå †å†…å­˜çš„å¼‚è®®:å®é™…è€Œè¨€,æ–¹æ³•åŒºå’Œå †ä¸€æ ·,æ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸ,å®ƒç”¨äºå­˜å‚¨è™šæ‹ŸæœºåŠ è½½çš„: ç±»ä¿¡æ¯+æ™®é€šå¸¸é‡+é™æ€å¸¸é‡+ç¼–è¯‘å™¨å˜å¼‚åçš„ä»£ç  è™½ç„¶JVMè§„èŒƒå°†æ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†,ä½†å®ƒå´è¿˜æœ‰ä¸€ä¸ªåˆ«åå«åšNon-Heap(éå †),ç›®çš„å°±æ˜¯è¦å’Œå †åˆ†å¼€. å¯¹äºHotSpotè™šæ‹Ÿæœº,å¾ˆå¤šå¼€å‘è€…ä¹ æƒ¯å°†æ–¹æ³•åŒºç§°ä¹‹ä¸ºâ€æ°¸ä¹…ä»£(Parmanent Gen)â€,ä½†ä¸¥æ ¼æœ¬è´¨ä¸Šè¯´ä¸¤è€…ä¸åŒ,æˆ–è€…è¯´ä½¿ç”¨æ°¸ä¹…ä»£æ¥å®ç°æ–¹æ³•åŒºè€Œå·²,æ°¸ä¹…ä»£æ˜¯æ–¹æ³•åŒºçš„ä¸€ä¸ªå®ç°,jdk1.7çš„ç‰ˆæœ¬ä¸­,å·²ç»å°†åŸæœ¬æ”¾åœ¨æ°¸ä¹…ä»£çš„å­—ç¬¦ä¸²å¸¸é‡æ± ç§»èµ° å¸¸é‡æ± (Constant Pool)æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†,classæ–‡ä»¶é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬,å­—æ®µ,æ–¹æ³•,æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–,è¿˜æœ‰ä¸€é¡¹ä¿¡æ¯å°±æ˜¯å¸¸é‡æ± ,è¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åè¿›å…¥æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­å­˜æ”¾. äº”ã€ç®€å•è¡¥å……å †å†…å­˜è°ƒä¼˜ç®€ä»‹]]></content>
      <categories>
        <category>java</category>
        <category>jvm</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaä¸­çš„å…³é”®å­—native]]></title>
    <url>%2Fit233.github.io%2F2018%2F11%2F15%2FJava%E4%B8%AD%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97native%2F</url>
    <content type="text"><![CDATA[ã€ç¬”è®°ã€‘æ ‡ç­¾ï¼Œæ˜¯å¯¹äºä»¥å‰åšçš„ä¸€äº›ç¬”è®°çš„å›é¡¾ï¼ŒåŒæ—¶è¿˜æœ‰æ–°çš„å­¦ä¹ ã€‚æœ‰å¯èƒ½æœ‰äº›åœ°æ–¹å·²ç»é—æ¼äº†ï¼Œä¹Ÿå¯èƒ½æœ‰äº›åœ°æ–¹æ— æ³•ç¡®è¯ï¼Œç”šè‡³æœ‰çš„åœ°æ–¹ç†è§£æœ‰è¯¯ï¼ [TOC] ä¸€ã€ç®€å•ä»‹ç»nativeå…³é”®å­— ä¼—æ‰€å‘¨çŸ¥ï¼Œjavaæ˜¯è·¨å¹³å°çš„è¯­è¨€ï¼Œæ—¢ç„¶è·¨å¹³å°ï¼Œå°±è¦ç‰ºç‰²å¯¹åº•å±‚çš„æ§åˆ¶ï¼Œæ‰€ä»¥javaå¯¹äºåº•å±‚çš„æ§åˆ¶å°±ä¾èµ–äºå…¶ä»–è¯­è¨€çš„å¸®åŠ©ï¼Œè€Œè¿™å°±æ˜¯nativeçš„ä½œç”¨ nativeæ˜¯ç”¨ä½œjavaå’Œå…¶ä»–è¯­è¨€è¿›è¡Œåä½œæ—¶ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯nativeåçš„æ–¹æ³•çš„å®ç°ä¸æ˜¯ç”¨javaå†™çš„ã€‚æ—¢ç„¶ä¸æ˜¯javaå†™çš„ï¼Œé‚£è‚¯å®šçœ‹ä¸åˆ°å®ƒçš„æºç äº† nativeä¿®é¥°çš„æ–¹æ³•æ—¶ä¸€ä¸ªåŸç”Ÿæ€æ–¹æ³•,æ–¹æ³•å¯¹åº”çš„å®ç°ä¸æ˜¯åœ¨å½“å‰æ–‡ä»¶,è€Œæ˜¯åœ¨ç”¨å…¶ä»–è¯­è¨€(å¦‚Cæˆ–è€…C++)å®ç°çš„æ–‡ä»¶ä¸­.å¹¶ä¸”è¢«ç¼–è¯‘æˆäº†dllæ–‡ä»¶ã€‚ è¿™äº›æ–¹æ³•çš„å®ç°ä½“åœ¨dllæ–‡ä»¶ä¸­ï¼Œjdkçš„æºç ä¸­å¹¶ä¸åŒ…å«ï¼Œæ‰€ä»¥æ˜¯çœ‹ä¸åˆ°çš„ã€‚å¯¹äºä¸åŒçš„å¹³å°ï¼Œä»–ä»¬ä¹Ÿæ˜¯ä¸åŒçš„ã€‚è¿™ä¹Ÿæ˜¯javaçš„åº•å±‚æœºåˆ¶ï¼Œå®é™…ä¸Šjavaå°±æ˜¯åœ¨ä¸åŒçš„å¹³å°ä¸Šè°ƒç”¨ä¸åŒçš„nativeæ–¹æ³•å®ç°å¯¹æ“ä½œç³»ç»Ÿçš„è®¿é—®çš„ Javaè¯­è¨€æœ¬èº«ä¸èƒ½å¯¹æ“ä½œç³»ç»Ÿåº•å±‚è¿›è¡Œè®¿é—®å’Œæ“ä½œ,ä½†æ˜¯å¯é€šè¿‡JNIæ¥å£è°ƒç”¨å…¶ä»–è¯­è¨€æ¥å®ç°å¯¹åº•å±‚çš„è®¿é—®. JNIæ˜¯Javaæœ¬æœºæ¥å£(Java Native Interface),æ˜¯ä¸€ä¸ªæœ¬æœºç¼–ç¨‹æ¥å£,æ˜¯Javaè½¯ä»¶å¼€å‘å‘å·¥å…·ç®±(java Software Development Kit, SDK)çš„ä¸€éƒ¨åˆ†.JNIå…è®¸Javaä»£ç ä½¿ç”¨ä»¥å…¶ä»–è¯­è¨€ç¼–å†™çš„ä»£ç å’Œä»£ç åº“. Invocation API(JNIçš„ä¸€éƒ¨åˆ†)å¯ä»¥ç”¨æ¥å°†Javaè™šæ‹Ÿæœº(JVM)åµŒå…¥åˆ°æœ¬æœºåº”ç”¨ç¨‹åºä¸­,ä»è€Œå…è®¸ç¨‹åºå‘˜ä»£ç å†…éƒ¨è°ƒç”¨javaä»£ç  æ‰€ä»¥ï¼Œnativeçš„æ„æ€å°±æ˜¯é€šçŸ¥æ“ä½œç³»ç»Ÿï¼Œæˆ‘éœ€è¦è¿™ä¸ªæ–¹æ³•ï¼Œè€Œä½ æ“ä½œç³»ç»Ÿéœ€è¦ç»™æˆ‘å®ç°ï¼Œæˆ‘éœ€è¦ä½¿ç”¨ã€‚è€Œjavaåªéœ€è¦è°ƒç”¨æ“ä½œç³»ç»Ÿçš„æ–¹æ³•å°±è¡Œäº† javaä¸æ˜¯å®Œç¾çš„ï¼Œjavaçš„è¿è¡Œé€Ÿåº¦ä¸Šæ¯”ä¼ ç»Ÿçš„Cè¯­è¨€æ…¢è®¸å¤šï¼Œjavaæ— æ³•ç›´æ¥è®¿é—®åˆ°åº•å±‚æ“ä½œç³»ç»Ÿç­‰ç¼ºç‚¹ã€‚å½“ç„¶ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯ä¸Šé¢è¯´çš„åˆ©ç”¨nativeæ–¹æ³•æ¥æ‰©å±•javaç¨‹åºçš„åŠŸèƒ½ã€‚ä»¥ä¸‹æœ‰å®è·µæ­¥éª¤ï¼šæ˜¯ä¹‹å‰åšç¬”è®°çš„æ—¶å€™å°è¯•çš„ï¼š äºŒã€å®è·µç†è§£1ä½¿ç”¨javaè°ƒç”¨Cçš„"sayHello" 1.åˆ›å»ºä¸€ä¸ªjavaç±» 123456789101112public class HelloNative &#123; static&#123; System.loadLibrary("HelloNative"); &#125; public static native void sayHello(); @SuppressWarnings("static-access") public static void main(String[] args) &#123; new HelloNative().sayHello(); &#125;&#125; è¿™é‡Œæœ‰ä¸€ä¸ªsayHello()æ–¹æ³•ï¼Œnativeæ ‡è¯†è¯¥æ–¹æ³•çš„å®ç°åœ¨éå½“å‰æ–‡ä»¶ï¼Œåœ¨staticé™æ€å¿«ä¸­åŠ è½½çš„library(HelloNative)ä¸­ è¿è¡Œmain()ä¹‹åå‡ºç°ä»¥ä¸‹æƒ…å†µ 12 æŠ¥é”™ä¿¡æ¯æ—¶è¯´æ‰¾ä¸åˆ°library(â€œHelloNativeâ€)çš„è·¯å¾„ï¼Œå› ä¸ºæˆ‘ä»¬æœ¬åœ°å°±æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ 2.åˆ›å»ºæœ¬åœ°æ–¹æ³•æ–‡ä»¶ æˆ‘ä»¬å°†Javaç±»HelloNativeå¤åˆ¶å‡ºæ¥ï¼Œï¼ˆæˆ‘ç»™æ”¾åœ¨äº†Dç›˜æ ¹ç›®å½•ï¼Œæ–¹ä¾¿ï¼‰ ç„¶ååœ¨æ§åˆ¶å°ç”¨javacå‘½ä»¤å°†å…¶ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ï¼Œ 1javac HelloNative.jave æ³¨æ„ï¼šå¦‚æœå‘½ä»¤è¾“å…¥ç›®å½•ä¸.javaæ–‡ä»¶ä¸åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œjavacå‘½ä»¤åçš„æ–‡ä»¶åè¦åŠ è·¯å¾„ï¼Œå¦‚å›¾ä¸­d:\HelloNative.javaï¼š ç„¶ååœ¨ç”¨havahç¼–è¯‘ï¼Œè·å¾—åŒ…å«Cå£°æ˜å¤´æ–‡ä»¶ 1javah HelloNative æ³¨æ„ï¼šåœ¨è¿™é‡Œï¼Œæˆ‘å‘½ä»¤ç›®å½•ä¸æ–‡ä»¶ç›®å½•ä¸åœ¨åŒä¸€è·¯å¾„ï¼ŒæŠ¥é”™äº†ï¼Œè¿™ä¸ªå‘½ä»¤ä¸ä¼šåŒºåˆ«è·¯å¾„ï¼Œè€Œæ˜¯åœ¨å½“å‰ç›®å½•ä¸‹æ‰¾d:\HelloNativeè¿™ä¸ªåå­—çš„æ–‡ä»¶ï¼ŒæŠŠd:\ä¹Ÿå½“æˆæ–‡ä»¶åå­—çš„ä¸€éƒ¨åˆ† åˆ°æ­¤ï¼Œæˆ‘ä»¬ä¸€å…±æœ‰ä¸‰ä¸ªæ–‡ä»¶äº†ï¼š çœ‹ä¸€ä¸‹.hæ–‡ä»¶çš„å†…å®¹å§ï¼š 123456789101112131415161718192021/* DO NOT EDIT THIS FILE - it is machine generated */#include &lt;jni.h&gt;/* Header for class HelloNative */#ifndef _Included_HelloNative#define _Included_HelloNative#ifdef __cplusplusextern "C" &#123;#endif/* * Class: HelloNative * Method: sayHello * Signature: ()V */JNIEXPORT void JNICALL Java_HelloNative_sayHello (JNIEnv *, jclass);#ifdef __cplusplus&#125;#endif#endif åˆ›å»º.cæ–‡ä»¶ï¼š 12 ç„¶åè¿è¡Œgccå‘½ä»¤æ¥ç”Ÿæˆdllå…±äº«åº“ 12 å‘½ä»¤ä¸­çš„è·¯å¾„æ˜¯ç”µè„‘ä¸­jdkçš„å®‰è£…è·¯å¾„\include å®Œæˆåè¿™æ ·å°±æœ‰5ä¸ªæ–‡ä»¶äº†ï¼š ç„¶ååœ¨ç”¨javaå‘½ä»¤è¿è¡Œä¸€ä¸‹javaä»£ç ï¼Œå°±èƒ½æˆåŠŸåœ¨cmdé€šè¿‡javaä»£ç è°ƒç”¨cçš„sayHelloæ–¹æ³•äº† 1java HelloNative è¯´æ˜ï¼š ä»gccå‘½ä»¤å¼€å§‹ï¼Œæ²¡æœ‰å›¾å’ŒçœŸç›¸äº†ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘æ‰€æœ‰çš„ç¬”è®°æ ‡ç­¾çš„æ–‡ç« éƒ½æ˜¯å›å¤´çœ‹ä»¥å‰åšçš„ç¬”è®°çš„æ—¶å€™ï¼Œé‡æ–°æ•´ç†è®°å½•ä¸€ä¸‹ï¼Œä¹Ÿæœ‰çš„æ˜¯ä¹‹å‰æ²¡æœ‰è®°å½•åˆ°çš„ï¼Œæ•´ç†çš„æ—¶å€™åˆé‡æ–°å­¦ä¸€éï¼›ä¹Ÿæœ‰ä¹‹å‰è¯•éªŒè¿‡ä½†æ˜¯ç°åœ¨ç¯å¢ƒä¸å…è®¸äº†ã€‚ ä¸è¿‡åˆå»äº†ç½‘ä¸Šçœ‹äº†çœ‹å¸–å­ï¼Œåˆ«äººçš„æ–‡ç« æœ‰çš„ç”¨çš„å‘½ä»¤ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å…·ä½“å¦‚ä½•ç”Ÿæˆdllï¼Œå°è¯•ä¸€ä¸‹å°±è¡Œäº†ï¼Œåªè¦ç”Ÿæˆäº†dllå°±OKäº† ä¸‰ã€æ­¥éª¤æ€»ç»“ï¼š1æ€»ç»“ä¸€ä¸‹æ­¥éª¤å§ï¼š 1 å…ˆåˆ›å»ºjavaç±»ï¼Œåœ¨ç±»ä¸­åŠ è½½éœ€è¦çš„libraryï¼Œå£°æ˜è¦è°ƒç”¨çš„æœ¬åœ°æ–¹æ³• 2 ä½¿ç”¨javacå‘½ä»¤ç¼–è¯‘.javaæ–‡ä»¶ï¼Œç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶.class 3 ä½¿ç”¨javahå‘½ä»¤ç¼–è¯‘æˆ.hæ–‡ä»¶ï¼Œç”ŸæˆåŒ…å«Cå£°æ˜å¤´çš„æ–‡ä»¶ 4 ç¼–å†™cæ–‡ä»¶ï¼ˆ.cï¼‰ï¼Œç„¶åé€šè¿‡gccå‘½ä»¤(æˆ–è€…vs C++ç¯å¢ƒä¸‹clå‘½ä»¤)ç”Ÿæˆdll 5 ç„¶ååˆ©ç”¨javaå‘½ä»¤è¿è¡ŒJavaä»£ç æ£€æµ‹æ˜¯å¦æˆåŠŸ å…¶å®ï¼Œä¸Šé¢çš„è¿™ä¸ªæ­¥éª¤æ˜¯åç€æ¥çš„ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä»javaä»‹å…¥ï¼Œå¾€åº•å±‚æ‰¾çš„ï¼ŒçœŸæ­£çš„é¡ºåºåº”è¯¥æ˜¯å…ˆå†™å¥½çš„cæ–¹æ³•ç”Ÿæˆdllå…±äº«åº“ï¼Œç„¶åjvmå¯åŠ¨ä¹‹åç•™åœ¨æœ¬åœ°æ–¹æ³•åŒºä¸­ï¼Œéšç€æˆ‘ä»¬å†™å¥½javaä»£ç ä¹‹åï¼Œå¦‚æœéœ€è¦ç”¨åˆ°æœ¬åœ°æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å»æ‰¾ç›¸åº”çš„æ–¹æ³•ç›´æ¥è°ƒç”¨å°±è¡Œäº†(è¿™éƒ¨åˆ†å¯ä»¥ç®€å•çœ‹ä¸€ä¸‹jvmæ–¹é¢çš„çŸ¥è¯†åº”è¯¥æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œå¥½äº†ï¼Œæˆ‘å†çœ‹çœ‹jvmçš„ç¬”è®°)ã€‚]]></content>
      <categories>
        <category>java</category>
        <category>å…³é”®å­—</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨JPAåˆ›å»ºåŸç”Ÿsql(ä¸ä½¿ç”¨å®ä½“ç±»)]]></title>
    <url>%2Fit233.github.io%2F2018%2F11%2F13%2F%E4%BD%BF%E7%94%A8JPA%E5%88%9B%E5%BB%BA%E5%8E%9F%E7%94%9Fsql-%E4%B8%8D%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BD%93%E7%B1%BB%2F</url>
    <content type="text"><![CDATA[[TOC] ä¸€ã€æè¿° JPAå¾ˆå¼ºå¤§ï¼Œå—¯ï¼Œæ²¡é”™ï¼Œæ˜¯å¾ˆå¼ºå¤§ï¼ å®ƒæ˜¯é€šè¿‡JDK5.0æ³¨è§£æˆ–è€…XMLæè¿°å¯¹è±¡-å…³ç³»è¡¨çš„æ˜ å°„å…³ç³»ï¼Œå¹¶èƒ½å¤Ÿå°†åœ¨è¿è¡Œä¸­çš„å®ä½“å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚ å¹¶ä¸”å®ƒä¹Ÿæ˜¯é¢å‘å¯¹è±¡æŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯å°†å®ä½“ç±»ä¸æ•°æ®åº“çš„è¡¨æ˜ å°„ï¼Œå³ä½¿ä¸ä¼šæ•°æ®åº“çš„å¼€å‘è€…ï¼Œåªè¦èƒ½çœ‹æ‡‚javaçš„ç±»ï¼Œåªè¦èƒ½ç†Ÿç»ƒä½¿ç”¨jpaï¼Œä¹Ÿèƒ½å¾ˆä¾¿æ·åœ°æ“ä½œæ•°æ®åº“ å½“ç„¶ï¼Œæ˜ å°„ç±»æœ‰å…¶å¥½å¤„ï¼Œä¹Ÿæœ‰å¼Šç«¯ã€‚å‡å¦‚è¯´ï¼ŒæŸä¸ªåœºæ™¯ä¸‹ï¼Œæˆ‘éœ€è¦æŸ¥è¯¢å¤šä¸ªè¡¨ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”æ¯ä¸ªè¡¨ä¸­åªæœ‰ä¸€åˆ°ä¸¤ä¸ªå­—æ®µæœ‰ç”¨ï¼Œè€Œæ•´å¼ è¡¨çš„å­—æ®µåˆå¾ˆå¤šï¼Œæ‰€ä»¥æœ‰æ—¶å€™å°±ä¸éœ€è¦å°†æ¯ä¸ªè¡¨éƒ½å®Œæ•´æ˜ å°„æˆå®ä½“ç±»ï¼ˆä¸ç„¶çš„è¯ï¼Œæ¯æ¬¡æŸ¥è¯¢å°±è¦å¤šæŸ¥è¯¢å¾ˆå¤šæ— ç”¨çš„åƒåœ¾ä¿¡æ¯ï¼‰ ä»Šå¤©é‡åˆ°äº†è¿™ç§åœºæ™¯ï¼Œç”±äºæ˜¯å¤šè¡¨è”æŸ¥ï¼Œä½†æ˜¯åªéœ€è¦å…¶ä¸­å„ä¸€ä¸ªå­—æ®µï¼Œå…¶ä½™çš„æ¯ä¸ªè¡¨åå‡ ä¸ªå­—æ®µéƒ½æ²¡ç”¨ã€‚æ‰€ä»¥å°±ä¸éœ€è¦æŠŠæ¯å¼ è¡¨çš„æ•°æ®éƒ½æŸ¥è¯¢å‡ºæ¥ã€‚è€Œä¸ªäººå¯¹äºjpaä¹Ÿä¸ç†Ÿç»ƒï¼Œæ‰€ä»¥è¸©äº†å¾ˆå¤šå‘ã€‚ä¸‹é¢å°±æ­¤è®°å½•ï¼š äºŒã€å®å½•ï¼ˆè¸©å‘å…¨è¿‡ç¨‹ï¼Œå®åŠ›å‘è‡ªå·±ï¼Pain and happiness!æƒ³ç›´æ¥çœ‹ç»“æœï¼Œç›´æ¥æ‹‰ä¸‹å»åˆ«çœ‹è¿™æ®µäº†ï¼‰ æƒ³æ³•1ã€è¿”å›mapï¼Œä¸ç”¨å®ä½“ç±» 1.daoå±‚ï¼ˆRepositoryï¼‰ å°±æ˜¯æ§åˆ¶sqlè¯­å¥å¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚ è¿™é‡Œçš„æ¥å£å¾ˆå®¹æ˜“å†™ï¼Œåªéœ€è¦ç»§æ‰¿JpaRepository&lt;entity,object&gt;æ¥å£å°±å¯ä»¥äº†# è¿™é‡Œéœ€è¦æ³¨æ„ï¼š 1.entityï¼Œå¿…é¡»æ˜¯è¢«ç®¡ç†çš„ç±»ï¼Œä¹Ÿå°±æ˜¯ä¸æ•°æ®åº“è¿›è¡Œæ˜ å°„çš„å®ä½“ç±» æ‰€ä»¥ï¼Œå°±å‘åœ¨è¿™äº†ï¼Œä¸€ç›´æŠ¥é”™è¯´Repositoryä»€ä¹ˆä»€ä¹ˆç±»å‹å¿…é¡»æ˜¯è¢«æ˜ å°„ç®¡ç†çš„ï¼Œè€Œmapå´ä¸æ˜¯ã€‚å¥¶å¥¶çš„ï¼Œç»§ç»­æƒ³åŠæ³• æƒ³æ³•2ã€ åˆ›å»ºå®ä½“ç±»ï¼ˆä¸è¿‡ç”±äºä¸æ‡‚ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰è¿›è¡Œå…³ç³»æ˜ å°„ï¼Œå°±æ˜¯ä¸€ä¸ªå•çº¯çš„javaBeanï¼Œä¸ç”¨ä»”ç»†è¯´äº†å¤±è´¥ï¼ï¼‰ â€‹ æ³¨æ„ï¼š 1.å®ä½“ç±»å¿…é¡»ä¸æ•°æ®åº“æ˜ å°„æ‰ç®—è¢«æ˜ å°„ç®¡ç†ï¼ˆ@Entityæ³¨è§£ï¼‰ ç»§ç»­å°è¯• æƒ³æ³•3ã€æ˜ å°„å®ä½“ç±»(ä½†æ˜¯è¿™æ¬¡ä¹Ÿåªå†™äº†éƒ¨åˆ†å­—æ®µï¼Œè‡ªå·±éœ€è¦çš„) â€‹ æ³¨æ„ï¼š åŠ ä¸Šæ³¨è§£æ ‡æ˜æ˜ å°„ä¹‹åï¼Œåˆç‰¹ä¹ˆè„‘æ®‹è¸©äº†ä¸ªé›·ï¼ˆé„™è§†è‡ªå·±ä¸€ç§’é’Ÿï¼‰ å¯¹äºè¿™ä¸ªï¼Œè¯´ä¸€ä¸‹å§ï¼Œç”±äºæœ€åˆæ²¡æ‰“ç®—æ˜ å°„ï¼Œå¹¶ä¸”éœ€è¦çš„æ•°æ®æ˜¯å¤šä¸ªè¡¨çš„ï¼Œæ‰€ä»¥ç±»åå°±è‡ªå·±èµ·çš„åå­—ã€‚å¥½å®¶ä¼™ï¼Œæç¤ºtable_nameæ²¡æœ‰è¢«æ˜ å°„è¿‡ï¼æˆ‘å˜ä¸ªæ“¦ã€‚æ‰€ä»¥åœ¨@Entityæ³¨è§£åŠ ä¸Šnameå±æ€§ï¼š @Entity(name=â€table_nameâ€)æœ€åˆçš„æ—¶å€™åŠ é”™äº†ï¼Œå†™æˆå®ä½“ç±»çš„åå­—äº†ï¼Œå°´å°¬ï¼è¿™é‡Œå…¶å®è¦å†™è¡¨çš„åå­—ï¼Œè¡¨æ˜è¯¥å®ä½“ç±»ä¸é‚£å¼ è¡¨æ˜ å°„ ä¸æ•°æ®åº“æ˜ å°„çš„ç±»å¿…é¡»æœ‰@Idæ ‡æ˜ä¸»é”®(å¤±è´¥ä¸€æ¬¡ï¼å¼ï¼Œä¸æƒ³è§£é‡Šäº†) è¿™ä¸€ç‚¹å¿æ— å¯å¿ï¼é”™è¯¯ä¿¡æ¯è¯´ï¼Œè¡¨ä¸­ä¸ºnot nullçš„å­—æ®µï¼Œå¿…é¡»åœ¨å®ä½“ç±»ä¸­æ˜ å°„ï¼ä¹Ÿå°±æ˜¯å®ä½“ç±»ä¸­å¿…é¡»æœ‰éç©ºå­—æ®µçš„å±æ€§ï¼ï¼ï¼ å¼å¼å¼ï¼ï¼æˆ‘è¿å¼ä¸‰æ¬¡å¯ä»¥äº†å§ï¼é‚£æˆ‘è·Ÿæ˜ å°„å…¨éƒ¨å­—æ®µæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿè¿˜æ˜¯åˆè¡·å—ï¼Ÿ ä»¥ä¸Šä¸€ç¯æ‰£ä¸€ç¯ä¹‹åï¼Œæƒ³è¦æŒ‰ç…§ä¹‹å‰æƒ³æ³•ï¼Œå®ä½“ç±»ï¼Œæ‹œæ‹œï¼ ç»è¿‡ä»¥ä¸Šç»•çš„å¼¯è·¯ï¼Œæ‰€ä»¥å°±åˆç»•å›æ¥äº†ã€‚å“¼å“¼ï¼äºæ˜¯ä¹ï¼šè€å­ä¸ç”¨å®ä½“ç±»äº†ï¼Œä¹Ÿä¸ç»§æ‰¿JpaRepositoryã€‚ æƒ³æ³•4ã€æ³¨è§£æ‰˜ç®¡Repositoryï¼ å¥ˆæ–¯ï¼å¯åŠ¨åˆšå¼€å§‹æ²¡æŠ¥é”™ï¼Œä¹‹å‰æŠ¥é”™è²Œä¼¼è·³è¿‡å»äº†ï¼çªç„¶ä¹‹é—´ï¼ŒXXXXXX that could not be foundï¼Œæˆ‘çœŸxxxxäº†ï¼Œç„¶åå»ç½‘ä¸Šæ‰¾è§£å†³æ–¹æ³•ï¼Œè¦åè¡€ï¼å„ç§å„æ ·çš„æ–¹æ³•ï¼Œæ²¡ç”¨ï¼ç›´åˆ°æˆ‘çœ‹åˆ°ä¸€ä¸ªå¸–å­ï¼š ä¸€å£è€è¡€å•Šï¼æœæ–­ä¸æ‰¾äº†ï¼ ï¼ˆåˆ«å­¦æˆ‘ï¼Œå› ä¸ºåˆšåˆšåœ¨æ‰¾è¿™ä¸ªå¸–å­çš„æ—¶å€™ï¼Œæ— æ„é—´ç¥è§å¦ä¸€ä¸ªå¸–å­ï¼Œ è§£å†³æ–¹æ¡ˆæ˜¯ï¼šåœ¨Applicationå¯åŠ¨ç±»ä¸­åŠ ä¸Šæ³¨è§£ï¼š@EnableJpaRepositories(&quot;com.example.repository&quot;)æ¥è¯´æ˜è¦æ‰«æçš„ç±»ï¼Œ è™½ç„¶ä¹‹å‰ä¹Ÿåœ¨å¯åŠ¨ç±»ä¸­åŠ è¿‡æ³¨é‡Šï¼Œä½†æˆ‘ä¹Ÿè®°ä¸æ¸…è¿™ä¸ªåˆ°åº•æœ‰æ²¡æœ‰å°è¯•è¿‡äº†ï¼Œ æ„Ÿè§‰å¾ˆé è°±ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹ï¼å¤±è´¥äº†ä¹Ÿåˆ«æ¥æ‰¾æˆ‘,ä¹Ÿæœ‰å¯èƒ½ç¯å¢ƒä¸åŒï¼‰ æ‰€ä»¥ï¼è¿™æ˜¯ä¸€ä¸ªæ­»å¾ªç¯å•Šï¼Œæƒ³è¦ç”¨daoå±‚Repositoryï¼ŒOKçš„ï¼Œç»§æ‰¿JPARepositoryå§ï¼Œ ç­‰ç­‰ï¼Œæˆ‘jpaæœ‰æ¡ä»¶çš„ï¼Œentityå‘¢ï¼Ÿ å¥½ï¼Œç»™ä½ ï¼ æ…¢ç€ï¼Œæˆ‘entityä¸å¹²ï¼Œå…ˆç»™cpä¸€ä¸ªæ•°æ®åº“è¡¨å§ï¼Œæˆ‘å¯ä¸æ‰“é…±æ²¹çš„ï¼å”‰ï¼Œç»™ä½ cpä¸ªè¡¨å§ï¼Œ åœï¼cpéšä¾¿ä½ ï¼Œä½†æ˜¯æˆ‘æœ‰å­©å­ï¼Œå¾—å¸¦è¿‡å»ï¼Œä½ å»é—®é—®entityåŒä¸åŒæ„ï¼ å°¼ç›ï¼Œå¯æ€•ï¼ï¼ï¼ äºæ˜¯ï¼Œæœæ–­æ”¾å¼ƒäº†ä»daoå±‚å…¥æ‰‹ã€‚ ä¸‰ã€è§£å†³æ–¹æ¡ˆ JPAå¾ˆå¼ºå¤§ï¼Œå—¯ï¼Œæ²¡é”™ï¼Œæ˜¯å¾ˆå¼ºå¤§ï¼ åˆæ˜¯è¿™å¥è¯ï¼Œæ²¡é”™ï¼Œæˆ‘ä»¬å¦‚æœæ˜ å°„å®ä½“ç±»çš„è¯ï¼Œé‚£ä¹ˆç›®å‰çš„æƒ…å†µå°±æ„Ÿè§‰æ— ç”¨æ•°æ®å¤ªå¤šï¼Œè€Œä¸”ç´¯èµ˜ï¼Œè¦æ˜ å°„å¥½å‡ å¼ è¡¨ ä½†æ˜¯åˆ«æ€•ï¼Œjpaä¸ä½†èƒ½é¢å‘å¯¹è±¡æŸ¥è¯¢ï¼Œè¿˜æ”¯æŒåŸç”Ÿsqlï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬æ ¹æ®è‡ªå·±çš„æƒ³æ³•æ¥å®ç° ç¬¬ä¸€ç§ï¼šä½¿ç”¨æ³¨è§£@Query(value=â€sqlStringâ€) ç¬¬äºŒç§ï¼šentityManager.createNativeQuery(sqlString) ç¬¬ä¸€ç§ï¼Œæ³¨è§£åœ¨daoå±‚çš„æ–¹æ³•ä¸Šï¼Œç”±äºæˆ‘è‡ªåŠ¨è£…é…å‡ºé—®é¢˜äº†ï¼Œå¹¶ä¸”åŠæ—©åœ°æ”¾å¼ƒäº†ï¼Œæ‰€ä»¥æ²¡ç”¨ï¼Œ ç¬¬äºŒç§ï¼Œä¸Šä»£ç  123456Query query = entityManager.createNativeQuery("select * from user where id = ?");query.setParameter(1,"g10001");List list = query.getResultList();Map&lt;String,String&gt; map = new HashMap&lt;&gt;(); map.put("name1",objs.get(0)[0].toString()); map.put("name2",objs.get(0)[1].toString());...... æå®šï¼listæ˜¯List&lt;Object[]&gt;ç±»å‹ï¼Œé‡Œé¢æ”¾çš„å°±æ˜¯ä¸€æ¡æ¡æ•°æ®ï¼Œè€ŒObject[]æ•°ç»„é‡Œé¢æ˜¯ä¸€æ¡æ•°æ®ä¸­çš„æ‰€æœ‰å­—æ®µã€‚ ä¸è¿‡åˆè§å‡ ä¸ªå‘ï¼Œæ˜¯ç½‘ä¸Šçš„å¸–å­ï¼Œä»£ç å¦‚ä¸‹ï¼š 123for(Object os : list)&#123; Map map = (Map)os;&#125; æˆ‘åªæ±‚æ•°ç»„ï¼ˆå®é™…ä¸Šæ˜¯Objectç±»å‹çš„æ•°ç»„ï¼‰å¼ºè½¬Mapè¿™æ³¢æ“ä½œï¼ï¼ï¼ï¼æ²¡åˆ«çš„è¦æ±‚ å››ã€è¯™è°çš„è¯è¯­ï¼Œæç¬‘è€Œåˆé€—é€¼ï¼å°±è·Ÿè€æœ‹å‹èŠéªšï¼Œå¬è€æœ‹å‹ç‰¢éªšã€‚è½»æ¾å—ï¼Ÿ]]></content>
      <categories>
        <category>java</category>
        <category>æ¡†æ¶</category>
        <category>JPA</category>
      </categories>
      <tags>
        <tag>å®å½•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlå»ºè¡¨æ—¶è®¾ç½®æ—¥æœŸé»˜è®¤å€¼åŠé»˜è®¤ä¿®æ”¹æ—¶é—´]]></title>
    <url>%2Fit233.github.io%2F2018%2F11%2F12%2Fmysql%E5%BB%BA%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE%E6%97%A5%E6%9C%9F%E9%BB%98%E8%AE%A4%E5%80%BC%E5%8F%8A%E9%BB%98%E8%AE%A4%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4%2F</url>
    <content type="text"><![CDATA[[TOC] ä¸€ã€ç®€å•è¯´æ˜åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œåœ¨æ•°æ®åº“ä¸­åŸºæœ¬ä¸Šéƒ½ä¼šæœ‰å…³äºæ—¥æœŸçš„é—®é¢˜ã€‚å…¶ä¸­ä¸ä¹åŒ…æ‹¬æ—¥æœŸæ ¼å¼ã€è¿ç®—ã€æ¯”è¾ƒç­‰ç­‰ã€‚ä¸è¿‡è¿™äº›éƒ½å¾ˆå¸¸è§äº†ï¼Œä»Šå¤©è¦è®°å½•çš„ç‚¹ï¼Œéå¸¸ç®€å•ï¼Œä¸è¿‡å¯èƒ½ä¹Ÿæ˜¯å¾ˆå¤šæƒ…å†µä¸‹å¿½ç•¥çš„ä¸œè¥¿ã€‚ å…³äºè¿™æ¬¡è®°å½•çš„ä¸œè¥¿ï¼Œå°±æ˜¯mysqlä¸­æ—¶é—´æ ¼å¼çš„é»˜è®¤å€¼ã€‚ å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šå¯¹ä¸€æ¡æ•°æ®çš„ç›¸å…³æ—¶é—´è¿›è¡Œè®°å½•ï¼Œæ¯”å¦‚åˆ›å»ºæ—¥æœŸï¼Œä¿®æ”¹æ—¥æœŸç­‰ç­‰æœ€å¸¸è§çš„ã€‚è€Œå¤„ç†è¿™äº›æ—¥æœŸçš„å¤§éƒ¨åˆ†æ–¹æ³•ï¼Œä¸€èˆ¬æ˜¯åœ¨åå°ä¸­è·å–å½“å‰çš„æ—¶é—´ï¼Œç„¶åéšç€æ•°æ®æ’å…¥åˆ°è¡¨ä¸­è¿›è¡Œä¿å­˜ã€‚ ä¸‹é¢ï¼Œè¦è¯´çš„æ˜¯ç”¨mysqlè‡ªå¸¦çš„æ–¹æ³•æ¥å®ç°ã€‚ï¼ˆå¦‚æœè§‰å¾—æ²¡å¤šå¤§æ„ä¹‰çš„è¯ï¼Œè¯·æ­¢æ­¥åˆ°æ­¤å§ï¼Œå¦‚æœæƒ³äº†è§£ä¸€ä¸‹ï¼Œè¯·ç»§ç»­ï¼‰ äºŒã€å›¾æ–‡ç¤ºä¾‹è¿™é‡Œä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯MySQL 5.6 1.mysqlçš„æ—¥æœŸå’Œæ—¶é—´ç±»å‹ï¼ˆè¿™é‡Œä¼šå±•ç¤ºä¸€ä¸‹å„ç§æ—¶é—´æ ¼å¼ï¼Œä¸æƒ³çœ‹çš„è·³è¿‡ï¼‰å…ˆæ¥çœ‹ä¸€ä¸‹mysqlä¸­çš„æ—¥æœŸå’Œæ—¶é—´ç±»å‹ï¼Œä»¥åŠå…¶å€¼çš„æ ·å­ - åœ¨å›¾ä¸­æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°ï¼Œæˆ‘ç»™æ‰€æœ‰çš„æ—¥æœŸå’Œæ—¶é—´ç±»å‹èµ‹å€¼éƒ½æ˜¯å¹´/æœˆ/æ—¥ æ—¶:åˆ†:ç§’.æ¯«ç§’ - è€Œæœ€ç»ˆæŸ¥è¯¢å‡ºæ¥çš„æ—¥æœŸæ ¼å¼å¦‚åˆ—è¡¨å±•ç¤ºï¼Œä¸åŒçš„ç±»å‹ï¼Œæ ¼å¼ä¹Ÿä¸åŒ - å…¶ä¸­yearç±»å‹åªèƒ½èµ‹å€¼å¹¶ä¿å­˜å¹´ä»½ï¼Œä¸è¿‡è¿™ä¸ªå­—æ®µçš„èµ‹å€¼æœ‰ç‚¹æœ‰æ„æ€çš„åœ°æ–¹ 1.1 yearç±»å‹æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸åŒçš„èµ‹å€¼çš„ç»“æœ 1.é¦–å…ˆèµ‹å€¼0 2.ç„¶å1 åº”è¯¥æœ‰äººåº”è¯¥çŒœå‡ºæ¥äº†å§,ä¸è¿‡æˆ‘å¾ˆå¥½å¥‡çš„æ˜¯ï¼Œè¿™ä¸ªèµ‹å€¼åˆ°åº•èŒƒå›´æ˜¯å¤šå°‘ï¼Œäºæ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åˆé‡åˆ°äº†æœ‰è¶£çš„äº‹æƒ… 3.ç„¶åï¼š 1åˆ°è¿™é‡Œå°±èƒ½çœ‹å‡ºæ¥ï¼Œmysqlæ—¥æœŸè™½ç„¶å¹´ä»½èƒ½å¤Ÿä¸ç”¨å†™å®Œæ•´çš„4ä½ï¼Œä½†æ˜¯å¯¹äºåªå†™ä¸¤ä½æ•°ï¼Œmysqlä¸­è¿˜æ˜¯æœ‰ç‚¹èŒƒå›´çš„70è¡¨ç¤º1970ï¼Œè€Œ0è¡¨ç¤ºçš„æ˜¯2000ï¼Œå¾ˆæ˜¾ç„¶ï¼Œæœ€å¤šå°±æ˜¯99è¡¨ç¤º1999äº†ï¼Œç„¶åä»1-69è¡¨ç¤ºçš„æ˜¯2001-2069ï¼Œæ‰€ä»¥mysqléå®Œæ•´çš„å¹´ä»½é»˜è®¤å€¼èŒƒå›´0-99 4.å®Œæ•´å¹´ä»½æœ€å¤§å€¼ 1ä¸è¦é—®æˆ‘æ€ä¹ˆæ¥çš„ï¼Œæˆ‘æ— èŠ 2.æ­£é¢˜ï¼šè®¾ç½®é»˜è®¤æ—¶é—´1è¿™ä¸ªè®¾ç½®æ˜¯åˆ›å»ºè¯¥æ•°æ®çš„å½“å‰æ—¶é—´ 1.ä½¿ç”¨å‡½æ•°now() 1mysqlä¸­æœ‰å‡½æ•°å¯ä»¥åœ¨sqlè¯­å¥ä¸­ç›´æ¥ä½¿ç”¨ï¼ˆåºŸè¯ä¸è§£é‡Šäº†ï¼‰ï¼Œnow()éƒ½ä¸é™Œç”Ÿ 1ä¸è¿‡æ”¯æŒnow()å‡½æ•°çš„åªæœ‰datetimeå’Œtimestampä¸¤ç§ç±»å‹ï¼Œå…¶ä»–ä¸‰ç§éƒ½ä¸æ”¯æŒ 2.current_ï¼ˆcurç³»åˆ—ï¼‰ 123æˆ‘ä»¬å¯ä»¥åˆ©ç”¨default current_timestampä¸ºtimestampç±»å‹çš„è®¾ç½®é»˜è®¤å€¼ä¸è¿‡å¾ˆæ— å¥ˆçš„æ˜¯ï¼Œmysqlä¸­æœ‰current_dateå’Œcurrent_timeç­‰ï¼Œä½†æ˜¯æˆ‘è¿™ä¸ªç‰ˆæœ¬å´ä¸èƒ½ç”¨ï¼Œ 3.è‡ªåŠ¨è®°å½•ä¿®æ”¹æ—¶é—´ 1åœ¨è¿™é‡Œèƒ½å¤Ÿçœ‹åˆ°ï¼Œidä¸º1çš„è¿™æ¡æ•°æ®æ—¶é—´å˜æˆäº†æ‰§è¡Œupdateæ—¶å€™çš„æ—¶é—´ 1ç”±äºå‰ä¸¤å¤©æ¥äº†æ–°é¡¹ç›®ï¼Œæ‰€ä»¥å†™äº†ä¸€åŠå°±åœä¸‹æ¥äº†ï¼Œä»Šå¤©æœ‰ç‚¹æ—¶é—´ï¼Œæƒ³ç€å°±å†™å®Œå®ƒã€‚å‹‰å¼ºçœ‹ï¼Œä¹Ÿç®—ç»™è‡ªå·±åšä¸ªè®°å½•]]></content>
      <categories>
        <category>DB</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>æ—¥æœŸ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2Fit233.github.io%2F2018%2F11%2F09%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>å…¶ä»–</tag>
      </tags>
  </entry>
</search>
